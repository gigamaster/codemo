<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  <title>AI Tools - Codemo</title>
  <meta name="description" content="Codemo Digital Nomad — AI Tools Web Application Embedder">
  <meta name="keywords" content="AI, tools, No-login, no-signin, Free, image generator, generative ai, text generator, model, LLM, HuggingFace, Space, embed, localstorage">
  <meta name="author" content="gigamaster">
  <meta name="designer" content="Nuno Luciano">
  <meta name="copyright" content="2024 NunoLuciano">
  <meta name="generator" content="gigamaster/codemo">
  <meta name="distribution" content="Global">
  <meta name="rating" content="General">
  <meta name="revisit-after" content="7 days">
  <meta name="robots" content="index,follow">
  <meta name="theme-color" content="#111213">
  <link rel="apple-touch-icon" sizes="180x180" href="https://gigamaster.github.io/codemo/asset/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://gigamaster.github.io/codemo/asset/favicon/favicon-32x32.png">
  <link rel="shortcut icon" href="https://gigamaster.github.io/codemo/asset/favicon/favicon.ico">
  <link href="./style.css" rel="stylesheet">
</head>
<body class="bg-slate-100 text-slate-800 dark:bg-slate-800 dark:text-slate-100">

<div class="app-container">
    <!-- App Header -->
    <div class="app-header bg-slate-50 dark:bg-slate-900 grid grid-cols-2 gap-4 p-4 w-full">
      <div>
        <h2 class="text-lg flex items-center "><i class="icon-ai h-6 w-6 mr-2"></i> <span>Codemo — AI Tools</span></h2>
      </div>
      <div class="flex items-center justify-self-end space-x-2">
        <select
          id="urlSelect"
          class="bg-slate-200 border-1 border-slate-300 hover:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md py-1 px-2"
        >
        <option value="">Select an AI application</option>
        </select>

        <button 
        id="themeToggle" 
        class="bg-slate-200 border-1 border-slate-300 hover:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white rounded-md p-1"
        title="Mode">
          <svg id="sunIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="display: none;">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
          </svg>
          <svg id="moonIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
          </svg>
        </button>
        <button 
        id="aboutButton" 
        class="bg-slate-200 border-1 border-slate-300 hover:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white rounded-md p-1"
        title="About"
        >
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"><path d="M21 12a9 9 0 1 1-18 0a9 9 0 0 1 18 0"/><path d="M12 16v-5h-.5m0 5h1M12 8.5V8"/></g></svg>
        </button>
        <button 
        id="settingsButton" 
        class="bg-slate-200 border-1 border-slate-300 hover:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white rounded-md p-1"
        title="Settings"
        >
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"><path d="M4 6c0 1.657 3.582 3 8 3s8-1.343 8-3s-3.582-3-8-3s-8 1.343-8 3"/><path d="M4 6v6c0 1.657 3.582 3 8 3q.316 0 .626-.01M20 11.5V6"/><path d="M4 12v6c0 1.657 3.582 3 8 3m5.001-2a2 2 0 1 0 4 0a2 2 0 1 0-4 0m2-3.5V17m0 4v1.5m3.031-5.25l-1.299.75m-3.463 2l-1.3.75m0-3.5l1.3.75m3.463 2l1.3.75"/></g></svg>  
        </button>
      </div>
    </div>

    <!-- Content Area with Tabs -->
    <div id="appContent" class="app-content">
        <div class="tab-container" id="tabContainer">
            <!-- Tabs dynamically loaded -->
        </div>
        <div id="tabContents">
            <!-- Tab contents -->
          <div id="placeholder" class="flex flex-col flex-grow place-content-center">
              <div class="text-slate-500 text-center m-auto p-4">Please select an AI application from the dropdown.</div>
          </div>
        </div>
    </div>

</div>
    
<!-- The About Modal Overlay -->
<div id="aboutModal" class="modal-overlay">
    <div class="modal-content">
      <!-- modal header -->
        <div class="modal-header bg-slate-50 dark:bg-slate-900">
          <div class="flex justify-between items-center p-1">
            <h2 class="text-lg text-slate-500">About</h2>
            <button id="closeAboutModalButton" class="text-slate-500 hover:text-slate-400 text-3xl leading-none">&times;</button>
          </div>
        </div>
        <!-- modal boody -->  
        <div class="modal-body bg-slate-100 text-slate-500 dark:bg-slate-800">
          <div class="space-y-4">
              <p>
                  Codemo AI Tools is a simple website embedder. 
                  It allows you to save and quickly access your favorite AI Web Applications in one place.
              </p>
              <ul class="my-4">
                <li>Use the <strong>Settings</strong> button to manage your preferred AI applications.</li>
                <li>For example, a <a href="https://huggingface.co/spaces" class="text-slate-400 hover:text-blue-500" target="_blank"><strong>Hugging Face Space</strong></a> you want to use.</li> 
                <li>1. Add a <strong>Name</strong> for the dropdown menu.</li>
                <li>2. Add a <strong>URL</strong> to embed.</li>
                <li>3. Add a <strong>Category</strong> e.g. code, image or text.</li>
                <li>You can export and import your settings.</li>
              </ul>

              <div class="my-4 w-full">
                <div class="flex items-center bg-slate-100 border-1 border-blue-500 dark:bg-slate-900/50 overflow-hidden rounded-lg mx-2 p-4">
                  <div class="flex shrink-0 h-12 w-12 align-middle justify-center rounded-full bg-slate-100 dark:bg-slate-800">
                    <svg class="h-6 w-6 text-blue-500 my-auto" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 7v6m0 4.01l.01-.011M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10"/></svg>
                  </div>
                  <div class="ml-4">
                    <p class="text-sm">To find an embeddable URL for a Space, 
                      look for an <strong>Embed this Space</strong> option on the Hugging Face page, top right menu with three vertical dots.</p>
                  </div>
                </div>
              </div>

<!--               <p class="font-bold">
                  Tip: To find an embeddable URL for a Space, look for an **Embed this Space** option on the Hugging Face page, top right menu with three vertical dots.
              </p> -->
          </div>
  
          <h2 class="text-slate-400 capital text-xl text-center font-bold my-8">Codemo Digital Nomad</h2>
      
          <section class="bg-slate-300 flex dark:bg-slate-900/50 rounded-lg mx-auto w-full overflow-hidden">
            <div class="bg-slate-900 w-64 flex-none codemo-logo">
              <img class="w-full" src="https://gigamaster.github.io/codemo/asset/img/codemo-logo-256.webp" alt="gigamaster.github.io/codemo" />
            </div>
            <div class="flex-1 ">
              <div class="flex flex-col p-6">
                <p class="font-normal text-left mb-4">
                  A versatile collection of web apps designed for developers and creatives on the go. Features include a live code playground, vector graphic creator and editor, and a repository file browser to preview, edit, and download individual files or entire directories as ZIP archives. Built with offline-first capabilities using localStorage for user-configurable settings, enabling full customization and portability. Ideal for local development, demos, and lightweight desktop-like experiences — all running entirely in the browser</p>
                <div class="flex justify-around">
                  <a class="bg-white text-blue-500 font-bold rounded-lg px-6 py-2 hover:translate-y-1 transition">GitHub Repository</a>
                  <a class="bg-blue-500 text-slate-100 font-bold rounded-lg px-6 py-2 hover:translate-y-1 transition">Codemo Digital Nomad</a>
                </div>
              </div>
            </div>
          </section>
        </div>
    </div>
</div>

<!-- Modal Settings Overlay -->
<div id="settingsModal" class="modal-overlay">
  <div class="modal-content">
    <!-- modal header -->
      <div class="modal-header bg-slate-50 dark:bg-slate-900">
        <div class="flex justify-between items-center p-1">
          <h2 class="text-lg text-slate-500">URL Manager</h2>
          <button id="closeSettingsModalButton" class="text-slate-500 hover:text-slate-400 text-3xl leading-none">&times;</button>
        </div>
      </div>
      <!-- modal body -->  
      <div class="modal-body bg-slate-100 dark:bg-slate-800">
        <form id="urlForm" class="text-[12px]">
          <input type="hidden" id="entryId">
          <div class="api-form-group">
            <label for="spaceName">Name <small class="text-slate-500">e.g. Qwen3, Hunyuan3D-2.1</small></label>
            <input 
            type="text"
            id="spaceName" 
            class="bg-slate-200 border-1 border-slate-300 hover:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md py-1 px-2"
            required
            >
          </div>
          <div class="api-form-group">
            <label for="url">URL</label>
            <input 
            type="url" 
            id="url" 
            class="bg-slate-200 border-1 border-slate-300 hover:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md py-1 px-2"
            required
            >
          </div>
          <div class="api-form-group">
            <label for="category">Category <small class="text-slate-500">e.g. Code, Image Generation, Text-to-Speech</small></label>
            <input 
            type="text" 
            id="category" 
            class="bg-slate-200 border-1 border-slate-300 hover:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md py-1 px-2"
            >
          </div>
          <button 
          type="submit" 
          id="submitButton" 
          class="bg-slate-200 text-slate-500 border-1 border-slate-300 hover:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white py-2 px-4 rounded"
          >Add URL
          </button>
        </form>

        <hr class="border-slate-300 dark:border-slate-700 my-6">

        <h3 class="text-xl font-bold font-medium pb-3 dark:text-slate-500">LocalStorage Stored URLs</h3>

          <!-- localstorage export - import -->
          <div class="flex justify-between items-center pb-2">                
            <button 
            id="exportButton" 
            class="bg-slate-200 text-slate-500 border-1 border-slate-300 hover:border-blue-500 dark:bg-slate-700 dark:border-slate-600 dark:text-white flex flex-nowrap py-1 px-4 rounded-md"
            >
              <svg class="w-5 h-5 mr-1" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M19 16v6m0 0l3-3m-3 3l-3-3M4 6v6s0 3 7 3s7-3 7-3V6"/><path d="M11 3c7 0 7 3 7 3s0 3-7 3s-7-3-7-3s0-3 7-3m0 18c-7 0-7-3-7-3v-6"/></g></svg>
              <span>Export</span>
            </button>
            <!-- <input type="file" id="importFile" accept=".json"> -->

            <div class="inline-flex">
              <input 
              type="file" 
              id="importFile" 
              accept=".json" 
              class="block
              bg-slate-200 text-slate-500 cursor-pointer text-sm 
              dark:bg-slate-700 dark:text-white file:px-4 file:py-2 file:h-9 file:rounded-md hover:file:bg-blue-500 hover:file:text-slate-100 rounded-l-md" 
              aria-label="file-input" 
              />
              <button 
              id="importButton" 
              class="bg-slate-200 text-slate-500 hover:bg-blue-500 hover:text-slate-100 dark:bg-slate-700 dark:text-white flex flex-nowrap py-1 px-4 rounded-tr-md rounded-br-md"
              >
                <svg class="w-5 h-5 mr-1" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M4 6v6s0 3 7 3s7-3 7-3V6"/><path d="M11 3c7 0 7 3 7 3s0 3-7 3s-7-3-7-3s0-3 7-3m0 18c-7 0-7-3-7-3v-6m15 10v-6m0 0l3 3m-3-3l-3 3"/></g></svg>
                <span>Import</span>
              </button>
            </div>
          </div>

          <!-- localstorage management -->
          <table id="credentialsTable" class="credentials-table">
              <thead class="bg-slate-300 text-slate-500 dark:bg-slate-900/20">
                  <tr>
                      <th>Name</th>
                      <th>URL</th>
                      <th>Category</th>
                      <th>Actions</th>
                  </tr>
              </thead>
              <tbody>
                  <!-- Data will be populated here by JavaScript -->
              </tbody>
          </table>
        </div>
    </div>
</div>
    
<script>
// Global variable to hold the current state
let selectedUrlEntry = null;
let currentTabs = []; // Track open tabs

// Modal UI
const aboutButton = document.getElementById('aboutButton');
const closeAboutModalButton = document.getElementById('closeAboutModalButton');
const aboutModal = document.getElementById('aboutModal');

const settingsButton = document.getElementById('settingsButton');
const closeModalButton = document.getElementById('closeSettingsModalButton');
const settingsModal = document.getElementById('settingsModal');

const urlSelect = document.getElementById('urlSelect');
const appContent = document.getElementById('appContent');
const placeholder = document.getElementById('placeholder');

const tabContainer = document.getElementById('tabContainer');
const tabContents = document.getElementById('tabContents');

function openModal(modal) {
modal.style.display = 'flex';
}

function closeModal(modal) {
modal.style.display = 'none';
}

aboutButton.addEventListener('click', () => openModal(aboutModal));
closeAboutModalButton.addEventListener('click', () => closeModal(aboutModal));

settingsButton.addEventListener('click', () => {
openModal(settingsModal);
//updateContent(); // Ensure the iframe is up-to-date after closing the modal - REMOVED
});
closeSettingsModalButton.addEventListener('click', () => {
closeModal(settingsModal);
});

// Listen for changes in the URL dropdown
urlSelect.addEventListener('change', () => {
const selectedId = urlSelect.value;
saveSelectedUrlId(selectedId);
const urls = getUrls();
const selectedUrlEntry = urls.find(item => item.id === selectedId);

if (selectedUrlEntry) {
  addTab(selectedUrlEntry.spaceName, selectedUrlEntry.url);
}
});

// --- Dark Mode Logic ---
const themeToggle = document.getElementById('themeToggle');
const sunIcon = document.getElementById('sunIcon');
const moonIcon = document.getElementById('moonIcon');

function toggleTheme() {
  const isDarkMode = document.documentElement.classList.toggle('dark'); // Toggle 'dark' class on <html>
  if (isDarkMode) {
    localStorage.setItem('theme', 'dark');
    sunIcon.style.display = 'block';
    moonIcon.style.display = 'none';
  } else {
    localStorage.setItem('theme', 'light');
    sunIcon.style.display = 'none';
    moonIcon.style.display = 'block';
  }
}

themeToggle.addEventListener('click', toggleTheme);

function loadTheme() {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.documentElement.classList.add('dark'); // Add 'dark' class on <html>
    sunIcon.style.display = 'block';
    moonIcon.style.display = 'none';
  } else {
    document.documentElement.classList.remove('dark'); // Remove 'dark' class on <html>
    sunIcon.style.display = 'none';
    moonIcon.style.display = 'block';
  }
}


// --- URL Manager Logic ---
const form = document.getElementById('urlForm');
const entryIdInput = document.getElementById('entryId');
const spaceNameInput = document.getElementById('spaceName');
const urlInput = document.getElementById('url');
const categoryInput = document.getElementById('category');
const submitButton = document.getElementById('submitButton');
const tableBody = document.querySelector('#credentialsTable tbody');

// Get credentials from localStorage
function getUrls() {
const urls = localStorage.getItem('embeddedUrls');
return urls ? JSON.parse(urls) : [];
}

// Save credentials to localStorage
function saveUrls(data) {
localStorage.setItem('embeddedUrls', JSON.stringify(data));
}

// Save selected URL ID
function saveSelectedUrlId(id) {
localStorage.setItem('selectedUrlId', id);
}

// Get selected URL ID
function getSelectedUrlId() {
return localStorage.getItem('selectedUrlId');
}

// Populate the URL selection dropdown with all available entries
function populateUrlDropdown() {
const urls = getUrls();
const selectedId = getSelectedUrlId();
urlSelect.innerHTML = '<option value="">Select AI Application</option>';
urls.forEach(entry => {
  const option = document.createElement('option');
  option.value = entry.id;
  option.textContent = `${entry.spaceName} (${entry.category})`;
  if (entry.id === selectedId) {
  option.selected = true;
  }
  urlSelect.appendChild(option);
});
}


// --- Tab Management Functions ---
function openTab(tabId, url) {
// Hide all tab contents
document.querySelectorAll('.tab-content').forEach(content => {
  content.classList.remove('active');
});

// Deactivate all tab buttons
document.querySelectorAll('.tab-button').forEach(button => {
  button.classList.remove('active');
});

// Check if the tab content exists, create it if not
let tabContent = document.getElementById(`content-${tabId}`);
if (!tabContent) {
  tabContent = document.createElement('div');
  tabContent.id = `content-${tabId}`;
  tabContent.classList.add('tab-content');

  const iframe = document.createElement('iframe');
  iframe.src = url;
  iframe.classList.add('url-iframe');
  tabContent.appendChild(iframe);

  tabContents.appendChild(tabContent);
}

// Show the selected tab content
tabContent.classList.add('active');

// Activate the tab button
document.getElementById(`tab-${tabId}`).classList.add('active');

saveTabs(); // Update localStorage
updatePlaceholderVisibility();
}

function createTabButton(tabId, spaceName, url) {
const tabButton = document.createElement('button');
tabButton.id = `tab-${tabId}`;
tabButton.classList.add('tab-button');

// Add the tab name
const tabNameSpan = document.createElement('span');
tabNameSpan.textContent = spaceName;
tabButton.appendChild(tabNameSpan);

// Add the close button
const closeButton = document.createElement('button');
closeButton.textContent = ' x ';
closeButton.classList.add('close-tab-button'); // You can add styling for this class
closeButton.addEventListener('click', (event) => {
  event.stopPropagation(); // Prevent tab from being selected when closing
  closeTab(tabId);
});
tabButton.appendChild(closeButton);

tabButton.addEventListener('click', () => openTab(tabId, url));
tabContainer.appendChild(tabButton);
}

function addTab(spaceName, url) {
const tabId = Date.now().toString(); // Unique ID for the tab
currentTabs.push({
  id: tabId,
  spaceName: spaceName,
  url: url
});
createTabButton(tabId, spaceName, url);
openTab(tabId, url);
}

function closeTab(tabId) {
// Remove tab from currentTabs array
currentTabs = currentTabs.filter(tab => tab.id !== tabId);

// Remove tab button from the DOM
const tabButton = document.getElementById(`tab-${tabId}`);
if (tabButton) {
  tabButton.remove();
}

// Remove tab content from the DOM
const tabContent = document.getElementById(`content-${tabId}`);
if (tabContent) {
  tabContent.remove();
}

saveTabs();

// If the closed tab was active, activate another one (e.g., the first)
if (currentTabs.length > 0) {
  openTab(currentTabs[0].id, currentTabs[0].url);
}
updatePlaceholderVisibility();
}


  // Display URLs in the table with Select button
  function renderUrls() {
      const urls = getUrls();
      tableBody.innerHTML = ''; // Clear table
      urls.forEach(entry => {
          const row = tableBody.insertRow();
          // row.className = "border border-blue-800";
          row.innerHTML = `
              <td>${entry.spaceName}</td>
              <td><a href="${entry.url}" target="_blank" class="text-blue-500 hover:underline">${entry.url}</a></td>
              <td>${entry.category || 'N/A'}</td>
              <td class="credentials-actions">
                  <button class="btn-select" onclick="selectUrl('${entry.id}')">Select</button>
                  <button class="btn-edit" onclick="editUrl('${entry.id}')">Edit</button>
                  <button class="btn-delete" onclick="deleteUrl('${entry.id}')">Delete</button>
              </td>
          `;
      });
  }

      // Select an API credential from the modal
      function selectUrl(id) {
          // Update the dropdown value and trigger the change event
          urlSelect.value = id;
          const event = new Event('change');
          urlSelect.dispatchEvent(event);
          
          // Close the modal and trigger the UI update
          closeModal(settingsModal);
      }

      // Handle form submission (Add and Update)
      form.addEventListener('submit', (e) => {
          e.preventDefault();
          const urls = getUrls();
          const spaceName = spaceNameInput.value;
          const url = urlInput.value;
          const category = categoryInput.value;
          const entryId = entryIdInput.value;

          if (entryId) {
              // Update existing entry
              const entryIndex = urls.findIndex(item => item.id === entryId);
              if (entryIndex > -1) {
                  urls[entryIndex] = { ...urls[entryIndex], spaceName, url, category };
              }
              entryIdInput.value = ''; // Clear hidden ID
              submitButton.textContent = 'Add URL'; // Reset button text
          } else {
              // Add new entry
              const newEntry = {
                  id: Date.now().toString(),
                  spaceName,
                  url,
                  category,
              };
              urls.push(newEntry);
          }

          saveUrls(urls);
          form.reset();
          renderUrls();
          populateUrlDropdown();
      });

      // Populate form for editing
      function editUrl(id) {
          const urls = getUrls();
          const entryToEdit = urls.find(item => item.id === id);
          if (entryToEdit) {
              entryIdInput.value = entryToEdit.id;
              spaceNameInput.value = entryToEdit.spaceName;
              urlInput.value = entryToEdit.url;
              categoryInput.value = entryToEdit.category;
              submitButton.textContent = 'Update URL';
          }
      }

      // Delete an entry
      function deleteUrl(id) {
          if (window.confirm('Are you sure you want to delete this URL?')) {
              let urls = getUrls();
              urls = urls.filter(item => item.id !== id);
              saveUrls(urls);
              // If the deleted URL was the selected one, clear the selection
              if (getSelectedUrlId() === id) {
                  localStorage.removeItem('selectedUrlId');
              }
              renderUrls();
              populateUrlDropdown();
              updateContent();
          }
      }

// Local Storage tabs
function saveTabs() {
  localStorage.setItem('currentTabs', JSON.stringify(currentTabs));
}

function loadTabs() {
  const savedTabs = localStorage.getItem('currentTabs');
  if (savedTabs) {
  currentTabs = JSON.parse(savedTabs);
  currentTabs.forEach(tab => {
    createTabButton(tab.id, tab.spaceName, tab.url);
  });
  // Open last active tab, or first if none was active
  if (currentTabs.length > 0) {
    openTab(currentTabs[0].id, currentTabs[0].url); // open first tab
  }
  }
  updatePlaceholderVisibility();
}

function updatePlaceholderVisibility() {
  if (currentTabs.length === 0) {
  placeholder.style.display = 'block';
  } else {
  placeholder.style.display = 'none';
  }
}

// Load Logic
document.addEventListener('DOMContentLoaded', () => {
  // Add a pre-populated URL if localStorage is empty
  const urls = getUrls();
  if (urls.length === 0) {
  const prePopulatedUrl = {
    id: '1',
    spaceName: 'qwen3-coder-webdev',
    url: 'https://qwen-qwen3-coder-webdev.hf.space',
    category: 'Code'
  };
  saveUrls([prePopulatedUrl]);
  saveSelectedUrlId('1');
  }

  renderUrls(); // Load the table in the modal
  populateUrlDropdown(); // Populate the dropdown
  //updateContent(); // Update the content on initial page load - REMOVED
  loadTheme(); // Load the theme preference
  loadTabs();
});

// localstorage export json
function exportLocalStorageData(filename) {
const localStorageData = {};
for (let i = 0; i < localStorage.length; i++) {
  const key = localStorage.key(i);
  localStorageData[key] = localStorage.getItem(key);
}
const jsonString = JSON.stringify(localStorageData, null, 2);
const blob = new Blob([jsonString], {
  type: "application/json"
});
const url = URL.createObjectURL(blob);
const a = document.createElement("a");
a.href = url;
a.download = filename || "ai_localstorage_data.json";
document.body.appendChild(a);
a.click();
document.body.removeChild(a);
URL.revokeObjectURL(url);
}
const exportButton = document.getElementById('exportButton');
exportButton.addEventListener('click', () => {
exportLocalStorageData('ai_localstorage_data.json');
});



// localstorage import json
function importLocalStorageData() {
const importFile = document.getElementById('importFile');
const file = importFile.files[0];

if (!file) {
  alert('Please select a JSON file to import.');
  return;
}

const reader = new FileReader();

reader.onload = function(e) {
  try {
  const jsonData = JSON.parse(e.target.result);
  for (const key in jsonData) {
    localStorage.setItem(key, jsonData[key]);
  }
  alert('LocalStorage data imported successfully!');
  // Refresh UI elements with changes in localStorage
  populateUrlDropdown();
  } catch (error) {
  alert('Error parsing JSON file: ' + error);
  }
}

reader.readAsText(file);
}
const importButton = document.getElementById('importButton');
importButton.addEventListener('click', importLocalStorageData);

</script>
</body>
</html>