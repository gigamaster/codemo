(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();let d=null,a=null;async function f(t,o,r){const s=new Worker(new URL("/assets/worker-B2witzhN.js",import.meta.url),{type:"module"});return s.postMessage({sourceType:t,outputType:o,fileBuffer:r}),new Promise((e,n)=>{s.addEventListener("message",i=>{e(i.data)}),s.addEventListener("error",n)})}function p(t){if(t===0)return"0 Bytes";const o=1024,r=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,s)).toFixed(2))+" "+r[s]}function w(t){return new Promise((o,r)=>{const s=new FileReader;s.onloadend=()=>o(s.result),s.readAsDataURL(t)})}async function g(t,o){d=t,a=o;const r=document.querySelector("#preview"),s=new Blob([t],{type:`image/${o}`}),e=await w(s),n=document.querySelector("#file-size"),i=document.querySelector("#file-format"),l=document.querySelector("#output-info");n.textContent=p(t.byteLength),i.textContent=o.toUpperCase(),l.classList.remove("hidden");const c=document.createElement("img");c.src=e,c.className="max-w-full h-auto rounded-lg shadow-md cursor-pointer",c.alt="Converted image",c.title="Click to download",c.addEventListener("click",m),r.innerHTML="",r.appendChild(c)}function m(){if(!d||!a)return;const t=new Blob([d],{type:`image/${a}`}),o=URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download=`converted-image.${a}`,document.body.appendChild(r),r.click(),setTimeout(()=>{document.body.removeChild(r),URL.revokeObjectURL(o)},100)}function y(){const t=document.querySelector("#preview");document.querySelector("#output-info").classList.add("hidden"),t.innerHTML=`
    <div class="flex flex-col items-center justify-center">
      <span class="loading loading-spinner loading-lg text-primary"></span>
      <p class="mt-4 text-gray-500">Converting your image...</p>
    </div>
  `}function u(t){const o=document.querySelector("#preview");document.querySelector("#output-info").classList.add("hidden"),o.innerHTML=`
    <div class="alert alert-error shadow-lg max-w-md">
      <div>
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current flex-shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>Error: ${t}</span>
      </div>
    </div>
  `}async function v(){const t=document.querySelector("#convert-form");document.querySelector("#download-btn").addEventListener("click",m),t.addEventListener("submit",async r=>{r.preventDefault();const s=new FormData(t),e=s.get("file");if(!e){u("Please select an image file");return}y();try{const n=e.name.endsWith("jxl")?"jxl":e.type.replace("image/",""),i=s.get("outputType"),l=await e.arrayBuffer(),c=await f(n,i,l);g(c,i)}catch(n){console.error("Conversion error:",n),u("Failed to convert image. Please try another format.")}})}async function h(){v()}h();
