<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="color-scheme" content="light dark" />
  <title>Codemo - Encrypt Static HTML</title>
  <meta name="description" content="Codemo Simple Secure Static HTML Encryption" />
  <meta name="application-name" content="Codemo Encrypt" />
  <meta name="author" content="Nuno Luciano" />
  <meta name="generator" content="codemo" />
  <!-- Theme color -->
  <meta name="theme-color" content="#111213" />
  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="https://gigamaster.github.io/codemo/asset/favicon/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://gigamaster.github.io/codemo/asset/favicon/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://gigamaster.github.io/codemo/asset/favicon/favicon-16x16.png" />
  <link rel="manifest" href="https://gigamaster.github.io/codemo/asset/favicon/site.webmanifest" />
  <link rel="mask-icon" href="https://gigamaster.github.io/codemo/asset/favicon/safari-pinned-tab.svg" color="#5bbad5" />
  <link rel="shortcut icon" href="https://gigamaster.github.io/codemo/asset/favicon/favicon.ico" />
  <meta name="msapplication-TileColor" content="#111213" />
  <meta name="msapplication-config" content="https://gigamaster.github.io/codemo/asset/favicon/browserconfig.xml" />
  <!-- social media -->
  <meta name="twitter:card" content="summary_large_image" inertia="" />
  <meta name="twitter:site" content="https://gigamaster.github.io/codemo/" inertia="" />
  <meta name="twitter:title" content="Encrypt Static HTML" inertia="" />
  <meta name="twitter:description" content="Codemo Simple Secure Static HTML Encryption" inertia="" />
  <meta name="twitter:image" content="{{url}}codemo-screen.jpg" inertia="" />
  <meta name="twitter:creator" content="@nunoluciano" inertia="" />
  <link rel="stylesheet" href="./style.css" />
</head>
<script src="import_html.js"></script>
<body>
<div class="layout-grid">
  <nav id="nav">
    <div class="nav-logo">
      <div class="logo"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path fill="currentColor" d="M12 0h-.079c-1.66 0-3.239.349-4.667.978l.074-.029A12.269 12.269 0 0 0 3.52 3.523A12.219 12.219 0 0 0 .978 7.251l-.031.079A11.398 11.398 0 0 0 0 11.919v.086v-.004v.079c0 1.66.349 3.239.978 4.667l-.029-.074a12.276 12.276 0 0 0 2.572 3.807a12.224 12.224 0 0 0 3.729 2.542l.079.031c1.354.6 2.933.949 4.593.949h.083h-.004h.079c1.66 0 3.239-.349 4.667-.978l-.074.029a12.276 12.276 0 0 0 3.809-2.573a12.219 12.219 0 0 0 2.542-3.728l.031-.079c.6-1.354.949-2.932.949-4.593v-.158c0-1.66-.349-3.239-.978-4.667l.029.074a12.286 12.286 0 0 0-2.573-3.806A12.219 12.219 0 0 0 16.754.981L16.675.95C15.321.35 13.741 0 12.08 0h-.083zm.64 22.79v-2.087l5.193-2.633a.421.421 0 0 0 .154-.129l.001-.001a.335.335 0 0 0 .059-.191v-.011v.001v-1.186c.225-.082.412-.226.543-.412l.002-.004c.133-.179.214-.404.214-.648v-.118a1.146 1.146 0 0 0-.366-.746l-.001-.001a1.09 1.09 0 0 0-.75-.297h-.022h.001h-.02c-.308 0-.587.127-.786.332c-.205.2-.332.478-.332.787v.021v-.001v.059c.002.03.011.057.024.081v-.001c.013.222.096.423.227.583l-.001-.002c.133.163.304.289.501.364l.008.003v.949l-4.649 2.372v-1.942l2.039-.949a.533.533 0 0 0 .166-.13l.001-.001a.3.3 0 0 0 .071-.194v-3.233l3.793-2.134a.318.318 0 0 0 .142-.141l.001-.002a.407.407 0 0 0 .047-.189v-.901c.223-.079.409-.218.543-.397l.002-.003c.133-.177.214-.401.214-.644v-.04c0-.308-.127-.587-.332-.786a1.066 1.066 0 0 0-.775-.332H18.4a1.082 1.082 0 0 0-.71.366l-.001.001a1.113 1.113 0 0 0-.285.746v.025v-.001v.02c0 .243.08.466.216.646l-.002-.003c.137.182.322.321.538.397l.008.003v.688l-3.818 2.134a.51.51 0 0 0-.129.129l-.001.002a.338.338 0 0 0-.055.184v.017v-.001v3.2l-1.52.711v-6.972l3.2-1.566a.379.379 0 0 0 .153-.141l.001-.002a.347.347 0 0 0 .059-.189V7.04c.223-.079.409-.218.543-.397l.002-.003c.133-.177.214-.401.214-.644v-.021v.001v-.061a.078.078 0 0 0-.024-.057a1.127 1.127 0 0 0-.366-.719l-.001-.001a1.06 1.06 0 0 0-.738-.297h-.128a1.108 1.108 0 0 0-.719.378l-.001.001a1.103 1.103 0 0 0-.297.754v.123c.032.227.12.428.251.596l-.002-.003c.127.167.301.291.502.354l.007.002v.972l-2.656 1.304V5.288c.225-.082.412-.226.543-.412l.002-.004c.133-.179.214-.404.214-.648V4.2c0-.308-.127-.587-.332-.786a1.095 1.095 0 0 0-.787-.332h-.021h.001h-.02c-.308 0-.587.127-.786.332c-.205.2-.332.478-.332.787v.021v-.001v.118c.03.223.119.421.25.583l-.002-.002c.133.163.304.289.501.364l.008.003v6.569l-1.874-.996V7.865a.292.292 0 0 0-.048-.16l.001.001a.87.87 0 0 0-.095-.119l-1.306-.998a.825.825 0 0 0 .07-.196l.001-.006c.015-.067.024-.143.024-.222v-.024c0-.308-.127-.587-.332-.786a1.097 1.097 0 0 0-.786-.331H7.52h.001h-.02c-.308 0-.587.127-.786.332c-.205.2-.332.478-.332.787v.021v-.001v.024c0 .305.125.581.326.78c.2.205.478.332.787.332h.021h-.001h.015a.858.858 0 0 0 .288-.049l-.006.002c.11-.041.2-.081.287-.125l-.015.007l1.162.925v3.035a.29.29 0 0 0 .06.178l-.001-.001a.42.42 0 0 0 .152.129l.002.001l2.419 1.28V15.1l-4.055-1.874l.071-1.47v-.024a.29.29 0 0 0-.06-.178l.001.001a.42.42 0 0 0-.152-.129l-.002-.001l-1.851-.97a.522.522 0 0 0 .024-.157v-.2a1.127 1.127 0 0 0-.366-.719l-.001-.001a1.093 1.093 0 0 0-.752-.299h-.018h.001h-.007c-.305 0-.58.127-.775.332c-.208.2-.338.481-.338.792v.015v-.001v.118c.029.285.164.534.366.71l.001.001c.193.177.451.285.735.285h.131a1.45 1.45 0 0 0 .33-.083l-.01.003c.104-.04.195-.092.275-.156l-.002.002l1.707.88l-.047 1.47v.008c0 .075.017.145.048.208l-.001-.003a.305.305 0 0 0 .164.142l.002.001l4.577 2.134v6.869q-.308 0-.605-.024l-.605-.047l.071-4.364a.349.349 0 0 0-.06-.191l.001.001a.364.364 0 0 0-.175-.142l-.002-.001l-2.87-1.328v-.125c0-.305-.127-.58-.332-.775a1.095 1.095 0 0 0-.787-.332H6.49h.001h-.114a1.082 1.082 0 0 0-.71.366l-.001.001a1.113 1.113 0 0 0-.285.746v.025v-.001v.007c0 .305.127.58.332.775c.195.205.47.332.775.332h.039c.156 0 .305-.033.439-.094l-.007.003c.14-.067.261-.147.369-.242l-.002.002l2.656 1.21v4.008a10.611 10.611 0 0 1-3.534-1.343l.048.027a10.85 10.85 0 0 1-2.773-2.354l-.014-.017a11.1 11.1 0 0 1-1.824-3.112l-.026-.076a10.267 10.267 0 0 1-.676-3.699v-.111c0-1.494.314-2.915.88-4.201l-.026.067a11.06 11.06 0 0 1 2.324-3.44A11.019 11.019 0 0 1 7.73 2.065l.071-.028a10.269 10.269 0 0 1 4.139-.856h.061h-.003h.064c1.494 0 2.915.314 4.201.88l-.067-.026a11.078 11.078 0 0 1 3.44 2.32a11 11 0 0 1 2.296 3.369l.028.071c.54 1.218.854 2.639.854 4.134v.067v-.003v.064c0 1.444-.292 2.82-.82 4.072l.026-.069a11.1 11.1 0 0 1-2.175 3.373l.005-.006a10.852 10.852 0 0 1-3.172 2.32l-.065.028c-1.16.568-2.516.932-3.948 1.009l-.026.001z"></path>
        </svg></div>
      <h1>Codemo</h1>
    </div>
    <ul class="nav-links">
      <li><a href="https://gigamaster.github.io/codemo/">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M3 9h18M9 21V9"/></g></svg>
        <span>Dashboard</span></a></li>
      <li><a href="https://gigamaster.github.io/codemo/elearning/">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"><rect width="8" height="18" x="3" y="3" rx="1"></rect><path d="M7 3v18m13.4-2.1c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z"></path></g></svg> 
        <span>Elearning</span></a></li>
      <li><a href="https://gigamaster.github.io/codemo/game/">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M2.008 15.81c.223-3.494.88-6.05 1.435-7.535c.281-.75.885-1.308 1.658-1.495c4.3-1.04 9.498-1.04 13.798 0c.773.187 1.377.745 1.658 1.495c.556 1.485 1.212 4.041 1.435 7.534c.133 2.09-1.377 3.241-3.05 4.083c-1.064.537-1.883-1.046-2.427-2.272a1.82 1.82 0 0 0-1.687-1.084H9.172c-.739 0-1.39.415-1.687 1.084c-.544 1.226-1.363 2.809-2.428 2.272c-1.655-.833-3.183-1.976-3.049-4.083M5 4.5L6.963 4M19 4.5L17 4m-8 9l-1.5-1.5m0 0L6 10m1.5 1.5L6 13m1.5-1.5L9 10m6.988 0h.01m1.99 3h.01" color="currentColor"></path></svg>
        Game</a></li>
      <li><a href="https://gigamaster.github.io/codemo/gen-ai/">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" color="currentColor"><path d="M4 12c0-3.771 0-5.657 1.172-6.828S8.229 4 12 4s5.657 0 6.828 1.172S20 8.229 20 12s0 5.657-1.172 6.828S15.771 20 12 20s-5.657 0-6.828-1.172S4 15.771 4 12"></path><path d="m7.5 15l1.842-5.526a.694.694 0 0 1 1.316 0L12.5 15m-4-2h3m4-4v6M8 2v2m8-2v2m-4-2v2M8 20v2m4-2v2m4-2v2m6-6h-2M4 8H2m2 8H2m2-4H2m20-4h-2m2 4h-2"></path></g></svg> 
        Generative AI</a></li>
      <li><a href="https://gigamaster.github.io/codemo/multimedia/">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M3 14V3h11v11zm1-1h9V4H4zm4-1.25L6.8 10.1L5.385 12h6.23L9.7 9.5zM16.502 21q-1.04 0-1.771-.728T14 18.502t.73-1.771T16.5 16q.448 0 .82.146t.68.413V11h3v1h-2v6.5q0 1.042-.728 1.77q-.729.73-1.77.73M4 13V4z"></path></svg>
        Multimedia</a></li>
      <li><a href="https://gigamaster.github.io/codemo/project/">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2m4 7h4m-4 5h4m-8-5h.01M8 16h.01"></path></g></svg>
        Project</a></li>
      <li><a href="https://gigamaster.github.io/codemo/web-app/">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"><path d="M3 21h4L20 8a1.5 1.5 0 0 0-4-4L3 17zM14.5 5.5l4 4"/><path d="M12 8L7 3L3 7l5 5M7 8L5.5 9.5M16 12l5 5l-4 4l-5-5m4 1l-1.5 1.5"/></g></svg> 
        Web Apps</a></li>
    </ul>
  </nav>
  <div class="menu">
    <div class="line"></div>
  </div>
  <main>
    <div class="main-col-1">
      <h2>Simple Secure Static HTML</h2>
    </div>
    <div class="main-col-2">

      <div class="box box-1">
        <div class="box-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M29 21.278V19a4 4 0 0 0-8 0v2.278A2 2 0 0 0 20 23v5a2.003 2.003 0 0 0 2 2h6a2.003 2.003 0 0 0 2-2v-5a2 2 0 0 0-1-1.722M25 17a2.003 2.003 0 0 1 2 2v2h-4v-2a2.003 2.003 0 0 1 2-2m-3 11v-5h6v5zM2 2h2v4H2zm12 0h2v4h-2zm4 0h2v4h-2zM2 8h2v8H2zm0 10h2v8H2zm12 0h2v8h-2zM6 8h2v8H6zm12 0h2v6h-2zm-8 18H8a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2m-2-6v4h2v-4zm6-4h-2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2m-2-6v4h2v-4zm-2-4H8a2 2 0 0 1-2-2V2h2v2h2V2h2v2a2 2 0 0 1-2 2"/></svg>
        </div>
        <div class="box-content">
          <p class="box-title">Simple AES-256 encryption</p>
          <p class="box-sub">Encrypt</p>
        </div>
      </div>

      <div class="box box-2">
        <div class="box-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="m23 2l-6 6l1.415 1.402L22 5.818V28H6V12H4v16a2.003 2.003 0 0 0 2 2h16a2.003 2.003 0 0 0 2-2V5.815l3.586 3.587L29 8Z"/><path fill="currentColor" d="M16 24h-4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2m-4-6v4h4v-4Z"/></svg>
        </div>
        <div class="box-content">
          <p class="box-title">Secure file on Public Storage</p>
          <p class="box-sub">Deploy</p>
        </div>
      </div>

      <div class="box box-3">
        <div class="box-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 32 32"><path fill="currentColor" d="M22.5 13c-4.7 0-8.5 3.8-8.5 8.5s3.8 8.5 8.5 8.5s8.5-3.8 8.5-8.5s-3.8-8.5-8.5-8.5m6.5 8h-3c0-2-.3-4-.9-5.5c2.1 1 3.7 3 3.9 5.5m-6.5 7c-.4-.2-1.3-1.8-1.5-5h2.9c-.2 3.2-1 4.8-1.4 5M21 21c.1-3.8 1.1-5.8 1.4-6c.4.2 1.4 2.2 1.5 6zm-1.1-5.5c-.6 1.5-.8 3.5-.9 5.5h-3c.2-2.5 1.8-4.5 3.9-5.5M16.2 23H19c.1 1.6.4 3.2.9 4.5c-1.8-.8-3.2-2.5-3.7-4.5m8.9 4.5q.75-1.95.9-4.5h2.9c-.6 2-2 3.7-3.8 4.5"/><path fill="currentColor" d="M25.8 10c-.9-4.6-5-8-9.8-8s-8.9 3.4-9.8 8.1c-3.5.7-6.2 3.7-6.2 7.4C0 21.6 3.4 25 7.5 25H11v-2H7.5c-3 0-5.5-2.5-5.5-5.5c0-2.9 2.2-5.3 5.1-5.5H8v-.9c.5-4 3.9-7.1 8-7.1c3.7 0 6.8 2.6 7.7 6z"/></svg>
        </div>
        <div class="box-content">
          <p class="box-title">Static file prompt for passphrase</p>
          <p class="box-sub">Decrypt</p>
        </div>
      </div>

    </div>
    <section class="main-col-3">
      <article class="content">
        <h3>Static HTML Encryption</h3>
        <form id="encrypt_form" autocomplete="__alt_auto">
          <p>
            <label for="passphrase">Passphrase with at least 14 characters in length</label>
            <input type="password" 
                   class="elform" 
                   id="passphrase"
                   placeholder="The longer and less predictable passphrase, the better" 
                   minlength="14" 
                   autocomplete="one-time password" 
                   required />
             <i id="togglePassphrase" class="icon-eye"></i>
          </p>
          <p>
            <div data-file="import_html">
              <label for="unencrypted_html">HTML String to encrypt</label>
              <textarea class="elform"
                        id="unencrypted_html"
                        placeholder="<html><head>..."
                        rows="5"></textarea>              
              <input type="file" 
                     id="importfile" 
                     hidden="" 
                     class="elform textarea-fileinput" 
                     accept="text/html" />
              <label for="importfile" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 9l5-5l5 5m-5-5v12"/></svg>                Choose File
              </label>
              <span id="fileMsg" class="add">Choose, paste, or drag and drop a file here.</span>
            </div>
          </p>
          <p>
            <label class="no-style">
              <input type="checkbox" id="remember" checked />
              Add "Remember me" checkbox<br>
              Logout with a query parameter append to the URL <code>?staticrypt_logout</code><br>
              <small>
                The password is stored in the browser's localStorage. Set the expiration time in "options", default: none.</small>
            </label>
          </p>
          <h3>Options</h3>
          <p>Through customization options, change form elements, message, and so forth.</p>
          <details>
            <summary>
              <span>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 0 0-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 0 0-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 0 0-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 0 0-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 0 0 1.066-2.573c-.94-1.543.826-3.31 2.37-2.37c1 .608 2.296.07 2.572-1.065"/><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0-6 0"/></g></svg> Customization options
              </span>
            </summary>
            <div id="extra-options">
              <p>
                <label for="title">Page title</label>
                <input type="text" class="elform" id="title" placeholder="Default: 'Protected Page'">
              </p>
              <p>
                <label for="instructions">Message to display in the passphrase prompt</label>
                <textarea class="elform" id="instructions" placeholder="Default: nothing."></textarea>
              </p>
              <p>
                <label for="title">Passphrase input placeholder</label>
                <input type="text" class="elform" id="passphrase_placeholder"
                        placeholder="Default: 'Passphrase'">
              </p>
              <p>
                <label for="title">"Remember me" checkbox label</label>
                <input type="text" class="elform" id="remember_me" placeholder="Default: 'Remember me'">
              </p>
              <p>
                <label for="title">"Remember me" expiration in days</label>
                <input type="number"
                        class="elform"
                        id="remember_in_days"
                        step="any"
                        placeholder="Default: 0 (no expiration)">
                <small>
                  Leave empty or set to 0 for no expiration.
                </small>
              </p>
              <p>
                <label for="title">Decrypt button label</label>
                <input type="text" class="elform" id="decrypt_button" placeholder="Default: 'DECRYPT'" autocomplete="__alt_auto">
              </p>
              <p>
                <label>
                  <input type="checkbox" id="embed-crypto" checked>
                  Embed the JavaScript into the encrypted file<br>
                  <small>
                  Check to include and decrypt it offline.<br>
                  Uncheck to load from GitHub and prevent Ad-blockers from blocking the script.
                  </small>
                </label>
              </p>
          </div>
          </details>
          <h3>Encrypt HTML</h3>
          <p>Generate file using AES-256 encryption</p>
          <button class="btn" type="submit">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 3a12 12 0 0 0 8.5 3A12 12 0 0 1 12 21A12 12 0 0 1 3.5 6A12 12 0 0 0 12 3"/></svg>
            Generate
          </button>
        </form>
        <h3>Download encrypted file</h3>
        <p>HTML page with passphrase prompt.</p>
        <p>
          <a class="download btn"
            download="encrypted.html"
            id="download-link"
            disabled="disabled">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5l5-5m-5-7v12"/></svg>
            Download</a>
        </p>
        <p>Encrypted string</p>
        <pre id="encrypted_html_display">Your encrypted string</pre>
      </article>
      <aside>
        <h5>1. Set Passphrase</h5>
        <p>Create unique and unpredictable passphrases following these rules:</p>
        <ul>
          <li>Avoid popular saying or song lyrics
          <li>Choose random and nonsense words
          <li>Add in symbols and letters
          <li>Store passphrases in a secure place e.g.:<br>Use an offline password storage device</p>
          </ul>
        <h5>2. Add HTML</h5>
        <p>Choose file to encrypt or paste HTML markup.<br> 
          Inline CSS, JS, and convert images to Data URI.</p>
        <h5>3. Customize Options</h5>
        <p>Form elements and in-context instructions.</p>
        <h5>4. Encrypt & Download</h5>
        <p>Generate a static encrypted page that can be decrypted in-browser.</p>
        <h5>5. Upload to Public Storage</h5>
        <p>The content is encrypted and can only be unlocked with the passphrase.
          Upload the generated page to a public storage serving static content e.g. Github.</p>
        <label class="about" for="modal-1" title="About">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0-18 0m9-3h.01"/><path d="M11 12h1v4h1"/></g></svg> 
          About
        </label>
      </aside>
    </section>
  </main>
</div>
<input class="modal-state" id="modal-1" type="checkbox" />
<div class="modal">
  <label class="modal__bg" for="modal-1"></label>
  <div class="modal__inner">
    <label class="modal__close" for="modal-1"></label>
    <h2>About</h2>
    <p>Codemo — Simple Secure Static is built on top of StatiCrypt by Robin Moisson, 
    distributed under the MIT license.</p>
    <hr> 
    <p>StatiCrypt uses AES-256 and WebCrypto to encrypt HTML with a passphrase.</p>
    <hr>
    <p><a href="https://gigamaster.github.io/codemo/" target="_blank">2024 Codemo</a> by Nuno Luciano @gigamaster</p>
    <p><a href="https://github.com/robinmoisson/staticrypt" target="_blank">StatiCrypt</a> (c) 2017 Robin Moisson</p>
  </div>
</div> 
<script src="crypto-js.min.js"></script>
<script src="https://xoopscube.github.io/ckeditor4/js/ckeditor.js"></script>
<script>
// Mobile menu
const nav = document.querySelector("#nav");
const btnMenu = document.querySelector(".menu");
btnMenu.addEventListener("click", () => {
  nav.classList.toggle("active");
});
// Toggle Pass
const togglePassphrase = document.querySelector("#togglePassphrase");
const password = document.querySelector("#passphrase");
togglePassphrase.addEventListener("click", function () {
  // toggle the type attribute
  const type = password.getAttribute("type") === "password" ? "text" : "password";
  password.setAttribute("type", type);
  // toggle the icon
  this.classList.toggle("icon-eye-off");
});
// import html
new ImportHTML("import_html");
// enable CKEditor
CKEDITOR.replace('instructions');
  var htmlToDownload;
  var renderTemplate = function (tpl, data) {
    return tpl.replace(/{(.*?)}/g, function (_, key) {
      if (data && data[key] !== undefined) {
          return data[key];
      }
      return '';
    });
  };
  /**
   * Fill the password prompt template with data provided.
   * @param data
   */
  var setFileToDownload = function (data) {
    var request = new XMLHttpRequest();
    request.open('GET', 'password_template.html', true);
    request.onload = function () {
      var renderedTmpl = renderTemplate(request.responseText, data);
      var downloadLink = document.querySelector('a.download');
      downloadLink.href = 'data:text/html,' + encodeURIComponent(renderedTmpl);
      downloadLink.removeAttribute('disabled');
      htmlToDownload = renderedTmpl;
    };
    request.send();
  };
  /**
   * Download crypto-js lib to embed it in the generated file, update the file when done.
   * @param data
   */
  var setFileToDownloadWithEmbeddedCrypto = function (data) {
      var request = new XMLHttpRequest();
      //request.open('GET', 'kryptojs-3.1.9-1-lib.js', true);
      request.open('GET', 'crypto-js.min.js', true);
      request.onload = function () {
          data['crypto_tag'] = '<script>' + request.responseText + '</scr' + 'ipt>';
          setFileToDownload(data);
      };
      request.send();
  };

  /**
   * Salt and encrypt a msg with a password.
   * Inspired by https://github.com/adonespitogo
   */
  function encrypt(msg, hashedPassphrase) {
      var iv = CryptoJS.lib.WordArray.random(128 / 8);
      var encrypted = CryptoJS.AES.encrypt(msg, hashedPassphrase, {
          iv: iv,
          padding: CryptoJS.pad.Pkcs7,
          mode: CryptoJS.mode.CBC
      });
      // iv will be hex 16 in length (32 characters)
      // we prepend it to the ciphertext for use in decryption
      return iv.toString() + encrypted.toString();
  }

  /**
   * Salt and hash the passphrase so it can be stored in localStorage without opening a password reuse vulnerability.
   *
   * @param {string} passphrase
   * @returns {{salt: string, hashedPassphrase: string}}
   */
  function hashPassphrase(passphrase) {
    var salt = CryptoJS.lib.WordArray.random(128 / 8).toString();
    var hashedPassphrase = CryptoJS.PBKDF2(passphrase, salt, {
        keySize: 256 / 32,
        iterations: 1000
    });
    return {
        salt: salt,
        hashedPassphrase: hashedPassphrase.toString(),
    };
  }
  /**
   * Handle form submission.
   */
  document.getElementById('encrypt_form').addEventListener('submit', function (e) {
    e.preventDefault();
    // update instruction textarea value with CKEDITOR content
    // (see https://stackoverflow.com/questions/3147670/ckeditor-update-textarea)
    CKEDITOR.instances['instructions'].updateElement();
    var unencrypted = document.getElementById('unencrypted_html').value,
        passphrase = document.getElementById('passphrase').value;
    var hashed = hashPassphrase(passphrase);
    var hashedPassphrase = hashed.hashedPassphrase,
        salt = hashed.salt;
    var encrypted = encrypt(unencrypted, hashedPassphrase),
        // we use the hashed passphrase in the HMAC because this is effectively what will be used a passphrase (so
        // we can store in localStorage safely
        hmac = CryptoJS.HmacSHA256(encrypted, CryptoJS.SHA256(hashedPassphrase).toString()).toString(),
        encryptedMsg = hmac + encrypted;
    var decryptButton = document.getElementById('decrypt_button').value,
        instructions = document.getElementById('instructions').value,
        isRememberEnabled = document.getElementById('remember').checked,
        pageTitle = document.getElementById('title').value.trim(),
        passphrasePlaceholder = document.getElementById('passphrase_placeholder').value.trim(),
        rememberDurationInDays = document.getElementById('remember_in_days').value || 0,
        rememberMe = document.getElementById('remember_me').value;
    var data = {
        crypto_tag: '<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js" integrity="sha512-a+SUDuwNzXDvz4XrIcXHuCf089/iJAoN4lmrXJg18XnduKK6YlDHNRalv4yd1N40OKI80tFidF+rqTFKGPoWFQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></scr' + 'ipt>',
        decrypt_button: decryptButton ? decryptButton : 'DECRYPT',
        encrypted: encryptedMsg,
        salt: salt,
        instructions: instructions ? instructions : '',
        is_remember_enabled: isRememberEnabled ? 'true' : 'false',
        passphrase_placeholder: passphrasePlaceholder ? passphrasePlaceholder : 'Passphrase',
        remember_duration_in_days: rememberDurationInDays.toString(),
        remember_me: rememberMe ? rememberMe : 'Remember me',
        title: pageTitle ? pageTitle : 'Protected Page',
    };

    document.getElementById('encrypted_html_display').textContent = encrypted;

    if (document.getElementById("embed-crypto").checked) {
        setFileToDownloadWithEmbeddedCrypto(data);
    } else {
        setFileToDownload(data);
    }
  });

/**
 * Browser specific download code.
 */
document.getElementById('download-link')
.addEventListener('click', function (e) {
  var isIE = (navigator.userAgent.indexOf("MSIE") !== -1) || (!!document.documentMode === true); // >= 10
  var isEdge = navigator.userAgent.indexOf("Edge") !== -1;
  // download with MS specific feature
  if (htmlToDownload && (isIE || isEdge)) {
    e.preventDefault();
    var blobObject = new Blob([htmlToDownload]);
    window.navigator.msSaveOrOpenBlob(blobObject, 'encrypted.html');
  }
  return true;
})
</script>
</body>
</html>
