var Xl=Object.defineProperty;var Zl=(e,t,n)=>t in e?Xl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ql=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var en=(e,t,n)=>(Zl(e,typeof t!="symbol"?t+"":t,n),n);var em=Ql((nm,vr)=>{const Jl=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};Jl();function Ji(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const eu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tu=Ji(eu);function fa(e){return!!e||e===""}function je(e){if(ae(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=Oe(r)?iu(r):je(r);if(i)for(const o in i)t[o]=i[o]}return t}else{if(Oe(e))return e;if(ze(e))return e}}const nu=/;(?![^(]*\))/g,ru=/:(.+)/;function iu(e){const t={};return e.split(nu).forEach(n=>{if(n){const r=n.split(ru);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Qt(e){let t="";if(Oe(e))t=e;else if(ae(e))for(let n=0;n<e.length;n++){const r=Qt(e[n]);r&&(t+=r+" ")}else if(ze(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Ot=e=>Oe(e)?e:e==null?"":ae(e)||ze(e)&&(e.toString===pa||!ce(e.toString))?JSON.stringify(e,ca,2):String(e),ca=(e,t)=>t&&t.__v_isRef?ca(e,t.value):un(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:da(t)?{[`Set(${t.size})`]:[...t.values()]}:ze(t)&&!ae(t)&&!va(t)?String(t):t,_e={},ln=[],gt=()=>{},ou=()=>!1,su=/^on[^a-z]/,Lr=e=>su.test(e),eo=e=>e.startsWith("onUpdate:"),We=Object.assign,to=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},au=Object.prototype.hasOwnProperty,ge=(e,t)=>au.call(e,t),ae=Array.isArray,un=e=>kr(e)==="[object Map]",da=e=>kr(e)==="[object Set]",ce=e=>typeof e=="function",Oe=e=>typeof e=="string",no=e=>typeof e=="symbol",ze=e=>e!==null&&typeof e=="object",ha=e=>ze(e)&&ce(e.then)&&ce(e.catch),pa=Object.prototype.toString,kr=e=>pa.call(e),lu=e=>kr(e).slice(8,-1),va=e=>kr(e)==="[object Object]",ro=e=>Oe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,lr=Ji(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Rr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},uu=/-(\w)/g,Et=Rr(e=>e.replace(uu,(t,n)=>n?n.toUpperCase():"")),fu=/\B([A-Z])/g,mn=Rr(e=>e.replace(fu,"-$1").toLowerCase()),Br=Rr(e=>e.charAt(0).toUpperCase()+e.slice(1)),ei=Rr(e=>e?`on${Br(e)}`:""),gr=(e,t)=>!Object.is(e,t),ur=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},mr=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},_i=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Vo;const cu=()=>Vo||(Vo=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let bt;class du{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&bt&&(this.parent=bt,this.index=(bt.scopes||(bt.scopes=[])).push(this)-1)}run(t){if(this.active){const n=bt;try{return bt=this,t()}finally{bt=n}}}on(){bt=this}off(){bt=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function hu(e,t=bt){t&&t.active&&t.effects.push(e)}const io=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ga=e=>(e.w&Ut)>0,ma=e=>(e.n&Ut)>0,pu=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ut},vu=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];ga(i)&&!ma(i)?i.delete(e):t[n++]=i,i.w&=~Ut,i.n&=~Ut}t.length=n}},Ei=new WeakMap;let _n=0,Ut=1;const Ci=30;let ht;const Xt=Symbol(""),Ai=Symbol("");class oo{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,hu(this,r)}run(){if(!this.active)return this.fn();let t=ht,n=Nt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ht,ht=this,Nt=!0,Ut=1<<++_n,_n<=Ci?pu(this):Uo(this),this.fn()}finally{_n<=Ci&&vu(this),Ut=1<<--_n,ht=this.parent,Nt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ht===this?this.deferStop=!0:this.active&&(Uo(this),this.onStop&&this.onStop(),this.active=!1)}}function Uo(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Nt=!0;const ya=[];function yn(){ya.push(Nt),Nt=!1}function wn(){const e=ya.pop();Nt=e===void 0?!0:e}function nt(e,t,n){if(Nt&&ht){let r=Ei.get(e);r||Ei.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=io()),wa(i)}}function wa(e,t){let n=!1;_n<=Ci?ma(e)||(e.n|=Ut,n=!ga(e)):n=!e.has(ht),n&&(e.add(ht),ht.deps.push(e))}function Lt(e,t,n,r,i,o){const s=Ei.get(e);if(!s)return;let a=[];if(t==="clear")a=[...s.values()];else if(n==="length"&&ae(e))s.forEach((l,u)=>{(u==="length"||u>=r)&&a.push(l)});else switch(n!==void 0&&a.push(s.get(n)),t){case"add":ae(e)?ro(n)&&a.push(s.get("length")):(a.push(s.get(Xt)),un(e)&&a.push(s.get(Ai)));break;case"delete":ae(e)||(a.push(s.get(Xt)),un(e)&&a.push(s.get(Ai)));break;case"set":un(e)&&a.push(s.get(Xt));break}if(a.length===1)a[0]&&Ti(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);Ti(io(l))}}function Ti(e,t){const n=ae(e)?e:[...e];for(const r of n)r.computed&&zo(r);for(const r of n)r.computed||zo(r)}function zo(e,t){(e!==ht||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const gu=Ji("__proto__,__v_isRef,__isVue"),ba=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(no)),mu=so(),yu=so(!1,!0),wu=so(!0),Ho=bu();function bu(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=xe(this);for(let o=0,s=this.length;o<s;o++)nt(r,"get",o+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(xe)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){yn();const r=xe(this)[t].apply(this,n);return wn(),r}}),e}function so(e=!1,t=!1){return function(r,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Du:Aa:t?Ca:Ea).get(r))return r;const s=ae(r);if(!e&&s&&ge(Ho,i))return Reflect.get(Ho,i,o);const a=Reflect.get(r,i,o);return(no(i)?ba.has(i):gu(i))||(e||nt(r,"get",i),t)?a:Ye(a)?s&&ro(i)?a:a.value:ze(a)?e?Ta(a):uo(a):a}}const xu=xa(),_u=xa(!0);function xa(e=!1){return function(n,r,i,o){let s=n[r];if(kn(s)&&Ye(s)&&!Ye(i))return!1;if(!e&&!kn(i)&&(Si(i)||(i=xe(i),s=xe(s)),!ae(n)&&Ye(s)&&!Ye(i)))return s.value=i,!0;const a=ae(n)&&ro(r)?Number(r)<n.length:ge(n,r),l=Reflect.set(n,r,i,o);return n===xe(o)&&(a?gr(i,s)&&Lt(n,"set",r,i):Lt(n,"add",r,i)),l}}function Eu(e,t){const n=ge(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Lt(e,"delete",t,void 0),r}function Cu(e,t){const n=Reflect.has(e,t);return(!no(t)||!ba.has(t))&&nt(e,"has",t),n}function Au(e){return nt(e,"iterate",ae(e)?"length":Xt),Reflect.ownKeys(e)}const _a={get:mu,set:xu,deleteProperty:Eu,has:Cu,ownKeys:Au},Tu={get:wu,set(e,t){return!0},deleteProperty(e,t){return!0}},Su=We({},_a,{get:yu,set:_u}),ao=e=>e,Ir=e=>Reflect.getPrototypeOf(e);function Wn(e,t,n=!1,r=!1){e=e.__v_raw;const i=xe(e),o=xe(t);n||(t!==o&&nt(i,"get",t),nt(i,"get",o));const{has:s}=Ir(i),a=r?ao:n?ho:co;if(s.call(i,t))return a(e.get(t));if(s.call(i,o))return a(e.get(o));e!==i&&e.get(t)}function qn(e,t=!1){const n=this.__v_raw,r=xe(n),i=xe(e);return t||(e!==i&&nt(r,"has",e),nt(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function Gn(e,t=!1){return e=e.__v_raw,!t&&nt(xe(e),"iterate",Xt),Reflect.get(e,"size",e)}function $o(e){e=xe(e);const t=xe(this);return Ir(t).has.call(t,e)||(t.add(e),Lt(t,"add",e,e)),this}function jo(e,t){t=xe(t);const n=xe(this),{has:r,get:i}=Ir(n);let o=r.call(n,e);o||(e=xe(e),o=r.call(n,e));const s=i.call(n,e);return n.set(e,t),o?gr(t,s)&&Lt(n,"set",e,t):Lt(n,"add",e,t),this}function Wo(e){const t=xe(this),{has:n,get:r}=Ir(t);let i=n.call(t,e);i||(e=xe(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&Lt(t,"delete",e,void 0),o}function qo(){const e=xe(this),t=e.size!==0,n=e.clear();return t&&Lt(e,"clear",void 0,void 0),n}function Yn(e,t){return function(r,i){const o=this,s=o.__v_raw,a=xe(s),l=t?ao:e?ho:co;return!e&&nt(a,"iterate",Xt),s.forEach((u,f)=>r.call(i,l(u),l(f),o))}}function Kn(e,t,n){return function(...r){const i=this.__v_raw,o=xe(i),s=un(o),a=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,u=i[e](...r),f=n?ao:t?ho:co;return!t&&nt(o,"iterate",l?Ai:Xt),{next(){const{value:d,done:h}=u.next();return h?{value:d,done:h}:{value:a?[f(d[0]),f(d[1])]:f(d),done:h}},[Symbol.iterator](){return this}}}}function Rt(e){return function(...t){return e==="delete"?!1:this}}function Mu(){const e={get(o){return Wn(this,o)},get size(){return Gn(this)},has:qn,add:$o,set:jo,delete:Wo,clear:qo,forEach:Yn(!1,!1)},t={get(o){return Wn(this,o,!1,!0)},get size(){return Gn(this)},has:qn,add:$o,set:jo,delete:Wo,clear:qo,forEach:Yn(!1,!0)},n={get(o){return Wn(this,o,!0)},get size(){return Gn(this,!0)},has(o){return qn.call(this,o,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:Yn(!0,!1)},r={get(o){return Wn(this,o,!0,!0)},get size(){return Gn(this,!0)},has(o){return qn.call(this,o,!0)},add:Rt("add"),set:Rt("set"),delete:Rt("delete"),clear:Rt("clear"),forEach:Yn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Kn(o,!1,!1),n[o]=Kn(o,!0,!1),t[o]=Kn(o,!1,!0),r[o]=Kn(o,!0,!0)}),[e,n,t,r]}const[Pu,Fu,Lu,ku]=Mu();function lo(e,t){const n=t?e?ku:Lu:e?Fu:Pu;return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(ge(n,i)&&i in r?n:r,i,o)}const Ru={get:lo(!1,!1)},Bu={get:lo(!1,!0)},Iu={get:lo(!0,!1)},Ea=new WeakMap,Ca=new WeakMap,Aa=new WeakMap,Du=new WeakMap;function Ou(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nu(e){return e.__v_skip||!Object.isExtensible(e)?0:Ou(lu(e))}function uo(e){return kn(e)?e:fo(e,!1,_a,Ru,Ea)}function Vu(e){return fo(e,!1,Su,Bu,Ca)}function Ta(e){return fo(e,!0,Tu,Iu,Aa)}function fo(e,t,n,r,i){if(!ze(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=Nu(e);if(s===0)return e;const a=new Proxy(e,s===2?r:n);return i.set(e,a),a}function fn(e){return kn(e)?fn(e.__v_raw):!!(e&&e.__v_isReactive)}function kn(e){return!!(e&&e.__v_isReadonly)}function Si(e){return!!(e&&e.__v_isShallow)}function Sa(e){return fn(e)||kn(e)}function xe(e){const t=e&&e.__v_raw;return t?xe(t):e}function Ma(e){return mr(e,"__v_skip",!0),e}const co=e=>ze(e)?uo(e):e,ho=e=>ze(e)?Ta(e):e;function Uu(e){Nt&&ht&&(e=xe(e),wa(e.dep||(e.dep=io())))}function zu(e,t){e=xe(e),e.dep&&Ti(e.dep)}function Ye(e){return!!(e&&e.__v_isRef===!0)}function Hu(e){return Ye(e)?e.value:e}const $u={get:(e,t,n)=>Hu(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return Ye(i)&&!Ye(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Pa(e){return fn(e)?e:new Proxy(e,$u)}class ju{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new oo(t,()=>{this._dirty||(this._dirty=!0,zu(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=xe(this);return Uu(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Wu(e,t,n=!1){let r,i;const o=ce(e);return o?(r=e,i=gt):(r=e.get,i=e.set),new ju(r,i,o||!i,n)}function Vt(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){Dr(o,t,n)}return i}function st(e,t,n,r){if(ce(e)){const o=Vt(e,t,n,r);return o&&ha(o)&&o.catch(s=>{Dr(s,t,n)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(st(e[o],t,n,r));return i}function Dr(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const s=t.proxy,a=n;for(;o;){const u=o.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](e,s,a)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Vt(l,null,10,[e,s,a]);return}}qu(e,n,i,r)}function qu(e,t,n,r=!0){console.error(e)}let yr=!1,Mi=!1;const tt=[];let Mt=0;const Sn=[];let En=null,rn=0;const Mn=[];let Bt=null,on=0;const Fa=Promise.resolve();let po=null,Pi=null;function Gu(e){const t=po||Fa;return e?t.then(this?e.bind(this):e):t}function Yu(e){let t=Mt+1,n=tt.length;for(;t<n;){const r=t+n>>>1;Rn(tt[r])<e?t=r+1:n=r}return t}function La(e){(!tt.length||!tt.includes(e,yr&&e.allowRecurse?Mt+1:Mt))&&e!==Pi&&(e.id==null?tt.push(e):tt.splice(Yu(e.id),0,e),ka())}function ka(){!yr&&!Mi&&(Mi=!0,po=Fa.then(Ia))}function Ku(e){const t=tt.indexOf(e);t>Mt&&tt.splice(t,1)}function Ra(e,t,n,r){ae(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?r+1:r))&&n.push(e),ka()}function Xu(e){Ra(e,En,Sn,rn)}function Zu(e){Ra(e,Bt,Mn,on)}function Or(e,t=null){if(Sn.length){for(Pi=t,En=[...new Set(Sn)],Sn.length=0,rn=0;rn<En.length;rn++)En[rn]();En=null,rn=0,Pi=null,Or(e,t)}}function Ba(e){if(Or(),Mn.length){const t=[...new Set(Mn)];if(Mn.length=0,Bt){Bt.push(...t);return}for(Bt=t,Bt.sort((n,r)=>Rn(n)-Rn(r)),on=0;on<Bt.length;on++)Bt[on]();Bt=null,on=0}}const Rn=e=>e.id==null?1/0:e.id;function Ia(e){Mi=!1,yr=!0,Or(e),tt.sort((n,r)=>Rn(n)-Rn(r));const t=gt;try{for(Mt=0;Mt<tt.length;Mt++){const n=tt[Mt];n&&n.active!==!1&&Vt(n,null,14)}}finally{Mt=0,tt.length=0,Ba(),yr=!1,po=null,(tt.length||Sn.length||Mn.length)&&Ia(e)}}function Qu(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||_e;let i=n;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in r){const f=`${s==="modelValue"?"model":s}Modifiers`,{number:d,trim:h}=r[f]||_e;h&&(i=n.map(g=>g.trim())),d&&(i=n.map(_i))}let a,l=r[a=ei(t)]||r[a=ei(Et(t))];!l&&o&&(l=r[a=ei(mn(t))]),l&&st(l,e,6,i);const u=r[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,st(u,e,6,i)}}function Da(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let s={},a=!1;if(!ce(e)){const l=u=>{const f=Da(u,t,!0);f&&(a=!0,We(s,f))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(r.set(e,null),null):(ae(o)?o.forEach(l=>s[l]=null):We(s,o),r.set(e,s),s)}function Nr(e,t){return!e||!Lr(t)?!1:(t=t.slice(2).replace(/Once$/,""),ge(e,t[0].toLowerCase()+t.slice(1))||ge(e,mn(t))||ge(e,t))}let ot=null,Vr=null;function wr(e){const t=ot;return ot=e,Vr=e&&e.type.__scopeId||null,t}function Ju(e){Vr=e}function ef(){Vr=null}function tf(e,t=ot,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&rs(-1);const o=wr(t),s=e(...i);return wr(o),r._d&&rs(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function ti(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:l,emit:u,render:f,renderCache:d,data:h,setupState:g,ctx:y,inheritAttrs:w}=e;let b,S;const C=wr(e);try{if(n.shapeFlag&4){const E=i||r;b=xt(f.call(E,E,d,o,g,h,y)),S=l}else{const E=t;b=xt(E.length>1?E(o,{attrs:l,slots:a,emit:u}):E(o,null)),S=t.props?l:nf(l)}}catch(E){Pn.length=0,Dr(E,e,1),b=Se(mt)}let A=b;if(S&&w!==!1){const E=Object.keys(S),{shapeFlag:T}=A;E.length&&T&7&&(s&&E.some(eo)&&(S=rf(S,s)),A=zt(A,S))}return n.dirs&&(A=zt(A),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&(A.transition=n.transition),b=A,wr(C),b}const nf=e=>{let t;for(const n in e)(n==="class"||n==="style"||Lr(n))&&((t||(t={}))[n]=e[n]);return t},rf=(e,t)=>{const n={};for(const r in e)(!eo(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function of(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:a,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Go(r,s,u):!!s;if(l&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const h=f[d];if(s[h]!==r[h]&&!Nr(u,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?Go(r,s,u):!0:!!s;return!1}function Go(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!Nr(n,o))return!0}return!1}function sf({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const af=e=>e.__isSuspense;function lf(e,t){t&&t.pendingBranch?ae(e)?t.effects.push(...e):t.effects.push(e):Zu(e)}function uf(e,t){if(Ue){let n=Ue.provides;const r=Ue.parent&&Ue.parent.provides;r===n&&(n=Ue.provides=Object.create(r)),n[e]=t}}function ni(e,t,n=!1){const r=Ue||ot;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&ce(t)?t.call(r.proxy):t}}const Yo={};function ri(e,t,n){return Oa(e,t,n)}function Oa(e,t,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=_e){const a=Ue;let l,u=!1,f=!1;if(Ye(e)?(l=()=>e.value,u=Si(e)):fn(e)?(l=()=>e,r=!0):ae(e)?(f=!0,u=e.some(S=>fn(S)||Si(S)),l=()=>e.map(S=>{if(Ye(S))return S.value;if(fn(S))return Kt(S);if(ce(S))return Vt(S,a,2)})):ce(e)?t?l=()=>Vt(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),st(e,a,3,[h])}:l=gt,t&&r){const S=l;l=()=>Kt(S())}let d,h=S=>{d=b.onStop=()=>{Vt(S,a,4)}};if(Dn)return h=gt,t?n&&st(t,a,3,[l(),f?[]:void 0,h]):l(),gt;let g=f?[]:Yo;const y=()=>{if(!!b.active)if(t){const S=b.run();(r||u||(f?S.some((C,A)=>gr(C,g[A])):gr(S,g)))&&(d&&d(),st(t,a,3,[S,g===Yo?void 0:g,h]),g=S)}else b.run()};y.allowRecurse=!!t;let w;i==="sync"?w=y:i==="post"?w=()=>Xe(y,a&&a.suspense):w=()=>Xu(y);const b=new oo(l,w);return t?n?y():g=b.run():i==="post"?Xe(b.run.bind(b),a&&a.suspense):b.run(),()=>{b.stop(),a&&a.scope&&to(a.scope.effects,b)}}function ff(e,t,n){const r=this.proxy,i=Oe(e)?e.includes(".")?Na(r,e):()=>r[e]:e.bind(r,r);let o;ce(t)?o=t:(o=t.handler,n=t);const s=Ue;cn(this);const a=Oa(i,o.bind(r),n);return s?cn(s):Zt(),a}function Na(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Kt(e,t){if(!ze(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ye(e))Kt(e.value,t);else if(ae(e))for(let n=0;n<e.length;n++)Kt(e[n],t);else if(da(e)||un(e))e.forEach(n=>{Kt(n,t)});else if(va(e))for(const n in e)Kt(e[n],t);return e}function cf(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ha(()=>{e.isMounted=!0}),$a(()=>{e.isUnmounting=!0}),e}const it=[Function,Array],df={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:it,onEnter:it,onAfterEnter:it,onEnterCancelled:it,onBeforeLeave:it,onLeave:it,onAfterLeave:it,onLeaveCancelled:it,onBeforeAppear:it,onAppear:it,onAfterAppear:it,onAppearCancelled:it},setup(e,{slots:t}){const n=Zf(),r=cf();let i;return()=>{const o=t.default&&Ua(t.default(),!0);if(!o||!o.length)return;let s=o[0];if(o.length>1){for(const w of o)if(w.type!==mt){s=w;break}}const a=xe(e),{mode:l}=a;if(r.isLeaving)return ii(s);const u=Ko(s);if(!u)return ii(s);const f=Fi(u,a,r,n);Li(u,f);const d=n.subTree,h=d&&Ko(d);let g=!1;const{getTransitionKey:y}=u.type;if(y){const w=y();i===void 0?i=w:w!==i&&(i=w,g=!0)}if(h&&h.type!==mt&&(!Gt(u,h)||g)){const w=Fi(h,a,r,n);if(Li(h,w),l==="out-in")return r.isLeaving=!0,w.afterLeave=()=>{r.isLeaving=!1,n.update()},ii(s);l==="in-out"&&u.type!==mt&&(w.delayLeave=(b,S,C)=>{const A=Va(r,h);A[String(h.key)]=h,b._leaveCb=()=>{S(),b._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=C})}return s}}},hf=df;function Va(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Fi(e,t,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:d,onLeave:h,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:w,onAppear:b,onAfterAppear:S,onAppearCancelled:C}=t,A=String(e.key),E=Va(n,e),T=(P,L)=>{P&&st(P,r,9,L)},m=(P,L)=>{const B=L[1];T(P,L),ae(P)?P.every(R=>R.length<=1)&&B():P.length<=1&&B()},x={mode:o,persisted:s,beforeEnter(P){let L=a;if(!n.isMounted)if(i)L=w||a;else return;P._leaveCb&&P._leaveCb(!0);const B=E[A];B&&Gt(e,B)&&B.el._leaveCb&&B.el._leaveCb(),T(L,[P])},enter(P){let L=l,B=u,R=f;if(!n.isMounted)if(i)L=b||l,B=S||u,R=C||f;else return;let j=!1;const H=P._enterCb=W=>{j||(j=!0,W?T(R,[P]):T(B,[P]),x.delayedLeave&&x.delayedLeave(),P._enterCb=void 0)};L?m(L,[P,H]):H()},leave(P,L){const B=String(e.key);if(P._enterCb&&P._enterCb(!0),n.isUnmounting)return L();T(d,[P]);let R=!1;const j=P._leaveCb=H=>{R||(R=!0,L(),H?T(y,[P]):T(g,[P]),P._leaveCb=void 0,E[B]===e&&delete E[B])};E[B]=e,h?m(h,[P,j]):j()},clone(P){return Fi(P,t,n,r)}};return x}function ii(e){if(Ur(e))return e=zt(e),e.children=null,e}function Ko(e){return Ur(e)?e.children?e.children[0]:void 0:e}function Li(e,t){e.shapeFlag&6&&e.component?Li(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ua(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let s=e[o];const a=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===Ge?(s.patchFlag&128&&i++,r=r.concat(Ua(s.children,t,a))):(t||s.type!==mt)&&r.push(a!=null?zt(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}const fr=e=>!!e.type.__asyncLoader,Ur=e=>e.type.__isKeepAlive;function pf(e,t){za(e,"a",t)}function vf(e,t){za(e,"da",t)}function za(e,t,n=Ue){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(zr(t,r,n),n){let i=n.parent;for(;i&&i.parent;)Ur(i.parent.vnode)&&gf(r,t,n,i),i=i.parent}}function gf(e,t,n,r){const i=zr(t,e,r,!0);ja(()=>{to(r[t],i)},n)}function zr(e,t,n=Ue,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;yn(),cn(n);const a=st(t,n,e,s);return Zt(),wn(),a});return r?i.unshift(o):i.push(o),o}}const kt=e=>(t,n=Ue)=>(!Dn||e==="sp")&&zr(e,t,n),mf=kt("bm"),Ha=kt("m"),yf=kt("bu"),wf=kt("u"),$a=kt("bum"),ja=kt("um"),bf=kt("sp"),xf=kt("rtg"),_f=kt("rtc");function Ef(e,t=Ue){zr("ec",e,t)}function Bn(e,t){const n=ot;if(n===null)return e;const r=$r(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,a,l,u=_e]=t[o];ce(s)&&(s={mounted:s,updated:s}),s.deep&&Kt(a),i.push({dir:s,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function jt(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let l=a.dir[r];l&&(yn(),st(l,n,8,[e.el,a,e,t]),wn())}}const vo="components",Cf="directives";function pt(e,t){return go(vo,e,!0,t)||e}const Wa=Symbol();function Af(e){return Oe(e)?go(vo,e,!1)||e:e||Wa}function qa(e){return go(Cf,e)}function go(e,t,n=!0,r=!1){const i=ot||Ue;if(i){const o=i.type;if(e===vo){const a=nc(o,!1);if(a&&(a===t||a===Et(t)||a===Br(Et(t))))return o}const s=Xo(i[e]||o[e],t)||Xo(i.appContext[e],t);return!s&&r?o:s}}function Xo(e,t){return e&&(e[t]||e[Et(t)]||e[Br(Et(t))])}function mo(e,t,n,r){let i;const o=n&&n[r];if(ae(e)||Oe(e)){i=new Array(e.length);for(let s=0,a=e.length;s<a;s++)i[s]=t(e[s],s,void 0,o&&o[s])}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,o&&o[s])}else if(ze(e))if(e[Symbol.iterator])i=Array.from(e,(s,a)=>t(s,a,void 0,o&&o[a]));else{const s=Object.keys(e);i=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const u=s[a];i[a]=t(e[u],u,a,o&&o[a])}}else i=[];return n&&(n[r]=i),i}const ki=e=>e?il(e)?$r(e)||e.proxy:ki(e.parent):null,br=We(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ki(e.parent),$root:e=>ki(e.root),$emit:e=>e.emit,$options:e=>Ya(e),$forceUpdate:e=>e.f||(e.f=()=>La(e.update)),$nextTick:e=>e.n||(e.n=Gu.bind(e.proxy)),$watch:e=>ff.bind(e)}),Tf={get({_:e},t){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const g=s[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(r!==_e&&ge(r,t))return s[t]=1,r[t];if(i!==_e&&ge(i,t))return s[t]=2,i[t];if((u=e.propsOptions[0])&&ge(u,t))return s[t]=3,o[t];if(n!==_e&&ge(n,t))return s[t]=4,n[t];Ri&&(s[t]=0)}}const f=br[t];let d,h;if(f)return t==="$attrs"&&nt(e,"get",t),f(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==_e&&ge(n,t))return s[t]=4,n[t];if(h=l.config.globalProperties,ge(h,t))return h[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return i!==_e&&ge(i,t)?(i[t]=n,!0):r!==_e&&ge(r,t)?(r[t]=n,!0):ge(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return!!n[s]||e!==_e&&ge(e,s)||t!==_e&&ge(t,s)||(a=o[0])&&ge(a,s)||ge(r,s)||ge(br,s)||ge(i.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ge(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Ri=!0;function Sf(e){const t=Ya(e),n=e.proxy,r=e.ctx;Ri=!1,t.beforeCreate&&Zo(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:a,provide:l,inject:u,created:f,beforeMount:d,mounted:h,beforeUpdate:g,updated:y,activated:w,deactivated:b,beforeDestroy:S,beforeUnmount:C,destroyed:A,unmounted:E,render:T,renderTracked:m,renderTriggered:x,errorCaptured:P,serverPrefetch:L,expose:B,inheritAttrs:R,components:j,directives:H,filters:W}=t;if(u&&Mf(u,r,null,e.appContext.config.unwrapInjectedRef),s)for(const q in s){const Z=s[q];ce(Z)&&(r[q]=Z.bind(n))}if(i){const q=i.call(n,n);ze(q)&&(e.data=uo(q))}if(Ri=!0,o)for(const q in o){const Z=o[q],z=ce(Z)?Z.bind(n,n):ce(Z.get)?Z.get.bind(n,n):gt,V=!ce(Z)&&ce(Z.set)?Z.set.bind(n):gt,Y=ic({get:z,set:V});Object.defineProperty(r,q,{enumerable:!0,configurable:!0,get:()=>Y.value,set:X=>Y.value=X})}if(a)for(const q in a)Ga(a[q],r,n,q);if(l){const q=ce(l)?l.call(n):l;Reflect.ownKeys(q).forEach(Z=>{uf(Z,q[Z])})}f&&Zo(f,e,"c");function $(q,Z){ae(Z)?Z.forEach(z=>q(z.bind(n))):Z&&q(Z.bind(n))}if($(mf,d),$(Ha,h),$(yf,g),$(wf,y),$(pf,w),$(vf,b),$(Ef,P),$(_f,m),$(xf,x),$($a,C),$(ja,E),$(bf,L),ae(B))if(B.length){const q=e.exposed||(e.exposed={});B.forEach(Z=>{Object.defineProperty(q,Z,{get:()=>n[Z],set:z=>n[Z]=z})})}else e.exposed||(e.exposed={});T&&e.render===gt&&(e.render=T),R!=null&&(e.inheritAttrs=R),j&&(e.components=j),H&&(e.directives=H)}function Mf(e,t,n=gt,r=!1){ae(e)&&(e=Bi(e));for(const i in e){const o=e[i];let s;ze(o)?"default"in o?s=ni(o.from||i,o.default,!0):s=ni(o.from||i):s=ni(o),Ye(s)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[i]=s}}function Zo(e,t,n){st(ae(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ga(e,t,n,r){const i=r.includes(".")?Na(n,r):()=>n[r];if(Oe(e)){const o=t[e];ce(o)&&ri(i,o)}else if(ce(e))ri(i,e.bind(n));else if(ze(e))if(ae(e))e.forEach(o=>Ga(o,t,n,r));else{const o=ce(e.handler)?e.handler.bind(n):t[e.handler];ce(o)&&ri(i,o,e)}}function Ya(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,a=o.get(t);let l;return a?l=a:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(u=>xr(l,u,s,!0)),xr(l,t,s)),o.set(t,l),l}function xr(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&xr(e,o,n,!0),i&&i.forEach(s=>xr(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const a=Pf[s]||n&&n[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const Pf={data:Qo,props:qt,emits:qt,methods:qt,computed:qt,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:qt,directives:qt,watch:Lf,provide:Qo,inject:Ff};function Qo(e,t){return t?e?function(){return We(ce(e)?e.call(this,this):e,ce(t)?t.call(this,this):t)}:t:e}function Ff(e,t){return qt(Bi(e),Bi(t))}function Bi(e){if(ae(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function qe(e,t){return e?[...new Set([].concat(e,t))]:t}function qt(e,t){return e?We(We(Object.create(null),e),t):t}function Lf(e,t){if(!e)return t;if(!t)return e;const n=We(Object.create(null),e);for(const r in t)n[r]=qe(e[r],t[r]);return n}function kf(e,t,n,r=!1){const i={},o={};mr(o,Hr,1),e.propsDefaults=Object.create(null),Ka(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);n?e.props=r?i:Vu(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Rf(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,a=xe(i),[l]=e.propsOptions;let u=!1;if((r||s>0)&&!(s&16)){if(s&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let h=f[d];if(Nr(e.emitsOptions,h))continue;const g=t[h];if(l)if(ge(o,h))g!==o[h]&&(o[h]=g,u=!0);else{const y=Et(h);i[y]=Ii(l,a,y,g,e,!1)}else g!==o[h]&&(o[h]=g,u=!0)}}}else{Ka(e,t,i,o)&&(u=!0);let f;for(const d in a)(!t||!ge(t,d)&&((f=mn(d))===d||!ge(t,f)))&&(l?n&&(n[d]!==void 0||n[f]!==void 0)&&(i[d]=Ii(l,a,d,void 0,e,!0)):delete i[d]);if(o!==a)for(const d in o)(!t||!ge(t,d)&&!0)&&(delete o[d],u=!0)}u&&Lt(e,"set","$attrs")}function Ka(e,t,n,r){const[i,o]=e.propsOptions;let s=!1,a;if(t)for(let l in t){if(lr(l))continue;const u=t[l];let f;i&&ge(i,f=Et(l))?!o||!o.includes(f)?n[f]=u:(a||(a={}))[f]=u:Nr(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,s=!0)}if(o){const l=xe(n),u=a||_e;for(let f=0;f<o.length;f++){const d=o[f];n[d]=Ii(i,l,d,u[d],e,!ge(u,d))}}return s}function Ii(e,t,n,r,i,o){const s=e[n];if(s!=null){const a=ge(s,"default");if(a&&r===void 0){const l=s.default;if(s.type!==Function&&ce(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(cn(i),r=u[n]=l.call(null,t),Zt())}else r=l}s[0]&&(o&&!a?r=!1:s[1]&&(r===""||r===mn(n))&&(r=!0))}return r}function Xa(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,s={},a=[];let l=!1;if(!ce(e)){const f=d=>{l=!0;const[h,g]=Xa(d,t,!0);We(s,h),g&&a.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!o&&!l)return r.set(e,ln),ln;if(ae(o))for(let f=0;f<o.length;f++){const d=Et(o[f]);Jo(d)&&(s[d]=_e)}else if(o)for(const f in o){const d=Et(f);if(Jo(d)){const h=o[f],g=s[d]=ae(h)||ce(h)?{type:h}:h;if(g){const y=ns(Boolean,g.type),w=ns(String,g.type);g[0]=y>-1,g[1]=w<0||y<w,(y>-1||ge(g,"default"))&&a.push(d)}}}const u=[s,a];return r.set(e,u),u}function Jo(e){return e[0]!=="$"}function es(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function ts(e,t){return es(e)===es(t)}function ns(e,t){return ae(t)?t.findIndex(n=>ts(n,e)):ce(t)&&ts(t,e)?0:-1}const Za=e=>e[0]==="_"||e==="$stable",yo=e=>ae(e)?e.map(xt):[xt(e)],Bf=(e,t,n)=>{if(t._n)return t;const r=tf((...i)=>yo(t(...i)),n);return r._c=!1,r},Qa=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Za(i))continue;const o=e[i];if(ce(o))t[i]=Bf(i,o,r);else if(o!=null){const s=yo(o);t[i]=()=>s}}},Ja=(e,t)=>{const n=yo(t);e.slots.default=()=>n},If=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=xe(t),mr(t,"_",n)):Qa(t,e.slots={})}else e.slots={},t&&Ja(e,t);mr(e.slots,Hr,1)},Df=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,s=_e;if(r.shapeFlag&32){const a=t._;a?n&&a===1?o=!1:(We(i,t),!n&&a===1&&delete i._):(o=!t.$stable,Qa(t,i)),s=t}else t&&(Ja(e,t),s={default:1});if(o)for(const a in i)!Za(a)&&!(a in s)&&delete i[a]};function el(){return{app:null,config:{isNativeTag:ou,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Of=0;function Nf(e,t){return function(r,i=null){ce(r)||(r=Object.assign({},r)),i!=null&&!ze(i)&&(i=null);const o=el(),s=new Set;let a=!1;const l=o.app={_uid:Of++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:oc,get config(){return o.config},set config(u){},use(u,...f){return s.has(u)||(u&&ce(u.install)?(s.add(u),u.install(l,...f)):ce(u)&&(s.add(u),u(l,...f))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,f){return f?(o.components[u]=f,l):o.components[u]},directive(u,f){return f?(o.directives[u]=f,l):o.directives[u]},mount(u,f,d){if(!a){const h=Se(r,i);return h.appContext=o,f&&t?t(h,u):e(h,u,d),a=!0,l._container=u,u.__vue_app__=l,$r(h.component)||h.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,f){return o.provides[u]=f,l}};return l}}function Di(e,t,n,r,i=!1){if(ae(e)){e.forEach((h,g)=>Di(h,t&&(ae(t)?t[g]:t),n,r,i));return}if(fr(r)&&!i)return;const o=r.shapeFlag&4?$r(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:l}=e,u=t&&t.r,f=a.refs===_e?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(Oe(u)?(f[u]=null,ge(d,u)&&(d[u]=null)):Ye(u)&&(u.value=null)),ce(l))Vt(l,a,12,[s,f]);else{const h=Oe(l),g=Ye(l);if(h||g){const y=()=>{if(e.f){const w=h?f[l]:l.value;i?ae(w)&&to(w,o):ae(w)?w.includes(o)||w.push(o):h?(f[l]=[o],ge(d,l)&&(d[l]=f[l])):(l.value=[o],e.k&&(f[e.k]=l.value))}else h?(f[l]=s,ge(d,l)&&(d[l]=s)):g&&(l.value=s,e.k&&(f[e.k]=s))};s?(y.id=-1,Xe(y,n)):y()}}}const Xe=lf;function Vf(e){return Uf(e)}function Uf(e,t){const n=cu();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:a,createComment:l,setText:u,setElementText:f,parentNode:d,nextSibling:h,setScopeId:g=gt,cloneNode:y,insertStaticContent:w}=e,b=(c,p,v,_=null,M=null,F=null,O=!1,I=null,U=!!p.dynamicChildren)=>{if(c===p)return;c&&!Gt(c,p)&&(_=de(c),te(c,M,F,!0),c=null),p.patchFlag===-2&&(U=!1,p.dynamicChildren=null);const{type:N,ref:Q,shapeFlag:K}=p;switch(N){case wo:S(c,p,v,_);break;case mt:C(c,p,v,_);break;case oi:c==null&&A(p,v,_,O);break;case Ge:H(c,p,v,_,M,F,O,I,U);break;default:K&1?m(c,p,v,_,M,F,O,I,U):K&6?W(c,p,v,_,M,F,O,I,U):(K&64||K&128)&&N.process(c,p,v,_,M,F,O,I,U,le)}Q!=null&&M&&Di(Q,c&&c.ref,F,p||c,!p)},S=(c,p,v,_)=>{if(c==null)r(p.el=a(p.children),v,_);else{const M=p.el=c.el;p.children!==c.children&&u(M,p.children)}},C=(c,p,v,_)=>{c==null?r(p.el=l(p.children||""),v,_):p.el=c.el},A=(c,p,v,_)=>{[c.el,c.anchor]=w(c.children,p,v,_,c.el,c.anchor)},E=({el:c,anchor:p},v,_)=>{let M;for(;c&&c!==p;)M=h(c),r(c,v,_),c=M;r(p,v,_)},T=({el:c,anchor:p})=>{let v;for(;c&&c!==p;)v=h(c),i(c),c=v;i(p)},m=(c,p,v,_,M,F,O,I,U)=>{O=O||p.type==="svg",c==null?x(p,v,_,M,F,O,I,U):B(c,p,M,F,O,I,U)},x=(c,p,v,_,M,F,O,I)=>{let U,N;const{type:Q,props:K,shapeFlag:ee,transition:ne,patchFlag:he,dirs:we}=c;if(c.el&&y!==void 0&&he===-1)U=c.el=y(c.el);else{if(U=c.el=s(c.type,F,K&&K.is,K),ee&8?f(U,c.children):ee&16&&L(c.children,U,null,_,M,F&&Q!=="foreignObject",O,I),we&&jt(c,null,_,"created"),K){for(const D in K)D!=="value"&&!lr(D)&&o(U,D,null,K[D],F,c.children,_,M,oe);"value"in K&&o(U,"value",null,K.value),(N=K.onVnodeBeforeMount)&&wt(N,_,c)}P(U,c,c.scopeId,O,_)}we&&jt(c,null,_,"beforeMount");const be=(!M||M&&!M.pendingBranch)&&ne&&!ne.persisted;be&&ne.beforeEnter(U),r(U,p,v),((N=K&&K.onVnodeMounted)||be||we)&&Xe(()=>{N&&wt(N,_,c),be&&ne.enter(U),we&&jt(c,null,_,"mounted")},M)},P=(c,p,v,_,M)=>{if(v&&g(c,v),_)for(let F=0;F<_.length;F++)g(c,_[F]);if(M){let F=M.subTree;if(p===F){const O=M.vnode;P(c,O,O.scopeId,O.slotScopeIds,M.parent)}}},L=(c,p,v,_,M,F,O,I,U=0)=>{for(let N=U;N<c.length;N++){const Q=c[N]=I?It(c[N]):xt(c[N]);b(null,Q,p,v,_,M,F,O,I)}},B=(c,p,v,_,M,F,O)=>{const I=p.el=c.el;let{patchFlag:U,dynamicChildren:N,dirs:Q}=p;U|=c.patchFlag&16;const K=c.props||_e,ee=p.props||_e;let ne;v&&Wt(v,!1),(ne=ee.onVnodeBeforeUpdate)&&wt(ne,v,p,c),Q&&jt(p,c,v,"beforeUpdate"),v&&Wt(v,!0);const he=M&&p.type!=="foreignObject";if(N?R(c.dynamicChildren,N,I,v,_,he,F):O||z(c,p,I,null,v,_,he,F,!1),U>0){if(U&16)j(I,p,K,ee,v,_,M);else if(U&2&&K.class!==ee.class&&o(I,"class",null,ee.class,M),U&4&&o(I,"style",K.style,ee.style,M),U&8){const we=p.dynamicProps;for(let be=0;be<we.length;be++){const D=we[be],J=K[D],Ce=ee[D];(Ce!==J||D==="value")&&o(I,D,J,Ce,M,c.children,v,_,oe)}}U&1&&c.children!==p.children&&f(I,p.children)}else!O&&N==null&&j(I,p,K,ee,v,_,M);((ne=ee.onVnodeUpdated)||Q)&&Xe(()=>{ne&&wt(ne,v,p,c),Q&&jt(p,c,v,"updated")},_)},R=(c,p,v,_,M,F,O)=>{for(let I=0;I<p.length;I++){const U=c[I],N=p[I],Q=U.el&&(U.type===Ge||!Gt(U,N)||U.shapeFlag&70)?d(U.el):v;b(U,N,Q,null,_,M,F,O,!0)}},j=(c,p,v,_,M,F,O)=>{if(v!==_){for(const I in _){if(lr(I))continue;const U=_[I],N=v[I];U!==N&&I!=="value"&&o(c,I,N,U,O,p.children,M,F,oe)}if(v!==_e)for(const I in v)!lr(I)&&!(I in _)&&o(c,I,v[I],null,O,p.children,M,F,oe);"value"in _&&o(c,"value",v.value,_.value)}},H=(c,p,v,_,M,F,O,I,U)=>{const N=p.el=c?c.el:a(""),Q=p.anchor=c?c.anchor:a("");let{patchFlag:K,dynamicChildren:ee,slotScopeIds:ne}=p;ne&&(I=I?I.concat(ne):ne),c==null?(r(N,v,_),r(Q,v,_),L(p.children,v,Q,M,F,O,I,U)):K>0&&K&64&&ee&&c.dynamicChildren?(R(c.dynamicChildren,ee,v,M,F,O,I),(p.key!=null||M&&p===M.subTree)&&tl(c,p,!0)):z(c,p,v,Q,M,F,O,I,U)},W=(c,p,v,_,M,F,O,I,U)=>{p.slotScopeIds=I,c==null?p.shapeFlag&512?M.ctx.activate(p,v,_,O,U):k(p,v,_,M,F,O,U):$(c,p,U)},k=(c,p,v,_,M,F,O)=>{const I=c.component=Xf(c,_,M);if(Ur(c)&&(I.ctx.renderer=le),Qf(I),I.asyncDep){if(M&&M.registerDep(I,q),!c.el){const U=I.subTree=Se(mt);C(null,U,p,v)}return}q(I,c,p,v,M,F,O)},$=(c,p,v)=>{const _=p.component=c.component;if(of(c,p,v))if(_.asyncDep&&!_.asyncResolved){Z(_,p,v);return}else _.next=p,Ku(_.update),_.update();else p.el=c.el,_.vnode=p},q=(c,p,v,_,M,F,O)=>{const I=()=>{if(c.isMounted){let{next:Q,bu:K,u:ee,parent:ne,vnode:he}=c,we=Q,be;Wt(c,!1),Q?(Q.el=he.el,Z(c,Q,O)):Q=he,K&&ur(K),(be=Q.props&&Q.props.onVnodeBeforeUpdate)&&wt(be,ne,Q,he),Wt(c,!0);const D=ti(c),J=c.subTree;c.subTree=D,b(J,D,d(J.el),de(J),c,M,F),Q.el=D.el,we===null&&sf(c,D.el),ee&&Xe(ee,M),(be=Q.props&&Q.props.onVnodeUpdated)&&Xe(()=>wt(be,ne,Q,he),M)}else{let Q;const{el:K,props:ee}=p,{bm:ne,m:he,parent:we}=c,be=fr(p);if(Wt(c,!1),ne&&ur(ne),!be&&(Q=ee&&ee.onVnodeBeforeMount)&&wt(Q,we,p),Wt(c,!0),K&&Ne){const D=()=>{c.subTree=ti(c),Ne(K,c.subTree,c,M,null)};be?p.type.__asyncLoader().then(()=>!c.isUnmounted&&D()):D()}else{const D=c.subTree=ti(c);b(null,D,v,_,c,M,F),p.el=D.el}if(he&&Xe(he,M),!be&&(Q=ee&&ee.onVnodeMounted)){const D=p;Xe(()=>wt(Q,we,D),M)}(p.shapeFlag&256||we&&fr(we.vnode)&&we.vnode.shapeFlag&256)&&c.a&&Xe(c.a,M),c.isMounted=!0,p=v=_=null}},U=c.effect=new oo(I,()=>La(N),c.scope),N=c.update=()=>U.run();N.id=c.uid,Wt(c,!0),N()},Z=(c,p,v)=>{p.component=c;const _=c.vnode.props;c.vnode=p,c.next=null,Rf(c,p.props,_,v),Df(c,p.children,v),yn(),Or(void 0,c.update),wn()},z=(c,p,v,_,M,F,O,I,U=!1)=>{const N=c&&c.children,Q=c?c.shapeFlag:0,K=p.children,{patchFlag:ee,shapeFlag:ne}=p;if(ee>0){if(ee&128){Y(N,K,v,_,M,F,O,I,U);return}else if(ee&256){V(N,K,v,_,M,F,O,I,U);return}}ne&8?(Q&16&&oe(N,M,F),K!==N&&f(v,K)):Q&16?ne&16?Y(N,K,v,_,M,F,O,I,U):oe(N,M,F,!0):(Q&8&&f(v,""),ne&16&&L(K,v,_,M,F,O,I,U))},V=(c,p,v,_,M,F,O,I,U)=>{c=c||ln,p=p||ln;const N=c.length,Q=p.length,K=Math.min(N,Q);let ee;for(ee=0;ee<K;ee++){const ne=p[ee]=U?It(p[ee]):xt(p[ee]);b(c[ee],ne,v,null,M,F,O,I,U)}N>Q?oe(c,M,F,!0,!1,K):L(p,v,_,M,F,O,I,U,K)},Y=(c,p,v,_,M,F,O,I,U)=>{let N=0;const Q=p.length;let K=c.length-1,ee=Q-1;for(;N<=K&&N<=ee;){const ne=c[N],he=p[N]=U?It(p[N]):xt(p[N]);if(Gt(ne,he))b(ne,he,v,null,M,F,O,I,U);else break;N++}for(;N<=K&&N<=ee;){const ne=c[K],he=p[ee]=U?It(p[ee]):xt(p[ee]);if(Gt(ne,he))b(ne,he,v,null,M,F,O,I,U);else break;K--,ee--}if(N>K){if(N<=ee){const ne=ee+1,he=ne<Q?p[ne].el:_;for(;N<=ee;)b(null,p[N]=U?It(p[N]):xt(p[N]),v,he,M,F,O,I,U),N++}}else if(N>ee)for(;N<=K;)te(c[N],M,F,!0),N++;else{const ne=N,he=N,we=new Map;for(N=he;N<=ee;N++){const Re=p[N]=U?It(p[N]):xt(p[N]);Re.key!=null&&we.set(Re.key,N)}let be,D=0;const J=ee-he+1;let Ce=!1,yt=0;const Qe=new Array(J);for(N=0;N<J;N++)Qe[N]=0;for(N=ne;N<=K;N++){const Re=c[N];if(D>=J){te(Re,M,F,!0);continue}let rt;if(Re.key!=null)rt=we.get(Re.key);else for(be=he;be<=ee;be++)if(Qe[be-he]===0&&Gt(Re,p[be])){rt=be;break}rt===void 0?te(Re,M,F,!0):(Qe[rt-he]=N+1,rt>=yt?yt=rt:Ce=!0,b(Re,p[rt],v,null,M,F,O,I,U),D++)}const Ct=Ce?zf(Qe):ln;for(be=Ct.length-1,N=J-1;N>=0;N--){const Re=he+N,rt=p[Re],No=Re+1<Q?p[Re+1].el:_;Qe[N]===0?b(null,rt,v,No,M,F,O,I,U):Ce&&(be<0||N!==Ct[be]?X(rt,v,No,2):be--)}}},X=(c,p,v,_,M=null)=>{const{el:F,type:O,transition:I,children:U,shapeFlag:N}=c;if(N&6){X(c.component.subTree,p,v,_);return}if(N&128){c.suspense.move(p,v,_);return}if(N&64){O.move(c,p,v,le);return}if(O===Ge){r(F,p,v);for(let K=0;K<U.length;K++)X(U[K],p,v,_);r(c.anchor,p,v);return}if(O===oi){E(c,p,v);return}if(_!==2&&N&1&&I)if(_===0)I.beforeEnter(F),r(F,p,v),Xe(()=>I.enter(F),M);else{const{leave:K,delayLeave:ee,afterLeave:ne}=I,he=()=>r(F,p,v),we=()=>{K(F,()=>{he(),ne&&ne()})};ee?ee(F,he,we):we()}else r(F,p,v)},te=(c,p,v,_=!1,M=!1)=>{const{type:F,props:O,ref:I,children:U,dynamicChildren:N,shapeFlag:Q,patchFlag:K,dirs:ee}=c;if(I!=null&&Di(I,null,v,c,!0),Q&256){p.ctx.deactivate(c);return}const ne=Q&1&&ee,he=!fr(c);let we;if(he&&(we=O&&O.onVnodeBeforeUnmount)&&wt(we,p,c),Q&6)Me(c.component,v,_);else{if(Q&128){c.suspense.unmount(v,_);return}ne&&jt(c,null,p,"beforeUnmount"),Q&64?c.type.remove(c,p,v,M,le,_):N&&(F!==Ge||K>0&&K&64)?oe(N,p,v,!1,!0):(F===Ge&&K&384||!M&&Q&16)&&oe(U,p,v),_&&re(c)}(he&&(we=O&&O.onVnodeUnmounted)||ne)&&Xe(()=>{we&&wt(we,p,c),ne&&jt(c,null,p,"unmounted")},v)},re=c=>{const{type:p,el:v,anchor:_,transition:M}=c;if(p===Ge){ve(v,_);return}if(p===oi){T(c);return}const F=()=>{i(v),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(c.shapeFlag&1&&M&&!M.persisted){const{leave:O,delayLeave:I}=M,U=()=>O(v,F);I?I(c.el,F,U):U()}else F()},ve=(c,p)=>{let v;for(;c!==p;)v=h(c),i(c),c=v;i(p)},Me=(c,p,v)=>{const{bum:_,scope:M,update:F,subTree:O,um:I}=c;_&&ur(_),M.stop(),F&&(F.active=!1,te(O,c,p,v)),I&&Xe(I,p),Xe(()=>{c.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&c.asyncDep&&!c.asyncResolved&&c.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},oe=(c,p,v,_=!1,M=!1,F=0)=>{for(let O=F;O<c.length;O++)te(c[O],p,v,_,M)},de=c=>c.shapeFlag&6?de(c.component.subTree):c.shapeFlag&128?c.suspense.next():h(c.anchor||c.el),ue=(c,p,v)=>{c==null?p._vnode&&te(p._vnode,null,null,!0):b(p._vnode||null,c,p,null,null,null,v),Ba(),p._vnode=c},le={p:b,um:te,m:X,r:re,mt:k,mc:L,pc:z,pbc:R,n:de,o:e};let ke,Ne;return t&&([ke,Ne]=t(le)),{render:ue,hydrate:ke,createApp:Nf(ue,ke)}}function Wt({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function tl(e,t,n=!1){const r=e.children,i=t.children;if(ae(r)&&ae(i))for(let o=0;o<r.length;o++){const s=r[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=It(i[o]),a.el=s.el),n||tl(s,a))}}function zf(e){const t=e.slice(),n=[0];let r,i,o,s,a;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=o+s>>1,e[n[a]]<u?o=a+1:s=a;u<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}const Hf=e=>e.__isTeleport,Ge=Symbol(void 0),wo=Symbol(void 0),mt=Symbol(void 0),oi=Symbol(void 0),Pn=[];let vt=null;function se(e=!1){Pn.push(vt=e?null:[])}function $f(){Pn.pop(),vt=Pn[Pn.length-1]||null}let In=1;function rs(e){In+=e}function nl(e){return e.dynamicChildren=In>0?vt||ln:null,$f(),In>0&&vt&&vt.push(e),e}function fe(e,t,n,r,i,o){return nl(G(e,t,n,r,i,o,!0))}function _r(e,t,n,r,i){return nl(Se(e,t,n,r,i,!0))}function jf(e){return e?e.__v_isVNode===!0:!1}function Gt(e,t){return e.type===t.type&&e.key===t.key}const Hr="__vInternal",rl=({key:e})=>e!=null?e:null,cr=({ref:e,ref_key:t,ref_for:n})=>e!=null?Oe(e)||Ye(e)||ce(e)?{i:ot,r:e,k:t,f:!!n}:e:null;function G(e,t=null,n=null,r=0,i=null,o=e===Ge?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&rl(t),ref:t&&cr(t),scopeId:Vr,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return a?(bo(l,n),o&128&&e.normalize(l)):n&&(l.shapeFlag|=Oe(n)?8:16),In>0&&!s&&vt&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&vt.push(l),l}const Se=Wf;function Wf(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===Wa)&&(e=mt),jf(e)){const a=zt(e,t,!0);return n&&bo(a,n),In>0&&!o&&vt&&(a.shapeFlag&6?vt[vt.indexOf(e)]=a:vt.push(a)),a.patchFlag|=-2,a}if(rc(e)&&(e=e.__vccOpts),t){t=qf(t);let{class:a,style:l}=t;a&&!Oe(a)&&(t.class=Qt(a)),ze(l)&&(Sa(l)&&!ae(l)&&(l=We({},l)),t.style=je(l))}const s=Oe(e)?1:af(e)?128:Hf(e)?64:ze(e)?4:ce(e)?2:0;return G(e,t,n,r,i,s,o,!0)}function qf(e){return e?Sa(e)||Hr in e?We({},e):e:null}function zt(e,t,n=!1){const{props:r,ref:i,patchFlag:o,children:s}=e,a=t?Gf(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&rl(a),ref:t&&t.ref?n&&i?ae(i)?i.concat(cr(t)):[i,cr(t)]:cr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ge?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zt(e.ssContent),ssFallback:e.ssFallback&&zt(e.ssFallback),el:e.el,anchor:e.anchor}}function Ie(e=" ",t=0){return Se(wo,null,e,t)}function Te(e="",t=!1){return t?(se(),_r(mt,null,e)):Se(mt,null,e)}function xt(e){return e==null||typeof e=="boolean"?Se(mt):ae(e)?Se(Ge,null,e.slice()):typeof e=="object"?It(e):Se(wo,null,String(e))}function It(e){return e.el===null||e.memo?e:zt(e)}function bo(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ae(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),bo(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(Hr in t)?t._ctx=ot:i===3&&ot&&(ot.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ce(t)?(t={default:t,_ctx:ot},n=32):(t=String(t),r&64?(n=16,t=[Ie(t)]):n=8);e.children=t,e.shapeFlag|=n}function Gf(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Qt([t.class,r.class]));else if(i==="style")t.style=je([t.style,r.style]);else if(Lr(i)){const o=t[i],s=r[i];s&&o!==s&&!(ae(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=r[i])}return t}function wt(e,t,n,r=null){st(e,t,7,[n,r])}const Yf=el();let Kf=0;function Xf(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Yf,o={uid:Kf++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new du(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xa(r,i),emitsOptions:Da(r,i),emit:null,emitted:null,propsDefaults:_e,inheritAttrs:r.inheritAttrs,ctx:_e,data:_e,props:_e,attrs:_e,slots:_e,refs:_e,setupState:_e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Qu.bind(null,o),e.ce&&e.ce(o),o}let Ue=null;const Zf=()=>Ue||ot,cn=e=>{Ue=e,e.scope.on()},Zt=()=>{Ue&&Ue.scope.off(),Ue=null};function il(e){return e.vnode.shapeFlag&4}let Dn=!1;function Qf(e,t=!1){Dn=t;const{props:n,children:r}=e.vnode,i=il(e);kf(e,n,i,t),If(e,r);const o=i?Jf(e,t):void 0;return Dn=!1,o}function Jf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ma(new Proxy(e.ctx,Tf));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?tc(e):null;cn(e),yn();const o=Vt(r,e,0,[e.props,i]);if(wn(),Zt(),ha(o)){if(o.then(Zt,Zt),t)return o.then(s=>{is(e,s,t)}).catch(s=>{Dr(s,e,0)});e.asyncDep=o}else is(e,o,t)}else ol(e,t)}function is(e,t,n){ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ze(t)&&(e.setupState=Pa(t)),ol(e,n)}let os;function ol(e,t,n){const r=e.type;if(!e.render){if(!t&&os&&!r.render){const i=r.template;if(i){const{isCustomElement:o,compilerOptions:s}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,u=We(We({isCustomElement:o,delimiters:a},s),l);r.render=os(i,u)}}e.render=r.render||gt}cn(e),yn(),Sf(e),wn(),Zt()}function ec(e){return new Proxy(e.attrs,{get(t,n){return nt(e,"get","$attrs"),t[n]}})}function tc(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=ec(e))},slots:e.slots,emit:e.emit,expose:t}}function $r(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Pa(Ma(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in br)return br[n](e)}}))}function nc(e,t=!0){return ce(e)?e.displayName||e.name:e.name||t&&e.__name}function rc(e){return ce(e)&&"__vccOpts"in e}const ic=(e,t)=>Wu(e,t,Dn),oc="3.2.37",sc="http://www.w3.org/2000/svg",Yt=typeof document!="undefined"?document:null,ss=Yt&&Yt.createElement("template"),ac={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?Yt.createElementNS(sc,e):Yt.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Yt.createTextNode(e),createComment:e=>Yt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Yt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{ss.innerHTML=r?`<svg>${e}</svg>`:e;const a=ss.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function lc(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function uc(e,t,n){const r=e.style,i=Oe(n);if(n&&!i){for(const o in n)Oi(r,o,n[o]);if(t&&!Oe(t))for(const o in t)n[o]==null&&Oi(r,o,"")}else{const o=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=o)}}const as=/\s*!important$/;function Oi(e,t,n){if(ae(n))n.forEach(r=>Oi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=fc(e,t);as.test(n)?e.setProperty(mn(r),n.replace(as,""),"important"):e[r]=n}}const ls=["Webkit","Moz","ms"],si={};function fc(e,t){const n=si[t];if(n)return n;let r=Et(t);if(r!=="filter"&&r in e)return si[t]=r;r=Br(r);for(let i=0;i<ls.length;i++){const o=ls[i]+r;if(o in e)return si[t]=o}return t}const us="http://www.w3.org/1999/xlink";function cc(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(us,t.slice(6,t.length)):e.setAttributeNS(us,t,n);else{const o=tu(t);n==null||o&&!fa(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function dc(e,t,n,r,i,o,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,i,o),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n==null?"":n;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=fa(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(t)}const[sl,hc]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Ni=0;const pc=Promise.resolve(),vc=()=>{Ni=0},gc=()=>Ni||(pc.then(vc),Ni=sl());function sn(e,t,n,r){e.addEventListener(t,n,r)}function mc(e,t,n,r){e.removeEventListener(t,n,r)}function yc(e,t,n,r,i=null){const o=e._vei||(e._vei={}),s=o[t];if(r&&s)s.value=r;else{const[a,l]=wc(t);if(r){const u=o[t]=bc(r,i);sn(e,a,u,l)}else s&&(mc(e,a,s,l),o[t]=void 0)}}const fs=/(?:Once|Passive|Capture)$/;function wc(e){let t;if(fs.test(e)){t={};let n;for(;n=e.match(fs);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[mn(e.slice(2)),t]}function bc(e,t){const n=r=>{const i=r.timeStamp||sl();(hc||i>=n.attached-1)&&st(xc(r,n.value),t,5,[r])};return n.value=e,n.attached=gc(),n}function xc(e,t){if(ae(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const cs=/^on[a-z]/,_c=(e,t,n,r,i=!1,o,s,a,l)=>{t==="class"?lc(e,r,i):t==="style"?uc(e,n,r):Lr(t)?eo(t)||yc(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ec(e,t,r,i))?dc(e,t,r,o,s,a,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),cc(e,t,r,i))};function Ec(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&cs.test(t)&&ce(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||cs.test(t)&&Oe(n)?!1:t in e}const Cc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};hf.props;const ds=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ae(t)?n=>ur(t,n):t};function Ac(e){e.target.composing=!0}function hs(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const al={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=ds(i);const o=r||i.props&&i.props.type==="number";sn(e,t?"change":"input",s=>{if(s.target.composing)return;let a=e.value;n&&(a=a.trim()),o&&(a=_i(a)),e._assign(a)}),n&&sn(e,"change",()=>{e.value=e.value.trim()}),t||(sn(e,"compositionstart",Ac),sn(e,"compositionend",hs),sn(e,"change",hs))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},o){if(e._assign=ds(o),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&_i(e.value)===t))return;const s=t==null?"":t;e.value!==s&&(e.value=s)}},Tc=["ctrl","shift","alt","meta"],Sc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Tc.some(n=>e[`${n}Key`]&&!t.includes(n))},_t=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const o=Sc[t[i]];if(o&&o(n,t))return}return e(n,...r)},Mc={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):bn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),bn(e,!0),r.enter(e)):r.leave(e,()=>{bn(e,!1)}):bn(e,t))},beforeUnmount(e,{value:t}){bn(e,t)}};function bn(e,t){e.style.display=t?e._vod:"none"}const Pc=We({patchProp:_c},ac);let ps;function Fc(){return ps||(ps=Vf(Pc))}const vs=(...e)=>{const t=Fc().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=Lc(r);if(!i)return;const o=t._component;!ce(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function Lc(e){return Oe(e)?document.querySelector(e):e}const Xn=new Map,zn=[],Vi=zn.map,kc=zn.some,Rc=zn.hasOwnProperty,Bc=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,Ic=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,gs=/(?:\.[^/]*|\/)$/;class dn extends Error{constructor(t){super(t)}}dn.prototype.name=dn.name;function ms(e){const t=Bc.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function Dc(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function n(i){for(const o of t){let s=i[o];if(typeof s=="string")return s.startsWith("./")&&(s=s.slice(2)),gs.test(s)?s:`${s}.js`}}function r(i){const o=`${e}${i.name}${i.version?`@${i.version}`:""}/package.json`;let s=Xn.get(o);return s||Xn.set(o,s=fetch(o).then(a=>{if(!a.ok)throw new dn("unable to load package.json");return a.redirected&&!Xn.has(a.url)&&Xn.set(a.url,s),a.json()})),s}return async function(o,s){if(o.startsWith(e)&&(o=o.substring(e.length)),/^(\w+:)|\/\//i.test(o))return o;if(/^[.]{0,2}\//i.test(o))return new URL(o,s==null?location:s).href;if(!o.length||/^[\s._]/.test(o)||/\s$/.test(o))throw new dn("illegal name");const a=ms(o);if(!a)return`${e}${o}`;if(!a.version&&s!=null&&s.startsWith(e)){const u=await r(ms(s.substring(e.length)));a.version=u.dependencies&&u.dependencies[a.name]||u.peerDependencies&&u.peerDependencies[a.name]}if(a.path&&!gs.test(a.path)&&(a.path+=".js"),a.path&&a.version&&Ic.test(a.version))return`${e}${a.name}@${a.version}/${a.path}`;const l=await r(a);return`${e}${l.name}@${l.version}/${a.path||n(l)||"index.js"}`}}var Oc=ll(Dc());function ll(e){const t=new Map,n=i(null);function r(a){if(typeof a!="string")return a;let l=t.get(a);return l||t.set(a,l=new Promise((u,f)=>{const d=document.createElement("script");d.onload=()=>{try{u(zn.pop()(i(a)))}catch{f(new dn("invalid module"))}d.remove()},d.onerror=()=>{f(new dn("unable to load module")),d.remove()},d.async=!0,d.src=a,window.define=ul,document.head.appendChild(d)})),l}function i(a){return l=>Promise.resolve(e(l,a)).then(r)}function o(a){return ll((l,u)=>l in a&&(l=a[l],u=null,typeof l!="string")?l:e(l,u))}function s(a){return arguments.length>1?Promise.all(Vi.call(arguments,n)).then(Nc):n(a)}return s.alias=o,s.resolve=e,s}function Nc(e){const t={};for(const n of e)for(const r in n)Rc.call(n,r)&&(n[r]==null?Object.defineProperty(t,r,{get:Vc(n,r)}):t[r]=n[r]);return t}function Vc(e,t){return()=>e[t]}function Uc(e){return e=e+"",e==="exports"||e==="module"}function ul(e,t,n){const r=arguments.length;r<2?(n=e,t=[]):r<3&&(n=t,t=typeof e=="string"?[]:e),zn.push(kc.call(t,Uc)?i=>{const o={},s={exports:o};return Promise.all(Vi.call(t,a=>(a=a+"",a==="exports"?o:a==="module"?s:i(a)))).then(a=>(n.apply(null,a),s.exports))}:i=>Promise.all(Vi.call(t,i)).then(o=>typeof n=="function"?n.apply(null,o):n))}ul.amd={};var jr=function(t){Hc(t);var n=zc(t);return t.on=n.on,t.off=n.off,t.fire=n.fire,t};function zc(e){var t=Object.create(null);return{on:function(n,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var o=t[n];return o||(o=t[n]=[]),o.push({callback:r,ctx:i}),e},off:function(n,r){var i=typeof n=="undefined";if(i)return t=Object.create(null),e;if(t[n]){var o=typeof r!="function";if(o)delete t[n];else for(var s=t[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return e},fire:function(n){var r=t[n];if(!r)return e;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var s=r[o];s.callback.apply(s.ctx,i)}return e}}}function Hc(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}var fl=1e-6,Ke=typeof Float32Array!="undefined"?Float32Array:Array;function $c(e){Ke=e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,n=arguments.length;n--;)t+=e[n]*e[n];return Math.sqrt(t)});function jc(){var e=new Ke(9);return Ke!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ft(){var e=new Ke(16);return Ke!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Wc(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Hn(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],f=t[8],d=t[9],h=t[10],g=t[11],y=t[12],w=t[13],b=t[14],S=t[15],C=n*a-r*s,A=n*l-i*s,E=n*u-o*s,T=r*l-i*a,m=r*u-o*a,x=i*u-o*l,P=f*w-d*y,L=f*b-h*y,B=f*S-g*y,R=d*b-h*w,j=d*S-g*w,H=h*S-g*b,W=C*H-A*j+E*R+T*B-m*L+x*P;return W?(W=1/W,e[0]=(a*H-l*j+u*R)*W,e[1]=(i*j-r*H-o*R)*W,e[2]=(w*x-b*m+S*T)*W,e[3]=(h*m-d*x-g*T)*W,e[4]=(l*B-s*H-u*L)*W,e[5]=(n*H-i*B+o*L)*W,e[6]=(b*E-y*x-S*A)*W,e[7]=(f*x-h*E+g*A)*W,e[8]=(s*j-a*B+u*P)*W,e[9]=(r*B-n*j-o*P)*W,e[10]=(y*m-w*E+S*C)*W,e[11]=(d*E-f*m-g*C)*W,e[12]=(a*L-s*R-l*P)*W,e[13]=(n*R-r*L+i*P)*W,e[14]=(w*A-y*T-b*C)*W,e[15]=(f*T-d*A+h*C)*W,e):null}function Ht(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],f=t[7],d=t[8],h=t[9],g=t[10],y=t[11],w=t[12],b=t[13],S=t[14],C=t[15],A=n[0],E=n[1],T=n[2],m=n[3];return e[0]=A*r+E*a+T*d+m*w,e[1]=A*i+E*l+T*h+m*b,e[2]=A*o+E*u+T*g+m*S,e[3]=A*s+E*f+T*y+m*C,A=n[4],E=n[5],T=n[6],m=n[7],e[4]=A*r+E*a+T*d+m*w,e[5]=A*i+E*l+T*h+m*b,e[6]=A*o+E*u+T*g+m*S,e[7]=A*s+E*f+T*y+m*C,A=n[8],E=n[9],T=n[10],m=n[11],e[8]=A*r+E*a+T*d+m*w,e[9]=A*i+E*l+T*h+m*b,e[10]=A*o+E*u+T*g+m*S,e[11]=A*s+E*f+T*y+m*C,A=n[12],E=n[13],T=n[14],m=n[15],e[12]=A*r+E*a+T*d+m*w,e[13]=A*i+E*l+T*h+m*b,e[14]=A*o+E*u+T*g+m*S,e[15]=A*s+E*f+T*y+m*C,e}function qc(e,t,n){var r=n[0],i=n[1],o=n[2],s,a,l,u,f,d,h,g,y,w,b,S;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*o+t[12],e[13]=t[1]*r+t[5]*i+t[9]*o+t[13],e[14]=t[2]*r+t[6]*i+t[10]*o+t[14],e[15]=t[3]*r+t[7]*i+t[11]*o+t[15]):(s=t[0],a=t[1],l=t[2],u=t[3],f=t[4],d=t[5],h=t[6],g=t[7],y=t[8],w=t[9],b=t[10],S=t[11],e[0]=s,e[1]=a,e[2]=l,e[3]=u,e[4]=f,e[5]=d,e[6]=h,e[7]=g,e[8]=y,e[9]=w,e[10]=b,e[11]=S,e[12]=s*r+f*i+y*o+t[12],e[13]=a*r+d*i+w*o+t[13],e[14]=l*r+h*i+b*o+t[14],e[15]=u*r+g*i+S*o+t[15]),e}function Gc(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Yc(e,t,n,r){var i=r[0],o=r[1],s=r[2],a=Math.hypot(i,o,s),l,u,f,d,h,g,y,w,b,S,C,A,E,T,m,x,P,L,B,R,j,H,W,k;return a<fl?null:(a=1/a,i*=a,o*=a,s*=a,l=Math.sin(n),u=Math.cos(n),f=1-u,d=t[0],h=t[1],g=t[2],y=t[3],w=t[4],b=t[5],S=t[6],C=t[7],A=t[8],E=t[9],T=t[10],m=t[11],x=i*i*f+u,P=o*i*f+s*l,L=s*i*f-o*l,B=i*o*f-s*l,R=o*o*f+u,j=s*o*f+i*l,H=i*s*f+o*l,W=o*s*f-i*l,k=s*s*f+u,e[0]=d*x+w*P+A*L,e[1]=h*x+b*P+E*L,e[2]=g*x+S*P+T*L,e[3]=y*x+C*P+m*L,e[4]=d*B+w*R+A*j,e[5]=h*B+b*R+E*j,e[6]=g*B+S*R+T*j,e[7]=y*B+C*R+m*j,e[8]=d*H+w*W+A*k,e[9]=h*H+b*W+E*k,e[10]=g*H+S*W+T*k,e[11]=y*H+C*W+m*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Kc(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],f=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*r,e[5]=s*i+f*r,e[6]=a*i+d*r,e[7]=l*i+h*r,e[8]=u*i-o*r,e[9]=f*i-s*r,e[10]=d*i-a*r,e[11]=h*i-l*r,e}function Xc(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],u=t[8],f=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*r,e[1]=s*i-f*r,e[2]=a*i-d*r,e[3]=l*i-h*r,e[8]=o*r+u*i,e[9]=s*r+f*i,e[10]=a*r+d*i,e[11]=l*r+h*i,e}function Zc(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],s=t[1],a=t[2],l=t[3],u=t[4],f=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*r,e[1]=s*i+f*r,e[2]=a*i+d*r,e[3]=l*i+h*r,e[4]=u*i-o*r,e[5]=f*i-s*r,e[6]=d*i-a*r,e[7]=h*i-l*r,e}function Qc(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=r+r,l=i+i,u=o+o,f=r*a,d=r*l,h=r*u,g=i*l,y=i*u,w=o*u,b=s*a,S=s*l,C=s*u;return e[0]=1-(g+w),e[1]=d+C,e[2]=h-S,e[3]=0,e[4]=d-C,e[5]=1-(f+w),e[6]=y+b,e[7]=0,e[8]=h+S,e[9]=y-b,e[10]=1-(f+g),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Jc(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function ed(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],s=t[5],a=t[6],l=t[8],u=t[9],f=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,s,a),e[2]=Math.hypot(l,u,f),e}function xo(e,t){var n=new Ke(3);ed(n,t);var r=1/n[0],i=1/n[1],o=1/n[2],s=t[0]*r,a=t[1]*i,l=t[2]*o,u=t[4]*r,f=t[5]*i,d=t[6]*o,h=t[8]*r,g=t[9]*i,y=t[10]*o,w=s+f+y,b=0;return w>0?(b=Math.sqrt(w+1)*2,e[3]=.25*b,e[0]=(d-g)/b,e[1]=(h-l)/b,e[2]=(a-u)/b):s>f&&s>y?(b=Math.sqrt(1+s-f-y)*2,e[3]=(d-g)/b,e[0]=.25*b,e[1]=(a+u)/b,e[2]=(h+l)/b):f>y?(b=Math.sqrt(1+f-s-y)*2,e[3]=(h-l)/b,e[0]=(a+u)/b,e[1]=.25*b,e[2]=(d+g)/b):(b=Math.sqrt(1+y-s-f)*2,e[3]=(a-u)/b,e[0]=(h+l)/b,e[1]=(d+g)/b,e[2]=.25*b),e}function td(e,t,n,r,i){var o=1/Math.tan(t/2),s;return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(s=1/(r-i),e[10]=(i+r)*s,e[14]=2*i*r*s):(e[10]=-1,e[14]=-2*r),e}var nd=td;function _o(e,t,n,r){var i=t[0],o=t[1],s=t[2],a=r[0],l=r[1],u=r[2],f=i-n[0],d=o-n[1],h=s-n[2],g=f*f+d*d+h*h;g>0&&(g=1/Math.sqrt(g),f*=g,d*=g,h*=g);var y=l*h-u*d,w=u*f-a*h,b=a*d-l*f;return g=y*y+w*w+b*b,g>0&&(g=1/Math.sqrt(g),y*=g,w*=g,b*=g),e[0]=y,e[1]=w,e[2]=b,e[3]=0,e[4]=d*b-h*w,e[5]=h*y-f*b,e[6]=f*w-d*y,e[7]=0,e[8]=f,e[9]=d,e[10]=h,e[11]=0,e[12]=i,e[13]=o,e[14]=s,e[15]=1,e}var rd=Ht;function cl(){var e=new Ke(3);return Ke!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function id(e){var t=new Ke(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function od(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function ys(e,t,n){var r=new Ke(3);return r[0]=e,r[1]=t,r[2]=n,r}function Er(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function sd(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function ad(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Eo(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Wr(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Ui(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ai(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2];return e[0]=i*l-o*a,e[1]=o*s-r*l,e[2]=r*a-i*s,e}function hn(e,t,n){var r=t[0],i=t[1],o=t[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,e}function Cr(e,t,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=t[0],l=t[1],u=t[2],f=i*u-o*l,d=o*a-r*u,h=r*l-i*a,g=i*h-o*d,y=o*f-r*h,w=r*d-i*f,b=s*2;return f*=b,d*=b,h*=b,g*=2,y*=2,w*=2,e[0]=a+f+g,e[1]=l+d+y,e[2]=u+h+w,e}var Fn=ad,ld=od;(function(){var e=cl();return function(t,n,r,i,o,s){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,a=r;a<l;a+=n)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],o(e,e,s),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2];return t}})();function ud(){var e=new Ke(4);return Ke!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function fd(e){var t=new Ke(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function cd(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function dd(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=o*s,e}function dl(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,e}(function(){var e=ud();return function(t,n,r,i,o,s){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,a=r;a<l;a+=n)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],e[3]=t[a+3],o(e,e,s),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2],t[a+3]=e[3];return t}})();function ws(){var e=new Ke(4);return Ke!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function zi(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function hd(e,t,n){var r=t[0],i=t[1],o=t[2],s=t[3],a=n[0],l=n[1],u=n[2],f=n[3];return e[0]=r*f+s*a+i*u-o*l,e[1]=i*f+s*l+o*a-r*u,e[2]=o*f+s*u+r*l-i*a,e[3]=s*f-r*a-i*l-o*u,e}function dr(e,t,n,r){var i=t[0],o=t[1],s=t[2],a=t[3],l=n[0],u=n[1],f=n[2],d=n[3],h,g,y,w,b;return g=i*l+o*u+s*f+a*d,g<0&&(g=-g,l=-l,u=-u,f=-f,d=-d),1-g>fl?(h=Math.acos(g),y=Math.sin(h),w=Math.sin((1-r)*h)/y,b=Math.sin(r*h)/y):(w=1-r,b=r),e[0]=w*i+b*l,e[1]=w*o+b*u,e[2]=w*s+b*f,e[3]=w*a+b*d,e}function pd(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[o*3+o]-t[s*3+s]+1),e[i]=.5*r,r=.5/r,e[3]=(t[o*3+s]-t[s*3+o])*r,e[o]=(t[o*3+i]+t[i*3+o])*r,e[s]=(t[s*3+i]+t[i*3+s])*r}return e}var bs=fd,hl=cd,Ar=hd,pl=dd;(function(){var e=cl(),t=ys(1,0,0),n=ys(0,1,0);return function(r,i,o){var s=Ui(i,o);return s<-.999999?(ai(e,t,i),ld(e)<1e-6&&ai(e,n,i),Wr(e,e),zi(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(ai(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,pl(r,r))}})();(function(){var e=ws(),t=ws();return function(n,r,i,o,s,a){return dr(e,r,s,a),dr(t,i,o,a),dr(n,e,t,2*a*(1-a)),n}})();(function(){var e=jc();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],pl(t,pd(t,e))}})();var Ae=function(){this.children=[],this.model=Ft(),this.worldModel=Ft(),this.modelViewProjection=Ft(),this.worldTransformNeedsUpdate=!0,this.modelViewProjectionNeedsUpdate=!0,this.type="Element",this.scene=null,this.parent=null};Ae.prototype.appendChild=function(t,n){n===void 0&&(n=!1),t.parent=this,n?this.children.unshift(t):this.children.push(t),t.bindScene&&t.bindScene(this.scene),this.scene&&this.scene.renderFrame()};Ae.prototype.insertChildAfter=function(t,n){t.parent=this;var r=this.children.indexOf(n);if(r<0)throw new Error("Could not find element to insert after");this.children.splice(r+1,0,t),t.bindScene&&t.bindScene(this.scene),this.scene&&this.scene.renderFrame()};Ae.prototype.bindScene=function(t){this.scene=t,this.worldTransformNeedsUpdate=!0,this.modelViewProjectionNeedsUpdate=!0};Ae.prototype.traverse=function(t,n){t(this);for(var r=0;r<this.children.length;++r){var i=this.children[r];i.traverse(t,n)}n&&n(this)};Ae.prototype.rotate=function(t,n){return Yc(this.model,this.model,t,n),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this};Ae.prototype.rotateX=function(t){return Kc(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this};Ae.prototype.rotateY=function(t){return Xc(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this};Ae.prototype.rotateZ=function(t){return Zc(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this};Ae.prototype.scale=function(t){return Gc(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this};Ae.prototype.translate=function(t){return qc(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this};Ae.prototype.removeChild=function(t){var n=this.children.indexOf(t);n>-1&&(this.children.splice(n,1),t.bindScene(null)),this.scene&&this.scene.renderFrame()};Ae.prototype.updateWorldTransform=function(t){t===void 0&&(t=!1),(this.worldTransformNeedsUpdate||t)&&(this.parent?Ht(this.worldModel,this.parent.worldModel,this.model):Wc(this.worldModel,this.model),this.modelViewProjectionNeedsUpdate=!0,this.worldTransformNeedsUpdate=!1,t=!0);for(var n=t,r=this.children,i=0;i<r.length;i++)n=r[i].updateWorldTransform(t)||n;return n};Ae.prototype.scheduleMVPUpdate=function(){this.modelViewProjectionNeedsUpdate=!0;for(var t=this.children,n=0;n<t.length;n++)t[n].scheduleMVPUpdate()};Ae.prototype.updateModelViewProjection=function(t,n){!this.modelViewProjectionNeedsUpdate||(Ht(this.modelViewProjection,t,n),Ht(this.modelViewProjection,this.modelViewProjection,this.worldModel),this.modelViewProjectionNeedsUpdate=!1)};Ae.prototype.draw=function(t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r];i.updateModelViewProjection(n.projection,n.view.matrix),i.draw(t,n)}};Ae.prototype.dispose=function(){for(var t=0;t<this.children.length;++t){var n=this.children[t];n.dispose()}};var xs={maxSingleTouchTime:300,singleTapDistanceSquared:25};function vd(e,t,n){var r=Date.now(),i;return e.addEventListener("click",l,{passive:!1}),e.addEventListener("touchend",s,{passive:!1}),e.addEventListener("touchstart",o,{passive:!1}),a;function o(u){var f=u.touches;f.length===1&&(r=Date.now(),i={x:u.touches[0].pageX,y:u.touches[0].pageY})}function s(u){if(!(u.touches.length>1)){var f=Date.now()-r;if(!(f>xs.maxSingleTouchTime)){var d=u.changedTouches[0],h=d.pageX-i.x,g=d.pageY-i.y;h*h+g*g<xs.singleTapDistanceSquared&&l(d)}}}function a(){e.removeEventListener("click",l),e.removeEventListener("touchend",s),e.removeEventListener("touchstart",o)}function l(u){t.call(n,u)}}var gd=[0,0,0],md=[1,0,0],yd=[0,1,0],wd=[0,0,1],$t=function(t){this.matrix=t||Ft(),this.cameraWorld=Hn(Ft(),this.matrix),this.position=[0,0,0],this.orientation=[0,0,0,1],this.center=[0,0,0],this.deconstructPositionRotation()};$t.prototype.lookAt=function(t,n,r){return _o(this.cameraWorld,t,n,r),Hn(this.matrix,this.cameraWorld),this.deconstructPositionRotation(),this};$t.prototype.update=function(){return Qc(this.cameraWorld,this.orientation,this.position),Hn(this.matrix,this.cameraWorld),this};$t.prototype.deconstructPositionRotation=function(){Jc(this.position,this.cameraWorld),xo(this.orientation,this.cameraWorld)};$t.prototype.translateOnAxis=function(t,n){var r=Cr(gd,t,this.orientation);return Eo(this.position,this.position,r,n),this};$t.prototype.translateX=function(t){return this.translateOnAxis(md,t)};$t.prototype.translateY=function(t){return this.translateOnAxis(yd,t)};$t.prototype.translateZ=function(t){return this.translateOnAxis(wd,t)};var bd=4,xd=.001,_d=1e-7,Ed=10,Cn=11,Zn=1/(Cn-1),Cd=typeof Float32Array=="function";function vl(e,t){return 1-3*t+3*e}function gl(e,t){return 3*t-6*e}function ml(e){return 3*e}function Tr(e,t,n){return((vl(t,n)*e+gl(t,n))*e+ml(t))*e}function yl(e,t,n){return 3*vl(t,n)*e*e+2*gl(t,n)*e+ml(t)}function Ad(e,t,n,r,i){var o,s,a=0;do s=t+(n-t)/2,o=Tr(s,r,i)-e,o>0?n=s:t=s;while(Math.abs(o)>_d&&++a<Ed);return s}function Td(e,t,n,r){for(var i=0;i<bd;++i){var o=yl(t,n,r);if(o===0)return t;var s=Tr(t,n,r)-e;t-=s/o}return t}function Sd(e){return e}var xn=function(t,n,r,i){if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===n&&r===i)return Sd;for(var o=Cd?new Float32Array(Cn):new Array(Cn),s=0;s<Cn;++s)o[s]=Tr(s*Zn,t,r);function a(l){for(var u=0,f=1,d=Cn-1;f!==d&&o[f]<=l;++f)u+=Zn;--f;var h=(l-o[f])/(o[f+1]-o[f]),g=u+h*Zn,y=yl(g,t,r);return y>=xd?Td(l,g,t,r):y===0?g:Ad(l,u,u+Zn,t,r)}return function(u){return u===0?0:u===1?1:Tr(a(u),n,i)}},_s={ease:xn(.25,.1,.25,1),easeIn:xn(.42,0,1,1),easeOut:xn(0,0,.58,1),easeInOut:xn(.42,0,.58,1),linear:xn(0,0,1,1)},Co=Fd,Md=wl,Pd=wl();function Fd(e,t,n){var r=Object.create(null),i=Object.create(null);n=n||{};var o=typeof n.easing=="function"?n.easing:_s[n.easing];o||(n.easing&&console.warn("Unknown easing function in amator: "+n.easing),o=_s.ease);var s=typeof n.step=="function"?n.step:Es,a=typeof n.done=="function"?n.done:Es,l=Ld(n.scheduler),u=Object.keys(t);u.forEach(function(S){r[S]=e[S],i[S]=t[S]-e[S]});var f=typeof n.duration=="number"?n.duration:400,d=Math.max(1,f*.06),h,g=0;return h=l.next(w),{cancel:y};function y(){l.cancel(h),h=0}function w(){var S=o(g/d);g+=1,b(S),g<=d?(h=l.next(w),s(e)):(h=0,setTimeout(function(){a(e)},0))}function b(S){u.forEach(function(C){e[C]=i[C]*S+r[C]})}}function Es(){}function Ld(e){if(!e){var t=typeof window!="undefined"&&window.requestAnimationFrame;return t?kd():Rd()}if(typeof e.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof e.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return e}function kd(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function Rd(){return{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}function wl(){var e=new Set,t=new Set,n=0;return{next:i,cancel:i,clearAll:r};function r(){e.clear(),t.clear(),cancelAnimationFrame(n),n=0}function i(a){t.add(a),o()}function o(){n||(n=requestAnimationFrame(s))}function s(){n=0;var a=t;t=e,e=a,e.forEach(function(l){l()}),e.clear()}}Co.makeAggregateRaf=Md;Co.sharedScheduler=Pd;function Cs(e,t,n){typeof n!="object"&&(n={});var r=.001,i=typeof n.minVelocity=="number"?n.minVelocity:r,o=typeof n.amplitude=="number"?n.amplitude:.01,s=typeof n.cancelAnimationFrame=="function"?n.cancelAnimationFrame:Bd(),a=typeof n.requestAnimationFrame=="function"?n.requestAnimationFrame:Id(),l,u,f=342,d,h,g,y,w,b,S,C;return{start:m,setAmplitude:A,getAmplitude:E,stop:P,impulse:L,cancel:T};function A(R){o=R}function E(){return o}function T(){s(d),s(C)}function m(){l=e(),g=w=h=y=b=0,u=new Date,s(d),s(C),d=a(x)}function x(){var R=Date.now(),j=R-u;u=R;var H=e(),W=H.x-l.x,k=H.y-l.y,$=(H.z||0)-l.z;l=H;var q=1e3/(1+j);h=.8*W*q+.2*h,y=.8*k*q+.2*y,b=.8*$*q+.2*b,d=a(x)}function P(){!d||(s(d),d=0,s(C),C=0,L(h,y,b))}function L(R,j,H){u=Date.now(),(R<-i||R>i)&&(g=o*R),(j<-i||j>i)&&(w=o*j),(H<-i||H>i)&&(S=o*H),C=a(B)}function B(){var R=Date.now()-u,j=!1,H=0,W=0,k=0,$=Math.exp(-R/f);if(g&&(H=g*$,H>r||H<-r?j=!0:H=g=0),w&&(W=w*$,W>r||W<-r?j=!0:W=w=0),S&&(k=S*$,k>r||k<-r?j=!0:k=S=0),j){var q=e();t(q.x+H,q.y+W,q.z+k),C=a(B)}}}function Bd(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function Id(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(e){return setTimeout(e,16)}}var bl=function(t){this.x=t.clientX,this.y=t.clientY,this.lastX=this.x,this.lastY=this.y,this.id=t.identifier,this.createdAt=Date.now()};bl.prototype.move=function(t){this.lastX=this.x,this.lastY=this.y,this.x=t.clientX,this.y=t.clientY};var qr=0,Dd=1,Od=2,Nd=3,Gr=function(t){this.allowRotation=t,this.state=qr,this.canRotate=!1,this.canScale=!1,this.canIncline=!1,this.first=void 0,this.second=void 0,this.stateChanged=!1};Gr.prototype.reset=function(){this.state=qr,this.canRotate=!1,this.canScale=!1,this.canIncline=!1,this.first=void 0,this.second=void 0};Gr.prototype.isUnknown=function(){return this.state===qr};Gr.prototype.track=function(t,n){if(this.stateChanged=!1,this.state===qr){if(!(this.first&&this.second)){this.first={id:t.id,x:t.x,y:t.y},this.second={id:n.id,x:n.x,y:n.y};return}var r=this.first,i=this.second;if(t.id===i.id&&n.id===r.id){var o=r;r=i,i=o}var s=r.y-i.y,a=r.x-i.x,l=t.y-n.y,u=t.x-n.x,f=Math.abs(Math.hypot(s,a)-Math.hypot(l,u)),d=Math.atan2(s,a),h=Math.abs(d-Math.atan2(l,u));d=Math.abs(d)*180/Math.PI;var g=60,y=d<g||180-d<g;if(y&&this.allowRotation&&Math.abs(t.createdAt-n.createdAt)<100){var w=t.x-r.x+n.x-i.x,b=t.y-r.y+n.y-i.y;Math.abs(w)<10&&Math.abs(b)>42&&(this.canIncline=!0)}this.canIncline?(this.canRotate=!1,this.canScale=!1,this.canIncline=!0,this.state=Nd):h>.1&&this.allowRotation?(this.canRotate=!0,this.canScale=!0,this.canIncline=!1,this.state=Od):f>15&&(this.canRotate=!1,this.canScale=!0,this.canIncline=!1,this.state=Dd),this.stateChanged=!0}};function Vd(e,t){var n=!1,r=new Map,i=t.allowRotation,o=t.allowPinchRotation,s=t.panAnimation,a=t.rotateAnimation,l=new Gr(o&&i),u,f=Date.now(),d=f;return g(),{dispose:h};function h(){e.removeEventListener("touchstart",y,{passive:!1}),C()}function g(){e.addEventListener("touchstart",y,{passive:!1})}function y(A){n||(S(),n=!0),s.cancel(),a.cancel(),A.touches.length===1&&s.start();for(var E=0;E<A.touches.length;++E){var T=A.touches[E];r.has(T.identifier)||r.set(T.identifier,new bl(T))}A.stopPropagation(),A.preventDefault()}function w(A){for(var E=Date.now(),T=0,m=0,x=0,P=0,L,B,R=!1,j=A.touches,H=0;H<j.length;++H){var W=j[H],k=r.get(W.identifier);!k||(k.move(W),x+=k.x,P+=k.y,T+=k.x-k.lastX,m+=k.y-k.lastY,L?B||(B=k):L=k)}var $=j.length;if(T/=$,m/=$,x/=$,P/=$,B||l.reset(),L&&B){d=E;var q=B.x-L.x,Z=B.y-L.y,z=B.lastX-L.lastX,V=B.lastY-L.lastY,Y=Math.hypot(q,Z)/Math.hypot(z,V)-1,X=Math.atan2(Z,q)-Math.atan2(V,z);if(l.track(L,B),l.stateChanged&&(a.start(),s.cancel()),l.canScale&&(t.zoomToClientCoordinates(x,P,Y),R=!0),l.canRotate&&(t.rotateByAngle(X,0),R=!0),l.canIncline){var te=B.y-B.lastY+L.y-L.lastY;t.rotateByAbsoluteOffset(0,te),R=!0}A.preventDefault(),A.stopPropagation()}var re=E-f,ve=l.canIncline||re<300||A.touches.length>1&&l.isUnknown();(T!==0||m!==0)&&!ve&&(t.panByAbsoluteOffset(T,m),R=!0),R&&t.redraw()}function b(A){var E=Date.now(),T=E-f;f=E;for(var m=A.changedTouches,x=0;x<m.length;++x){var P=m[x];r.delete(P.identifier)}if(A.touches.length<2&&(l.reset(),a.stop(),s.stop()),A.touches.length===0&&r.clear(),r.size===0&&A.changedTouches.length===1){if(n=!1,C(),s.stop(),T<350&&E-d>350){var L=A.changedTouches[0],B=Math.abs(L.clientX-u.clientX),R=Math.abs(L.clientY-u.clientY);Math.hypot(B,R)<30&&t.zoomToClientCoordinates(u.clientX,u.clientY,.5,!0)}u=A.changedTouches[0]}}function S(){document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("touchend",b,{passive:!1}),document.addEventListener("touchcancel ",b,{passive:!1})}function C(){document.removeEventListener("touchmove",w),document.removeEventListener("touchend",b),document.removeEventListener("touchcancel ",b)}}function As(e,t,n){var r=e*Math.cos(t),i=e*Math.sin(t)*Math.cos(n),o=e*Math.sin(t)*Math.sin(n);return[i,o,r]}function Je(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function Dt(e,t){return e===void 0?t:e}function dt(e,t,n){return Math.abs(e)<t?n:e}function Ud(e,t){var n=0,r=0,i=0,o=0,s=0,a=0,l=0,u=0,f=0,d=0,h=0,g=0,y=0;return w(),{dispose:b};function w(){e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),e.addEventListener("keydown",A),e.addEventListener("keyup",E)}function b(){e.removeEventListener("keydown",A),e.removeEventListener("keyup",E),cancelAnimationFrame(n)}function S(){n=0;var m=.9,x=!1;if(s=dt(s*m+r,.5,0),a=dt(a*m+i,.5,0),l=dt(l*m+o,.5,0),(s||a)&&(t.panByAbsoluteOffset(s,a),x=!0),l&&(t.slideCenterUpDown(l),x=!0),u=dt(u*m+f/2,Math.PI/360,0),g=dt(g*m+y/6,Math.PI/360,0),(u||g)&&(t.rotateByAbsoluteOffset(u,g),x=!0),d=dt(d*.7+h,.5,0),d){var P=Math.sign(d)*.025;t.zoomCenterByScaleFactor(P,0,0),x=!0}x&&(t.redraw(),C())}function C(){n||(n=requestAnimationFrame(S))}function A(m){T(m,1)}function E(m){T(m,0)}function T(m,x){if(!zd(m)){switch(m.which){case 81:f=-x;break;case 69:f=x;break;case 187:h=x;break;case 189:h=-x;break;case 82:y=x;break;case 70:y=-x;break;case 37:case 65:r=x;break;case 39:case 68:r=-x;break;case 38:case 87:i=x;break;case 40:case 83:i=-x;break;case 71:o=-x;break;case 84:o=x;break}C()}}}function zd(e){return e.altKey||e.ctrlKey||e.metaKey}function Hd(e,t){var n,r,i,o=t.allowRotation,s=t.panAnimation,a=t.rotateAnimation;return e.addEventListener("wheel",g,{passive:!1}),e.addEventListener("mousedown",u,{passive:!1}),e.addEventListener("dblclick",h,{passive:!1}),{dispose:l};function l(){e.removeEventListener("wheel",g,{passive:!1}),e.removeEventListener("mousedown",u,{passive:!1}),e.removeEventListener("dblclick",h,{passive:!1}),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",d)}function u(w){var b=w.button===1&&window.event!==null||w.button===0;!b||(document.addEventListener("mousemove",f),document.addEventListener("mouseup",d),n=w.clientX,r=w.clientY,i=w.altKey&&o,s.cancel(),a.cancel(),i?a.start():s.start())}function f(w){var b=w.clientY-r,S=w.clientX-n;i?t.rotateByAbsoluteOffset(S,b):t.panByAbsoluteOffset(S,b),n=w.clientX,r=w.clientY,t.redraw()}function d(){document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",d),i?a.stop():s.stop()}function h(w){t.zoomToClientCoordinates(w.clientX,w.clientY,.5,!0),w.preventDefault(),w.stopPropagation()}function g(w){var b=w.deltaMode>0?100:1,S=y(-w.deltaY*b);t.zoomToClientCoordinates(w.clientX,w.clientY,S),w.preventDefault()}function y(w){return Math.sign(w)*Math.min(.25,Math.abs(w/128))}}function Ao(e,t){if(typeof e=="string"){var n=document.querySelector(e);if(!n)throw new Error("Cannot resolve input target element: "+e);return n}return e||t}var xl=function(t){this.drawContext=t.getDrawContext(),this.updated=!1};function _l(e){var t=e.getDrawContext(),n=t.view,r=Math.PI*2,i=Math.PI*1.618,o=new xl(e),s=e.getOptions()||{},a=s.allowRotation===void 0?!0:!!s.allowRotation,l=s.allowPinchRotation===void 0?a:!!s.allowPinchRotation,u=Dt(s.minPhi,-1/0),f=Dt(s.maxPhi,1/0),d=Je(-Math.PI/2,u,f),h=Dt(s.minTheta,0),g=Dt(s.maxTheta,Math.PI),y=Je(0,h,g),w=Dt(s.minZoom,-1/0),b=Dt(s.maxZoom,1/0),S=Je(1,w,b),C=n.center,A=n.position,E=Cs(Y,re),T=Cs(X,te,{minVelocity:1}),m=[0,0,1],x={dispose:H,setViewBox:j,panByAbsoluteOffset:q,slideCenterUpDown:V,rotateByAngle:k,rotateByAbsoluteOffset:$,zoomCenterByScaleFactor:ve,zoomToClientCoordinates:Z,redraw:Me,allowRotation:a,allowPinchRotation:l,rotateAnimation:T,panAnimation:E},P=Ao(s.inputTarget,t.canvas),L=Ud(P,x),B=Vd(P,x),R=Hd(P,x);return Me(),x;function j(){return A=n.position,S=Math.hypot(A[2]),C[0]=A[0],C[1]=A[1],C[2]=0,y=Je(0,h,g),d=Je(-Math.PI/2,u,f),Me(),x}function H(){T.cancel(),E.cancel(),B.dispose(),L.dispose(),R.dispose()}function W(oe,de){var ue=e.getSceneCoordinate(oe,de),le=Fn(ue,ue,A);Wr(le,le);var ke=Ui(m,le);if(Math.abs(ke)>1e-7){var Ne=Ui(Fn([0,0,0],C,A),m)/ke;return Eo([0,0,0],A,le,Ne)}}function k(oe,de){d=Je(d+oe,u,f),y=Je(y+de,h,g)}function $(oe,de){if(!!a){var ue=t.width/t.height;d-=r*oe/t.width,y-=i*de/t.height*ue,y=Je(y,h,g),d=Je(d,u,f)}}function q(oe,de){var ue=t.width/t.height,le=2*S*Math.tan(t.fov/2),ke=ue*le*oe/(t.width/t.pixelRatio),Ne=le*de/(t.height/t.pixelRatio);z(ke,-Ne)}function Z(oe,de,ue,le){var ke=W(oe,de);if(!!ke){var Ne=ke[0]-C[0],c=ke[1]-C[1];if(le){var p={r:S,x:C[0],y:C[1]},v={r:Je(S*(1-ue),w,b),x:p.x+Ne*ue,y:p.y+c*ue};Co(p,v,{step:function(M){S=M.r,C[0]=M.x,C[1]=M.y,Me()}})}else ve(ue,Ne,c),Me()}}function z(oe,de){var ue=Math.cos(d),le=Math.sin(d);C[0]+=ue*de+le*oe,C[1]+=le*de-ue*oe}function V(oe){C[2]+=oe*S*.001}function Y(){return{x:C[0],y:C[1],z:C[2]}}function X(){return{x:d,y,z:0}}function te(oe,de){y=Je(de,h,g),d=Je(oe,u,f),Me()}function re(oe,de,ue){Er(C,oe,de,ue),Me()}function ve(oe,de,ue){var le=Je(S*(1-oe),w,b);le!==S&&(S=le,C[0]+=de*oe,C[1]+=ue*oe)}function Me(){var oe=As(S,y,d),de=Math.hypot(S,1),ue=y-Math.acos(S/de),le=As(de,ue,d);if(Fn(le,le,oe),Er(A,oe[0],oe[1],oe[2]),sd(A,A,C),_o(n.cameraWorld,A,C,le),xo(n.orientation,n.cameraWorld),n.update(),o.updated=!1,e.fire("transform",o),o.updated){Me();return}e.getRoot().scheduleMVPUpdate(),e.renderFrame()}}$c(Float64Array);function Hi(e,t){t===void 0&&(t={});var n,r,i=t.devicePixelRatio||window.devicePixelRatio,o=t.wglContextOptions,s=e.getContext(t.version===2?"webgl2":"webgl",o)||e.getContext("experimental-webgl",o);s.enable(s.BLEND),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA),s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);var a=0,l=new Ae,u=!1,f=!1,d=Ao(t.inputTarget,e),h,g=new $t,y=Ft(),w=Ft(),b=t.fov===void 0?Math.PI*45/180:t.fov,S=t.near===void 0?.01:t.near,C=t.far===void 0?1/0:t.far,A={width:window.innerWidth,height:window.innerHeight,pixelRatio:i,canvas:e,projection:y,inverseProjection:w,view:g,fov:b};X();var E=jr({appendChild:ke,getSceneCoordinate:ve,getClientCoordinate:Me,getTransform:$,getRoot:H,getGL:j,removeChild:Ne,setViewBox:oe,setClearColor:q,getClearColor:Z,clear:le,dispose:V,renderFrame:de,getPixelRatio:P,setPixelRatio:R,getCameraController:k,setCameraController:W,getDrawContext:L,getOptions:B}),T=E.on;E.on=c,l.bindScene(E);var m=(t.controls||_l)(E),x;return z(),de(),E;function P(){return i}function L(){return A}function B(){return t}function R(p){i=p,A.pixelRatio=i,X()}function j(){return s}function H(){return l}function W(p){return m&&m.dispose(),m=p(E,A),m}function k(){return m}function $(){return l.model}function q(p,v,_,M){s.clearColor(p,v,_,M)}function Z(){return s.getParameter(s.COLOR_CLEAR_VALUE)}function z(){d.addEventListener("mousemove",re),x=vd(d,te),window.addEventListener("resize",Y,!0)}function V(){d.removeEventListener("mousemove",re),x&&x(),window.removeEventListener("resize",Y,!0),m.dispose(),l.dispose(),a&&(cancelAnimationFrame(a),a=0)}function Y(){X()}function X(){t.size?(n=e.width=t.size.width,r=e.height=t.size.height):(n=e.width=e.offsetWidth*i,r=e.height=e.offsetHeight*i),h=e.getBoundingClientRect(),s.viewport(0,0,n,r),A.width=n,A.height=r,l.worldTransformNeedsUpdate=!0,nd(y,b,n/r,S,C),Hn(w,y),de()}function te(p){if(!!u){var v=ve(p.clientX,p.clientY);!v||E.fire("click",{originalEvent:p,x:v[0],y:v[1],z:v[2]})}}function re(p){if(!!f){var v=ve(p.clientX,p.clientY);!v||E.fire("mousemove",{originalEvent:p,x:v[0],y:v[1],z:v[2]})}}function ve(p,v){p-=h.left,v-=h.top;var _=E.getPixelRatio(),M=_*p/n*2-1,F=(1-_*v/r)*2-1,O=[0,0,0],I=hn(O,[M,F,0],w);hn(I,I,g.cameraWorld),Fn(I,I,g.position),Wr(I,I);var U=0,N=(U-g.position[2])/I[2];return I[2]>0,Eo(I,g.position,I,N),I}function Me(p,v,_){_===void 0&&(_=0);var M=Ht(Ft(),y,g.matrix);Ht(M,M,l.model);var F=dl([0,0,0,0],[p,v,_,1],M),O=E.getPixelRatio(),I=n*(F[0]/F[3]+1)*.5/O,U=r*(1-(F[1]/F[3]+1)*.5)/O;return{x:I,y:U}}function oe(p){var v=A.pixelRatio,_=v*Math.max((p.top-p.bottom)/2,(p.right-p.left)/2),M=A.view,F=M.position,O=M.orientation;F[0]=(p.left+p.right)/2,F[1]=(p.top+p.bottom)/2,F[2]=_/Math.tan(A.fov/2),hl(O,0,0,0,1),A.view.update(),m.setViewBox&&m.setViewBox(p)}function de(p){if(p===void 0&&(p=!1),p)return ue();a||(a=requestAnimationFrame(ue))}function ue(){s.clear(s.COLOR_BUFFER_BIT),l.updateWorldTransform(),l.draw(s,A),a=0}function le(){s.clear(s.COLOR_BUFFER_BIT)}function ke(p,v){v===void 0&&(v=!1),l.appendChild(p,v),E.fire("append-child",p)}function Ne(p){l.removeChild(p),E.fire("remove-child",p)}function c(p,v,_){return p==="click"&&(u=!0),p==="mousemove"&&(f=!0),T(p,v,_)}}var $e={compile:$d,link:jd,getLocations:Wd,getAttributes:El,getUniforms:Cl,initBuffer:qd};function $d(e,t,n){var r=e.createShader(t);if(!r)throw new Error("Failed to create a shared "+n);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(r)||"Failed to compile shader "+n);return r}function jd(e,t,n){var r=e.createProgram();if(!r)throw new Error("Failed to link a program");if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error(e.getProgramInfoLog(r)||"Failed to link a program");return r}function Wd(e,t){return{attributes:El(e,t),uniforms:Cl(e,t)}}function El(e,t){for(var n=Object.create(null),r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;++i){var o=e.getActiveAttrib(t,i);if(o){var s=o.name;n[s]=e.getAttribLocation(t,s)}}return n}function Cl(e,t){for(var n=Object.create(null),r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);if(o){var s=o.name;n[s]=e.getUniformLocation(t,s)}}return n}function qd(e,t,n,r){var i=e.createBuffer();if(!i)throw new Error("Failed to create a buffer");e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.vertexAttribPointer(r,n,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)}function Yr(){var e=new Map;return{get:t,set:n,remove:r};function t(i){if(!!i){for(var o=e,s,a=0;a<i.length;++a){var l=i[a];if(s=o.get(l),!s)return;o=s}return s}}function n(i,o){for(var s=e,a=0;a<i.length-1;++a){var l=i[a],u=s.get(l);u||(u=new Map,s.set(l,u)),s=u}s.set(i[i.length-1],o)}function r(i){for(var o=e,s=0;s<i.length-1;++s){var a=i[s],l=o.get(a);if(!l)return;o=l}o.delete(i[i.length-1])}}var li=Yr();function Gd(e,t){var n=!!t.allowColors,r=[n,e],i=li.get(r);if(!i){var o=Yd(n),s=o.fragmentShaderCode,a=o.vertexShaderCode,l=$e.compile(e,e.VERTEX_SHADER,a),u=$e.compile(e,e.FRAGMENT_SHADER,s);i=$e.link(e,l,u),li.set(r,i)}var f=$e.getLocations(e,i),d=e.getExtension("ANGLE_instanced_arrays");if(!d)throw new Error("PointCollection requires instancing. Please ping @anvaka so that we can add fallback");var h=e.createBuffer();if(!h)throw new Error("failed to create a nodesBuffer");var g=e.createBuffer(),y=new Float32Array([-.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5]),w=t.is3D?3:2,b=w*4,S=(w+1)*4,C=(w+2)*4,A=(w+1)*4;return{draw:T,dispose:E};function E(){e.deleteProgram(i),li.remove(r)}function T(m){if(!!t.count){if(e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.useProgram(i),e.uniformMatrix4fv(f.uniforms.uModel,!1,t.worldModel),e.uniformMatrix4fv(f.uniforms.projectionMatrix,!1,m.projection),e.uniformMatrix4fv(f.uniforms.uView,!1,m.view.matrix),e.bindBuffer(e.ARRAY_BUFFER,g),e.bufferData(e.ARRAY_BUFFER,y,e.STATIC_DRAW),e.enableVertexAttribArray(f.attributes.aPoint),e.vertexAttribPointer(f.attributes.aPoint,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,t.buffer,e.DYNAMIC_DRAW),n)e.enableVertexAttribArray(f.attributes.aPosition),e.vertexAttribPointer(f.attributes.aPosition,w,e.FLOAT,!1,C,0),e.enableVertexAttribArray(f.attributes.aPointSize),e.vertexAttribPointer(f.attributes.aPointSize,1,e.FLOAT,!1,C,b),e.enableVertexAttribArray(f.attributes.aColor),e.vertexAttribPointer(f.attributes.aColor,4,e.UNSIGNED_BYTE,!0,C,S);else{e.enableVertexAttribArray(f.attributes.aPosition),e.vertexAttribPointer(f.attributes.aPosition,w,e.FLOAT,!1,A,0),e.enableVertexAttribArray(f.attributes.aPointSize),e.vertexAttribPointer(f.attributes.aPointSize,1,e.FLOAT,!1,A,b);var x=t.color;e.uniform4f(f.uniforms.uColor,x.r,x.g,x.b,x.a)}d.vertexAttribDivisorANGLE(f.attributes.aPoint,0),d.vertexAttribDivisorANGLE(f.attributes.aPosition,1),d.vertexAttribDivisorANGLE(f.attributes.aPointSize,1),d.vertexAttribDivisorANGLE(f.attributes.aColor,1),d.drawArraysInstancedANGLE(e.TRIANGLES,0,6,t.count),d.vertexAttribDivisorANGLE(f.attributes.aPosition,0),d.vertexAttribDivisorANGLE(f.attributes.aPoint,0),d.vertexAttribDivisorANGLE(f.attributes.aPointSize,0),d.vertexAttribDivisorANGLE(f.attributes.aColor,0),e.disable(e.DEPTH_TEST)}}}function Yd(e){var t=`
  precision highp float;
  varying vec4 vColor;
  varying vec3 vPosition;

  void main() {
    float dist = length(vPosition);

    if (dist >= 0.5) {discard;}
    gl_FragColor = vColor;
  }
  `,n=`
  uniform vec4 uColor;
  uniform mat4 projectionMatrix;
  uniform mat4 uModel;
  uniform mat4 uView;

  attribute float aPointSize;
  attribute vec3 aPosition;
  attribute vec3 aPoint;
  `+(e?"attribute vec4 aColor;":"")+`

  varying vec4 vColor;
  varying vec3 vPosition;

  void main() {
    vPosition = aPoint;
    gl_Position = projectionMatrix * uView * uModel * vec4( aPosition + aPoint * aPointSize, 1.0 );
    vColor = `+(e?"aColor.abgr":"uColor")+`;
  }
`;return{fragmentShaderCode:t,vertexShaderCode:n}}var To=function(t,n,r,i){i===void 0&&(i=1),this.r=t,this.g=n,this.b=r,this.a=i===void 0?1:i},So=function(t,n,r){this.offset=n,this._points=t,r!==void 0&&(this.data=r)};So.prototype.update=function(t){var n=this.offset,r=this._points.positions,i=this._points.is3D;r[n]=t.x,n++,r[n]=t.y,n++,i&&(r[n]=t.z||0,n++);var o=t.size||this._points.size||1;o!==void 0&&(r[n]=o),this.setColor(t.color)};So.prototype.setColor=function(t){if(!(!this._points.colors||t===void 0)){var n=this.offset+(this._points.is3D?4:3);this._points.colors[n]=t}};var Kd=function(e){function t(n,r){if(n===void 0)throw new Error("Point capacity should be defined");e.call(this),this.is3D=!r||r.is3D===void 0||r.is3D,this.allowColors=!r||r.allowColors===void 0||r.allowColors,this.itemsPerPoint=3,this.is3D&&(this.itemsPerPoint+=1),this.allowColors&&(this.itemsPerPoint+=1),this.capacity=n,this.count=0,this.color=new To(1,1,1,1),this._program=null,this.buffer=new ArrayBuffer(n*this.itemsPerPoint*4),this.positions=new Float32Array(this.buffer),this.colors=this.allowColors?new Uint32Array(this.buffer):null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.draw=function(r,i){this._program||(this._program=Gd(r,this)),this._program.draw(i)},t.prototype.dispose=function(){this._program&&(this._program=null)},t.prototype.add=function(r,i){if(!r)throw new Error("Point is required");this.count>=this.capacity&&this._extendArray();var o=this.count*this.itemsPerPoint,s=new So(this,o,i);return s.update(r),this.count+=1,s},t.prototype._extendArray=function(){var r=new ArrayBuffer(this.buffer.byteLength*2),i=new Float32Array(r);this.positions&&i.set(this.positions),this.buffer=r,this.positions=i,this.allowColors&&(this.colors=new Uint32Array(r)),this.capacity*=2},t}(Ae),ui=Yr();function $i(e,t){var n=!!t.allowColors,r=[n,e],i=ui.get(r);if(!i){var o=Xd(n),s=o.frag,a=o.vert,l=$e.compile(e,e.VERTEX_SHADER,a),u=$e.compile(e,e.FRAGMENT_SHADER,s);i=$e.link(e,l,u),ui.set(r,i)}var f=$e.getLocations(e,i),d=e.createBuffer(),h=t.is3D?3:2,g=(h+1)*4,y=h*4,w={draw:S,dispose:b};return w;function b(){e.deleteBuffer(d),e.deleteProgram(i),ui.remove(r)}function S(C){if(t.count!==0){var A=t.buffer;e.useProgram(i),e.uniformMatrix4fv(f.uniforms.uModel,!1,t.worldModel),e.uniformMatrix4fv(f.uniforms.projectionMatrix,!1,C.projection),e.uniformMatrix4fv(f.uniforms.uView,!1,C.view.matrix);var E=t.color;e.uniform4f(f.uniforms.uColor,E.r,E.g,E.b,E.a),e.bindBuffer(e.ARRAY_BUFFER,d),t.isDirtyBuffer&&(e.bufferData(e.ARRAY_BUFFER,A,e.STATIC_DRAW),t.isDirtyBuffer=!1),e.enableVertexAttribArray(f.attributes.aPosition),n?(e.vertexAttribPointer(f.attributes.aPosition,h,e.FLOAT,!1,g,0),e.enableVertexAttribArray(f.attributes.aColor),e.vertexAttribPointer(f.attributes.aColor,4,e.UNSIGNED_BYTE,!0,g,y)):e.vertexAttribPointer(f.attributes.aPosition,h,e.FLOAT,!1,4*h,0),e.drawArrays(e.LINES,0,t.count*2)}}}function Xd(e){return{vert:`attribute vec3 aPosition;
  varying vec4 vColor;
  `+(e?"attribute vec4 aColor;":"")+`
  uniform vec4 uColor;
  uniform mat4 projectionMatrix;
  uniform mat4 uModel;
  uniform mat4 uView;

void main() {
  gl_Position = projectionMatrix * uView * uModel * vec4(aPosition, 1.0);
  vColor = `+(e?"aColor.abgr":"uColor")+`;
}`,frag:`precision mediump float;
    varying vec4 vColor;
    void main() {
      gl_FragColor = vColor;
    }`}}var fi=Yr();function Zd(e,t){var n=Number.isFinite(t.width)&&t.width>0&&t.width!==1,r;if(n){if(r=e.getExtension("ANGLE_instanced_arrays"),!r)return console.error("ANGLE_instanced_arrays is not supported, thick lines are not possible"),$i(e,t)}else return $i(e,t);var i=!!t.allowColors,o=[i,e],s=fi.get(o);if(!s){var a=Qd(i),l=a.frag,u=a.vert,f=$e.compile(e,e.VERTEX_SHADER,u),d=$e.compile(e,e.FRAGMENT_SHADER,l);s=$e.link(e,f,d),fi.set(o,s)}var h=$e.getLocations(e,s),g=e.createBuffer(),y=t.is3D?3:2,w=i?2*(y+1)*4:2*y*4,b=e.createBuffer(),S=new Float32Array([-.5,0,-.5,1,.5,1,-.5,0,.5,1,.5,0]),C={isThickWire:!0,draw:E,dispose:A};return C;function A(){g&&e.deleteBuffer(g),b&&e.deleteBuffer(b),h&&(e.disableVertexAttribArray(h.attributes.aFrom),e.disableVertexAttribArray(h.attributes.aFromColor),e.disableVertexAttribArray(h.attributes.aTo),e.disableVertexAttribArray(h.attributes.aToColor),e.disableVertexAttribArray(h.attributes.aPosition)),e.deleteProgram(s),fi.remove(o)}function E(T){if(t.count!==0){var m=t.buffer;e.useProgram(s),e.uniformMatrix4fv(h.uniforms.uModel,!1,t.worldModel),e.uniformMatrix4fv(h.uniforms.projectionMatrix,!1,T.projection),e.uniformMatrix4fv(h.uniforms.uView,!1,T.view.matrix),e.uniform3fv(h.uniforms.uOrigin,T.view.position),e.uniform1f(h.uniforms.uWidth,t.width),e.uniform2f(h.uniforms.uResolution,T.width,T.height);var x=t.color;e.uniform4f(h.uniforms.uColor,x.r,x.g,x.b,x.a),e.bindBuffer(e.ARRAY_BUFFER,b),e.bufferData(e.ARRAY_BUFFER,S,e.STATIC_DRAW),e.enableVertexAttribArray(h.attributes.aPosition),e.vertexAttribPointer(h.attributes.aPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,g),e.bufferData(e.ARRAY_BUFFER,m,e.DYNAMIC_DRAW),e.enableVertexAttribArray(h.attributes.aFrom),e.vertexAttribPointer(h.attributes.aFrom,y,e.FLOAT,!1,w,0),i?(e.enableVertexAttribArray(h.attributes.aFromColor),e.vertexAttribPointer(h.attributes.aFromColor,4,e.UNSIGNED_BYTE,!0,w,y*4),e.enableVertexAttribArray(h.attributes.aTo),e.vertexAttribPointer(h.attributes.aTo,y,e.FLOAT,!1,w,(y+1)*4),e.enableVertexAttribArray(h.attributes.aToColor),e.vertexAttribPointer(h.attributes.aToColor,4,e.UNSIGNED_BYTE,!0,w,(2*y+1)*4)):(e.enableVertexAttribArray(h.attributes.aTo),e.vertexAttribPointer(h.attributes.aTo,y,e.FLOAT,!1,w,y*4)),r.vertexAttribDivisorANGLE(h.attributes.aPosition,0),r.vertexAttribDivisorANGLE(h.attributes.aTo,1),r.vertexAttribDivisorANGLE(h.attributes.aFrom,1),r.vertexAttribDivisorANGLE(h.attributes.aFromColor,1),r.vertexAttribDivisorANGLE(h.attributes.aToColor,1),r.drawArraysInstancedANGLE(e.TRIANGLES,0,6,t.count),r.vertexAttribDivisorANGLE(h.attributes.aFrom,0),r.vertexAttribDivisorANGLE(h.attributes.aTo,0),r.vertexAttribDivisorANGLE(h.attributes.aFromColor,0),r.vertexAttribDivisorANGLE(h.attributes.aToColor,0)}}}function Qd(e){return{vert:`attribute vec3 aPosition, aFrom, aTo;
    varying vec4 vColor;
    `+(e?"attribute vec4 aFromColor, aToColor;":"")+`
    uniform vec4 uColor;
    uniform mat4 projectionMatrix;
    uniform mat4 uModel;
    uniform mat4 uView;
    uniform float uWidth;
    uniform vec2 uResolution;
  
  void main() {
    // let's get the model point to clip space:
    vec4 clip0 = projectionMatrix * uView * uModel * vec4(aFrom, 1.0);
    vec4 clip1 = projectionMatrix * uView * uModel * vec4(aTo, 1.0);

    // And from the clip space move to the screen pixels 
    // (as we set width of the lines in pixels)
    vec2 screen0 = uResolution * (0.5 * clip0.xy/clip0.w + 0.5);
    vec2 screen1 = uResolution * (0.5 * clip1.xy/clip1.w + 0.5);

    // this is direction along the x axis
    vec2 xBasis = normalize(screen1 - screen0);
    // But since we set the width, we get the direction along the Y:
    vec2 yBasis = vec2(-xBasis.y, xBasis.x);

    // Offset the original points:
    vec2 pt0 = screen0 + uWidth * aPosition.x * yBasis;
    vec2 pt1 = screen1 + uWidth * aPosition.x * yBasis;

    // and interpolate along the Y of the instanced geometry 
    // (remember, Y changes from 0 to 1):
    vec2 pt = mix(pt0, pt1, aPosition.y);
    vec4 clip = mix(clip0, clip1, aPosition.y);

    // Finally move back to the clip space:
    gl_Position = vec4(clip.w * (2.0 * pt/uResolution - 1.0), clip.z, clip.w);
    vColor = `+(e?"mix(aFromColor.abgr, aToColor.abgr, aPosition.y)":"uColor")+`;
  }`,frag:`precision mediump float;
    varying vec4 vColor;
    void main() {
      gl_FragColor = vColor;
    }`}}var Mo=function(t,n){this.offset=n,this._wire=t,this.update=t.is3D?this.update3D:this.update2D};Mo.prototype.update2D=function(t,n){this._wire.isDirtyBuffer=!0;var r=this._wire.positions,i=this.offset;r[i+0]=t.x,r[i+1]=t.y,i+=2;var o=this._wire.allowColors;o&&(t.color!==void 0&&(this._wire.colors[i]=t.color),i+=1),r[i+0]=n.x,r[i+1]=n.y,o&&n.color!==void 0&&(this._wire.colors[i+2]=n.color)};Mo.prototype.update3D=function(t,n){this._wire.isDirtyBuffer=!0;var r=this._wire.positions,i=this.offset;r[i+0]=t.x,r[i+1]=t.y,r[i+2]=t.z||0,i+=3;var o=this._wire.allowColors;o&&(t.color!==void 0?this._wire.colors[i]=t.color:this._wire.colors[i]=Ts(this._wire.color),i+=1),r[i+0]=n.x,r[i+1]=n.y,r[i+2]=n.z||0,o&&(n.color!==void 0?this._wire.colors[i+3]=n.color:this._wire.colors[i+3]=Ts(this._wire.color))};function Ts(e){var t=Math.round(e.r*255),n=Math.round(e.g*255),r=Math.round(e.b*255),i=Math.round(e.a*255);return t<<24|n<<16|r<<8|i}function Jd(e,t,n){n===void 0&&(n=.5);var r=Ss(e),i=Ss(t);return[r[0]*n+(1-n)*i[0],r[1]*n+(1-n)*i[1],r[2]*n+(1-n)*i[2],r[3]*n+(1-n)*i[3]]}function Ss(e){return[e>>24&255/255,e>>16&255/255,e>>8&255/255,e&255/255]}function ji(e){var t=ci(e[0]),n=ci(e[1]),r=ci(e[2]);return"#"+t+n+r}function ci(e){var t=Math.floor(e*255).toString(16);return t.length===1?"0"+t:t}var Ln=function(e){function t(n,r){e.call(this);var i=4;this.allowColors=!r||r.allowColors===void 0||r.allowColors,this.is3D=!r||r.is3D===void 0||r.is3D,this.itemsPerLine=4,this.is3D&&(this.itemsPerLine+=2),this.allowColors&&(this.itemsPerLine+=2),this.capacity=n,this.count=0,this.color=new To(1,1,1,1),this.type="WireCollection",this._program=null,this.buffer=new ArrayBuffer(n*this.itemsPerLine*i),this.positions=new Float32Array(this.buffer),this.width=r&&r.width||1,this.allowColors?this.colors=new Uint32Array(this.buffer):this.colors=null,this.isDirtyBuffer=!0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.draw=function(r,i){this._program||(this._program=Ms(this.width)?Zd(r,this):$i(r,this)),this._program.draw(i)},t.prototype.setLineWidth=function(r){if(r!==this.width){var i=Ms(r);if(this.width=r,!(!this._program||!this.scene)){if(i&&this._program.isThickWire){this.scene.renderFrame();return}if(this.parent){var o=this.parent;o.removeChild(this),this.dispose(),o.appendChild(this)}}}},t.prototype.add=function(r){if(!r)throw new Error("Line is required");this.count>=this.capacity&&this._extendArray();var i=this.count*this.itemsPerLine,o=new Mo(this,i);return o.update(r.from,r.to),this.count+=1,o},t.prototype.getLineColor=function(r,i){return this.allowColors&&r&&r.color&&i&&i.color?Jd(r.color,i.color):[this.color.r,this.color.g,this.color.b,this.color.a]},t.prototype.forEachLine=function(r){var i=this,o=i.positions,s=i.count,a=i.itemsPerLine,l=s*a;if(this.is3D)for(var u=0;u<l;u+=a){var f={x:o[u],y:o[u+1],z:o[u+2]},d=u+3;this.colors&&(f.color=this.colors[u+3],d+=1);var h={x:o[d],y:o[d+1],z:o[d+2]};this.colors&&(h.color=this.colors[d+3]),r(f,h)}else for(var g=0;g<l;g+=a){var y={x:o[g],y:o[g+1],z:0},w=g+2;this.colors&&(y.color=this.colors[g+2],w+=1);var b={x:o[w],y:o[w+1],z:0};this.colors&&(b.color=this.colors[w+2]),r(y,b)}},t.prototype.dispose=function(){this._program&&(this._program=null)},t.prototype._extendArray=function(){var r=new ArrayBuffer(this.buffer.byteLength*2),i=new Float32Array(r);this.positions&&i.set(this.positions),this.buffer=r,this.positions=i,this.allowColors&&(this.colors=new Uint32Array(r)),this.capacity*=2},t}(Ae);function Ms(e){return e!==void 0&&e!==1&&e>0}var di=Yr();function eh(e,t){var n=t.allowColors,r=t.is3D;n=!!n;var i=[n,e],o=di.get(i),s=2+(n?1:0)+(r?1:0),a=t.buffer;if(!o){var l=th(n),u=l.lineFSSrc,f=l.lineVSSrc,d=$e.compile(e,e.VERTEX_SHADER,f),h=$e.compile(e,e.FRAGMENT_SHADER,u);o=$e.link(e,d,h),di.set(i,o)}var g=$e.getLocations(e,o),y=r?3:2,w=(y+1)*4,b=y*4,S=e.createBuffer(),C={draw:E,dispose:A};return C;function A(){e.deleteBuffer(S),e.deleteProgram(o),di.remove(i)}function E(T,m){if(a.length!==0){e.useProgram(o),e.uniformMatrix4fv(g.uniforms.uModel,!1,T.worldModel),e.uniformMatrix4fv(g.uniforms.projectionMatrix,!1,m.projection),e.uniformMatrix4fv(g.uniforms.uView,!1,m.view.matrix),e.uniform3fv(g.uniforms.uOrigin,m.view.position);var x=T.color,P=T.nextElementIndex,L=T.madeFullCircle;if(e.uniform4f(g.uniforms.uColor,x.r,x.g,x.b,x.a),e.bindBuffer(e.ARRAY_BUFFER,S),e.enableVertexAttribArray(g.attributes.aPosition),e.bufferData(e.ARRAY_BUFFER,a,e.DYNAMIC_DRAW),n?(e.vertexAttribPointer(g.attributes.aPosition,y,e.FLOAT,!1,w,0),e.enableVertexAttribArray(g.attributes.aColor),e.vertexAttribPointer(g.attributes.aColor,4,e.UNSIGNED_BYTE,!0,w,b)):e.vertexAttribPointer(g.attributes.aPosition,y,e.FLOAT,!1,0,0),L){var B=a.byteLength/4/s-P;e.drawArrays(e.LINE_STRIP,P,B),P>1&&e.drawArrays(e.LINE_STRIP,0,P-1)}else e.drawArrays(e.LINE_STRIP,1,P-1)}}}function th(e){var t=`precision mediump float;
varying vec4 vColor;
void main() {
  gl_FragColor = vColor;
}
`,n=`attribute vec3 aPosition;
  varying vec4 vColor;
  `+(e?"attribute vec4 aColor;":"")+`
  uniform vec4 uColor;
  uniform mat4 projectionMatrix;
  uniform mat4 uModel;
  uniform mat4 uView;
  void main() {
    gl_Position = projectionMatrix * uView * uModel * vec4(aPosition, 1.0);
    vColor = `+(e?"aColor.abgr":"uColor")+`;
  }`;return{lineVSSrc:n,lineFSSrc:t}}var nh=function(e){function t(n,r){e.call(this);var i=4;this.drawCount=0,this.madeFullCircle=!1,this.allowColors=!r||r.allowColors===void 0||r.allowColors,this.is3D=!r||r.is3D===void 0||r.is3D,this.itemsPerLine=2,this.allowColors&&(this.itemsPerLine+=1),this.is3D&&(this.itemsPerLine+=1),this.capacity=n,this.nextElementIndex=1,this._program=null,this.color=new To(1,1,1,1),this.buffer=new ArrayBuffer((n+1)*this.itemsPerLine*i),this.positions=new Float32Array(this.buffer),this.allowColors?this.colors=new Uint32Array(this.buffer):this.colors=null}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.draw=function(r,i){this._program||(this._program=eh(r,this)),this._program.draw(this,i)},t.prototype.add=function(r){var i=this.nextElementIndex*this.itemsPerLine,o=this.positions;if(o[i]=r.x,i+=1,o[i]=r.y,i+=1,this.is3D&&(o[i]=r.z||0,i+=1),this.colors&&(this.colors[i]=r.color===void 0?4294967295:r.color),this.nextElementIndex+=1,this.drawCount+=1,this.nextElementIndex>this.capacity){this.nextElementIndex=1;var s=0;o[s]=r.x,s+=1,o[s]=r.y,s+=1,this.is3D&&(o[s]=r.z||0,s+=1),this.colors&&(this.colors[s]=this.colors[i]),this.madeFullCircle=!0}},t.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null)},t}(Ae);function Al(e){try{return window.WebGLRenderingContext?(e||(e=document.createElement("canvas")),!!(e.getContext("webgl")||e.getContext("experimental-webgl"))):!1}catch{return!1}}var Ps=rh;function rh(e){if(e=e||{},"uniqueLinkId"in e&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),e.multigraph=e.uniqueLinkId),e.multigraph===void 0&&(e.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var t=new Map,n=[],r={},i=0,o=e.multigraph?E:A,s=[],a=k,l=k,u=k,f=k,d={addNode:w,addLink:C,removeLink:P,removeNode:S,getNode:b,getNodeCount:T,getLinkCount:m,getLinksCount:m,getNodesCount:T,getLinks:x,forEachNode:Z,forEachLinkedNode:j,forEachLink:R,beginUpdate:u,endUpdate:f,clear:B,hasLink:L,hasNode:b,getLink:L};return jr(d),h(),d;function h(){var z=d.on;d.on=V;function V(){return d.beginUpdate=u=$,d.endUpdate=f=q,a=g,l=y,d.on=z,z.apply(d,arguments)}}function g(z,V){s.push({link:z,changeType:V})}function y(z,V){s.push({node:z,changeType:V})}function w(z,V){if(z===void 0)throw new Error("Invalid node identifier");u();var Y=b(z);return Y?(Y.data=V,l(Y,"update")):(Y=new ih(z,V),l(Y,"add")),t.set(z,Y),f(),Y}function b(z){return t.get(z)}function S(z){var V=b(z);if(!V)return!1;u();var Y=V.links;if(Y){V.links=null;for(var X=0;X<Y.length;++X)P(Y[X])}return t.delete(z),l(V,"remove"),f(),!0}function C(z,V,Y){u();var X=b(z)||w(z),te=b(V)||w(V),re=o(z,V,Y);return n.push(re),Fs(X,re),z!==V&&Fs(te,re),a(re,"add"),f(),re}function A(z,V,Y){var X=pi(z,V);return new Ls(z,V,Y,X)}function E(z,V,Y){var X=pi(z,V),te=r.hasOwnProperty(X);if(te||L(z,V)){te||(r[X]=0);var re="@"+ ++r[X];X=pi(z+re,V+re)}return new Ls(z,V,Y,X)}function T(){return t.size}function m(){return n.length}function x(z){var V=b(z);return V?V.links:null}function P(z){if(!z)return!1;var V=hi(z,n);if(V<0)return!1;u(),n.splice(V,1);var Y=b(z.fromId),X=b(z.toId);return Y&&(V=hi(z,Y.links),V>=0&&Y.links.splice(V,1)),X&&(V=hi(z,X.links),V>=0&&X.links.splice(V,1)),a(z,"remove"),f(),!0}function L(z,V){var Y=b(z),X;if(!Y||!Y.links)return null;for(X=0;X<Y.links.length;++X){var te=Y.links[X];if(te.fromId===z&&te.toId===V)return te}return null}function B(){u(),Z(function(z){S(z.id)}),f()}function R(z){var V,Y;if(typeof z=="function")for(V=0,Y=n.length;V<Y;++V)z(n[V])}function j(z,V,Y){var X=b(z);if(X&&X.links&&typeof V=="function")return Y?W(X.links,z,V):H(X.links,z,V)}function H(z,V,Y){for(var X,te=0;te<z.length;++te){var re=z[te],ve=re.fromId===V?re.toId:re.fromId;if(X=Y(t.get(ve),re),X)return!0}}function W(z,V,Y){for(var X,te=0;te<z.length;++te){var re=z[te];if(re.fromId===V&&(X=Y(t.get(re.toId),re),X))return!0}}function k(){}function $(){i+=1}function q(){i-=1,i===0&&s.length>0&&(d.fire("changed",s),s.length=0)}function Z(z){if(typeof z!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+z);for(var V=t.values(),Y=V.next();!Y.done;){if(z(Y.value))return!0;Y=V.next()}}}function hi(e,t){if(!t)return-1;if(t.indexOf)return t.indexOf(e);var n=t.length,r;for(r=0;r<n;r+=1)if(t[r]===e)return r;return-1}function ih(e,t){this.id=e,this.links=null,this.data=t}function Fs(e,t){e.links?e.links.push(t):e.links=[t]}function Ls(e,t,n,r){this.fromId=e,this.toId=t,this.data=n,this.id=r}function pi(e,t){return e.toString()+"\u{1F449} "+t.toString()}function Tl(e,t){t===void 0&&(t={});var n=e.getRoot();n.updateWorldTransform();var r=[],i=Object.assign({background:ji(e.getClearColor()),write:o,scene:e},e.getDrawContext());return ah(i,t),s(n.children),lh(i,t),r.join(`
`);function o(a){r.push(a)}function s(a){for(var l={beforeWrite:t.beforeWrite||sh,round:t.round===void 0?void 0:t.round},u=0;u<a.length;++u){var f=a[u],d=oh(f);d&&uh(d,i,l),s(f.children)}}}function oh(e){if(!(!e||e.svgInvisible)&&e.forEachLine)return e}function sh(){return!0}function ah(e,t){var n="0 0 "+e.width+" "+e.height;e.write('<?xml version="1.0" encoding="utf-8"?>'),t.open&&e.write(t.open()),e.write(`<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="`+n+`">
<style>
  path {
   vector-effect: non-scaling-stroke;
  }
</style>
`),e.background&&e.write('<rect id="background" fill="'+e.background+'" x="0" y="0" width="'+e.width+'" height="'+e.height+'"></rect>')}function lh(e,t){t.close&&e.write(t.close()),e.write("</svg>")}function uh(e,t,n){if(!!e.scene){var r=n.beforeWrite,i=n.round,o=Ps(),s=new Map,a=e.multiColorSegment,l=ch(e,t,i);e.forEachLine(function(f,d){var h=l(f.x,f.y,f.z),g=l(d.x,d.y,d.z);if(!(h.isBehind||g.isBehind)&&ph(h,g,t.width,t.height)){var y=ji(e.getLineColor(f,d)),w=h.x+"|"+h.y,b=g.x+"|"+g.y,S=o;a&&(S=s.get(y),S||(S=Ps(),s.set(y,S))),S.getNode(w)||S.addNode(w,h),S.getNode(b)||S.addNode(b,g),S.hasLink(w,b)||S.addLink(w,b,{stroke:y})}});var u=[];a?s.forEach(function(f,d){u.push([f,d])}):u.push([o,ji(e.getLineColor())]),u.forEach(function(f){var d=f[0],h=f[1];if(d.getLinksCount()===0)return;var g=e.width===void 0?1:e.width,y=g/e.scene.getPixelRatio(),w='fill="none" stroke-width="'+y+'" stroke="'+h+'"',b=e.id?'<g id="'+e.id+'" '+w+">":"<g "+w+">";t.write(b);var S=fh(d),C=null,A=null;S.forEach(function(T){var m=T.from,x=T.to;if(m!==C)if(x===C){var P=m;m=x,x=P}else E(),A=[];A&&A.push(m,x),C=x}),E(),t.write("</g>");function E(){if(!!A){var T=A.map(function(x){var P=d.getNode(x);if(P)return P.data;throw new Error("Node is found in the path construction, but missing in the graph")});if(!(r&&!r(T))){var m="M"+T[0].x+" "+T[0].y+" L"+T.slice(1).map(function(x){return x.x+" "+x.y}).join(",");t.write('<path d="'+m+'"/>')}}}})}}function fh(e){var t=new Set,n=[],r=[];return e.forEachNode(function(o){t.has(o.id)||(r.push({to:o.id}),i())}),n;function i(){for(var o=function(){var s=r.pop();s.to&&s.from&&n.push({from:s.from,to:s.to}),!t.has(s.to)&&(t.add(s.to),e.forEachLinkedNode(s.to,function(a){t.has(a.id)||r.push({from:s.to,to:a.id})},!1))};r.length;)o()}}function ch(e,t,n){var r=t.width,i=t.height,o=t.projection,s=t.view,a=Ht(Ft(),o,s.matrix);Ht(a,a,e.worldModel);var l=hh(n);return function(u,f,d){var h=dl([0,0,0,0],[u,f,d||0,1],a),g=l(r*(h[0]/h[3]+1)*.5),y=l(i*(1-(h[1]/h[3]+1)*.5));return{x:g,y,isBehind:h[3]<=0}}}function dh(e){return e}function hh(e){return e===void 0?dh:e===!0||e===0?Math.round:function(t){return Math.round(t*e)/e}}function ph(e,t,n,r){return Qn(e,t,{x:0,y:0},{x:0,y:1})&&Qn(e,t,{x:0,y:0},{x:1,y:0})&&Qn(e,t,{x:0,y:r},{x:0,y:-1})&&Qn(e,t,{x:n,y:0},{x:-1,y:0})}function Qn(e,t,n,r){var i=ks(e,n,r),o=ks(t,n,r);if(i<=0&&o<=0)return!1;if(i>0&&o>0)return!0;var s=i/(i-o),a=e.x+s*(t.x-e.x),l=e.y+s*(t.y-e.y);return i<=0?(e.x=a,e.y=l):(t.x=a,t.y=l),!0}function ks(e,t,n){return(e.x-t.x)*n.x+(e.y-t.y)*n.y}var Jn=.5*Math.PI/180,Rs=[0,0,-1];function vh(e,t,n,r){n||(n=Function.prototype),e.addEventListener("touchstart",b),e.addEventListener("touchend",S);var i="deviceorientationabsolute";window.addEventListener("orientationchange",g);var o=!0,s=[0,0,0,1],a=[0,0,0,1],l=[0,0,0,1];g();var u={isEnabled:!1,isAbsolute:!0,useCurrentOrientation:d,dispose:w,enable:f};return u;function f(C){u.isEnabled=C,u.isEnabled?window.DeviceOrientationEvent!==void 0&&window.DeviceOrientationEvent.requestPermission!==void 0?DeviceOrientationEvent.requestPermission().then(function(A){A==="granted"?(i="deviceorientation",window.addEventListener(i,h)):u.isEnabled=!1,r&&r.fire("device-orientation",u.isEnabled)}).catch(function(A){u.isEnabled=!1,r&&r.fire("device-orientation",u.isEnabled)}):window.addEventListener(i,h):(b(),r&&r.fire("device-orientation",u.isEnabled))}function d(){o=!0}function h(C){var A=C.alpha,E=C.beta,T=C.gamma;if(C.absolute&&A===null&&E===null&&T===null){window.removeEventListener("deviceorientationabsolute",h),window.addEventListener("deviceorientation",h),i="deviceorientation",u.isAbsolute=!1;return}if(y(A,E,T),o){o=!1;var m=Cr([0,0,0],Rs,a),x=Cr([0,0,0],Rs,t),P=m[0]*x[0]+m[1]*x[1],L=Math.sqrt(m[0]*m[0]+m[1]*m[1]),B=Math.sqrt(x[0]*x[0]+x[1]*x[1]),R=Math.acos(P/(L*B))/2,j=Math.sign(m[0]*x[1]-m[1]*x[0]);s[2]=j*Math.sin(R),s[3]=Math.cos(R)}Ar(a,a,l),Ar(t,s,a),n()}function g(){var C=window.orientation||0,A=-C*Jn;l[2]=Math.sin(A),l[3]=Math.cos(A)}function y(C,A,E){var T=A?A*Jn:0,m=E?E*Jn:0,x=C?C*Jn:0,P=Math.cos(T),L=Math.cos(m),B=Math.cos(x),R=Math.sin(T),j=Math.sin(m),H=Math.sin(x);a[0]=R*L*B-P*j*H,a[1]=P*j*B+R*L*H,a[2]=P*L*H+R*j*B,a[3]=P*L*B-R*j*H}function w(){e.removeEventListener("touchstart",b),e.removeEventListener("touchend",S),window.removeEventListener("deviceorientationabsolute",h),window.removeEventListener("deviceorientation",h),window.removeEventListener("orientationchange",g)}function b(C){o||(o=!0,C&&C.preventDefault(),window.removeEventListener(i,h))}function S(C){C.touches.length||(o=!0,u.isEnabled&&(window.removeEventListener(i,h),window.addEventListener(i,h)))}}var Bs=[0,0,-1],ie={MOVE_FORWARD:1,MOVE_BACKWARD:2,MOVE_LEFT:3,MOVE_RIGHT:4,MOVE_UP:5,MOVE_DOWN:6,TURN_LEFT:7,TURN_RIGHT:8,TURN_UP:9,TURN_DOWN:10};function gh(e){var t=e.getDrawContext(),n=t.view,r=n.position,i=n.center,o=e.getOptions()||{},s=[0,0,1],a=Math.PI,l=Math.PI*1.618,u=Dt(o.captureMouse,!1),f,d,h=[0,0,0,1],g=0,y=[0,0,0,1],w=[0,0,0,1],b=[0,0,0],S=0,C=0,A=0,E=Ao(o.inputTarget,t.canvas);E.style.outline="none",E.getAttribute("tabindex")||E.setAttribute("tabindex","0"),E.addEventListener("keydown",re),E.addEventListener("keyup",ve),E.addEventListener("mousedown",Me),E.addEventListener("touchmove",le),E.addEventListener("touchstart",oe),E.addEventListener("wheel",de),document.addEventListener("pointerlockchange",c,!1);var T=new xl(e),m=0,x=0,P=0,L=0,B=0,R=0,j=0,H=0,W=0,k=0,$=0,q={};q[ie.MOVE_FORWARD]=!1,q[ie.MOVE_BACKWARD]=!1,q[ie.MOVE_LEFT]=!1,q[ie.MOVE_RIGHT]=!1,q[ie.MOVE_UP]=!1,q[ie.MOVE_DOWN]=!1,q[ie.TURN_LEFT]=!1,q[ie.TURN_RIGHT]=!1,q[ie.TURN_UP]=!1,q[ie.TURN_DOWN]=!1;var Z=.01,z=3,V=.01,Y={dispose:be,handleCommand:I,setViewBox:N,getUpVector:ee,lookAt:K,enableMouseCapture:_,enableDeviceOrientation:M,isDeviceOrientationEnabled:F,setRotationSpeed:function(J){return a=J,Y},setMoveSpeed:function(J){return Z=J,Y},setScrollSpeed:function(J){return z=J,Y},setFlySpeed:function(J){return V=J,Y},setSpeed:function(J){return Z=J,V=J,Y},getRotationSpeed:function(){return a},getMoveSpeed:function(){return Z},getScrollSpeed:function(){return z},getFlySpeed:function(){return V},getKeymap:function(){return X},getMouseCapture:function(){return u}},X={87:ie.MOVE_FORWARD,65:ie.MOVE_LEFT,83:ie.MOVE_BACKWARD,68:ie.MOVE_RIGHT,81:ie.TURN_LEFT,37:ie.TURN_LEFT,69:ie.TURN_RIGHT,39:ie.TURN_RIGHT,38:ie.TURN_UP,40:ie.TURN_DOWN,16:ie.MOVE_DOWN,32:ie.MOVE_UP};jr(Y);var te=vh(E,n.orientation,ne,Y);return Dt(o.useDeviceOrientation,!0)&&te.enable(!0),Y;function re(D){O(D,1)}function ve(D){O(D,0)}function Me(D){D.which===1&&(document.pointerLockElement?document.exitPointerLock():u?E.requestPointerLock():(E.focus(),document.addEventListener("mousemove",ke),document.addEventListener("mouseup",Ne),f=D.clientX,d=D.clientY,D.preventDefault()))}function oe(D){D.touches.length===1&&(f=D.touches[0].clientX,d=D.touches[0].clientY)}function de(D){D.preventDefault();var J=D.deltaMode>0?100:1,Ce=z*ue(-D.deltaY*J),yt=+new Date,Qe=D.clientX,Ct=D.clientY;if(document.pointerLockElement&&(Qe=t.width/(t.pixelRatio*2),Ct=t.height/(t.pixelRatio*2)),document.pointerLockElement||yt-S>200||Math.hypot(Qe-C,Ct-A)>20){var Re=[0,0,-1];Re[0]=(Qe*t.pixelRatio/t.width-.5)*2,Re[1]=(1-Ct*t.pixelRatio/t.height-.5)*2,hn(Re,Re,rd([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t.view.cameraWorld,t.inverseProjection)),b=Fn([0,0,0],Re,n.position),Wr(b,b);var rt=id(i);y=bs(n.orientation),K(r,Re),w=bs(n.orientation),K(r,rt),C=Qe,A=Ct,g=0,S=yt}g<1&&(dr(h,y,w,g),hl(n.orientation,h[0],h[1],h[2],h[3]),g+=.01),r[0]+=Z*Ce*b[0],r[1]+=Z*Ce*b[1],r[2]+=Z*Ce*b[2],ne(),D.preventDefault()}function ue(D){return Math.sign(D)*Math.min(.25,Math.abs(D/128))}function le(D){if(D.touches.length===1){var J=D.touches[0].clientY-d,Ce=D.touches[0].clientX-f;v(-Ce,J),f=D.touches[0].clientX,d=D.touches[0].clientY,D.preventDefault()}}function ke(D){var J=D.clientY-d,Ce=D.clientX-f;v(-Ce,J),f=D.clientX,d=D.clientY,D.preventDefault()}function Ne(D){document.removeEventListener("mousemove",ke),document.removeEventListener("mouseup",Ne)}function c(D){document.pointerLockElement?document.addEventListener("mousemove",p,!1):(document.removeEventListener("mousemove",p,!1),H=0,k=0),Y.fire("pointer-locked",document.pointerLockElement)}function p(D){v(D.movementX,-D.movementY)}function v(D,J){var Ce=a*D/t.width,yt=l*J/t.height;he(Ce,yt),ne()}function _(D){return u=D,Y.fire("mouse-capture",D),Y}function M(D){te.enable(D)}function F(){return te.isEnabled}function O(D,J){if(mh(D)){L=0;return}var Ce=X[D.which];Ce&&I(Ce,J)}function I(D,J){switch(D){case ie.MOVE_FORWARD:P=J;break;case ie.MOVE_BACKWARD:P=-J;break;case ie.MOVE_LEFT:x=J;break;case ie.MOVE_RIGHT:x=-J;break;case ie.MOVE_UP:L=J;break;case ie.MOVE_DOWN:L=-J;break;case ie.TURN_LEFT:W=-J;break;case ie.TURN_RIGHT:W=J;break;case ie.TURN_UP:$=J;break;case ie.TURN_DOWN:$=-J;break;default:throw new Error("Unknown command "+D)}U()}function U(){m||(m=requestAnimationFrame(Q))}function N(D){var J=e.getPixelRatio(),Ce=J*Math.max((D.top-D.bottom)/2,(D.right-D.left)/2),yt=(D.left+D.right)/2,Qe=(D.top+D.bottom)/2,Ct=Ce/Math.tan(t.fov/2);return K([yt,Qe,Ct],[yt,Qe,0]),Y}function Q(){m=0;var D=.9,J=!1;B=dt(B*D+x,.5,0),R=dt(R*D+P,.5,0),j=dt(j*D+L,.5,0),H=dt(H*D+W/2,Math.PI/360,0),k=dt(k*D+$/6,Math.PI/360,0),(B||R)&&(we(B*Z,R*Z),J=!0),j&&(r[2]+=j*V,J=!0),(k||H)&&(he(H*.01,k*.01),J=!0),J&&(ne(),U()),q[ie.MOVE_LEFT]=B>0,q[ie.MOVE_RIGHT]=B<0,q[ie.MOVE_FORWARD]=R>0,q[ie.MOVE_BACKWARD]=R<0,q[ie.MOVE_UP]=j>0,q[ie.MOVE_DOWN]=j<0,q[ie.TURN_LEFT]=H<0,q[ie.TURN_RIGHT]=H>0,Y.fire("move",q)}function K(D,J){return Er(r,D[0],D[1],D[2]),Er(i,J[0],J[1],J[2]),_o(n.cameraWorld,r,i,s),xo(n.orientation,n.cameraWorld),Hn(n.matrix,n.cameraWorld),ne(),Y}function ee(){return s}function ne(){if(n.update(),hn(i,Bs,n.cameraWorld),T.updated=!1,e.fire("transform",T),T.updated){ne();return}e.getRoot().scheduleMVPUpdate(),e.renderFrame()}function he(D,J){D&&(Ar(n.orientation,zi([0,0,0,0],Bs,D),n.orientation),te.useCurrentOrientation()),J&&Ar(n.orientation,n.orientation,zi([0,0,0,0],[1,0,0],J))}function we(D,J){var Ce=Cr([0,0,0],[-D,0,-J],n.orientation);r[0]+=Ce[0],r[1]+=Ce[1]}function be(){cancelAnimationFrame(m),m=0,E.removeEventListener("keydown",re),E.removeEventListener("keyup",ve),E.removeEventListener("mousedown",Me),E.removeEventListener("touchmove",le),E.removeEventListener("touchstart",oe),E.removeEventListener("wheel",de),document.removeEventListener("mousemove",p,!1),document.removeEventListener("pointerlockchange",c,!1),document.removeEventListener("mousemove",ke),document.removeEventListener("mouseup",Ne),te.dispose()}}function mh(e){return e.altKey||e.ctrlKey||e.metaKey}function yh(e,t){var n="navigation-controls",r=document.createElement("div");r.classList.add(n),r.innerHTML=wh();var i=document.createElement("style");i.appendChild(document.createTextNode(xh(n))),document.querySelector("head").appendChild(i),e.appendChild(r);var o=Array.from(r.querySelectorAll("a.navigation-btn")),s=o.map(f),a=r.querySelector("#capture-mouse");t.getMouseCapture()&&(a.checked=!0),a.addEventListener("change",d);var l=r.querySelector("#device-orientation");return l&&(l.checked=t.isDeviceOrientationEnabled(),l.addEventListener("change",g)),t.on("move",w),t.on("mouse-capture",h),t.on("device-orientation",y),t.on("pointer-locked",u),{dispose:S};function u(C){var A=r.querySelector(".cross");A&&(A.style.display=C?"block":"none")}function f(C){var A=b(C);return _h(C,function(E){t.handleCommand(A,E?1:0)})}function d(C){t.enableMouseCapture(a.checked)}function h(C){a.checked=C}function g(){t.enableDeviceOrientation(l.checked)}function y(C){l&&(l.checked=C)}function w(C){o.forEach(function(A){C[b(A)]?A.classList.add("down"):A.classList.remove("down")})}function b(C){return Number.parseInt(C.getAttribute("data-command"),10)}function S(){t.off("move",w),t.off("mouse-capture",h),t.off("device-orientation",y),t.off("pointer-locked",u),s.forEach(function(C){return C()}),r.parentElement&&r.parentElement.removeChild(r),i.parentElement&&i.parentElement.removeChild(i)}}function wh(){return`
  <div class='navigation-row padded'>
    <div class='item'>
      <a href="#" class='navigation-btn secondary' data-command='`+ie.TURN_LEFT+`'>
        <svg viewBox="0 0 1024 1024">
        <path d="m884.6 622.6v192c0 11.333-3.834 20.833-11.5 28.5-7.667 7.666-17 11.5-28 11.5s-20.5-3.834-28.5-11.5c-8-7.667-12-17.167-12-28.5v-192c0-61.334-21.667-113.67-65-157-43.334-43.334-95.667-65-157-65h-340l113 112c7.333 8 11 17.5 11 28.5s-3.834 20.333-11.5 28c-7.667 7.666-17 11.5-28 11.5s-20.5-4-28.5-12l-178-178c-8-8-12-17.5-12-28.5s4-20.5 12-28.5l183-183c8-8 17.5-12 28.5-12s20.5 3.833 28.5 11.5c8 7.666 12 17 12 28s-4 20.5-12 28.5l-114 114h336c83.333 0 154.5 29.5 213.5 88.5s88.5 130.17 88.5 213.5z"/>
        </svg>
        <div class='nav-key-legend'>Q</div>
      </a>
    </div>
    <a href='#' class='item navigation-btn' data-command='`+ie.MOVE_FORWARD+`'>
      <svg viewBox="0 0 100 100"><path d="M10,80 50,30 90,80z"></path></svg>
      <div class='nav-key-legend'>W</div>
    </a>
    <a href="#" class='item navigation-btn secondary' data-command='`+ie.TURN_RIGHT+`'>
      <svg viewBox="0 0 1024 1024">
        <path d="m108.6 622.6v192c0 11.333 3.833 20.833 11.5 28.5 7.666 7.666 17 11.5 28 11.5s20.5-3.834 28.5-11.5c8-7.667 12-17.167 12-28.5v-192c0-61.334 21.666-113.67 65-157 43.333-43.334 95.666-65 157-65h340l-113 112c-7.334 8-11 17.5-11 28.5s3.833 20.333 11.5 28c7.666 7.666 17 11.5 28 11.5s20.5-4 28.5-12l178-178c8-8 12-17.5 12-28.5s-4-20.5-12-28.5l-183-183c-8-8-17.5-12-28.5-12s-20.5 3.833-28.5 11.5c-8 7.666-12 17-12 28s4 20.5 12 28.5l114 114h-336c-83.334 0-154.5 29.5-213.5 88.5s-88.5 130.17-88.5 213.5z"/>
      </svg>
      <div class='nav-key-legend'>E</div>
    </a>
  </div>
  <div class='navigation-row padded'>
    <a href='#' class='item navigation-btn' data-command='`+ie.MOVE_LEFT+`'>
      <svg viewBox="0 0 100 100" ><path d="M80,10 80,90 30,50z"></path></svg>
      <div class='nav-key-legend'>A</div>
    </a>
    <a href='#' class='item navigation-btn' data-command='`+ie.MOVE_BACKWARD+`'>
      <svg viewBox="0 0 100 100"><path d="M10,30 50,80 90,30z"></path></svg>
      <div class='nav-key-legend'>S</div>
    </a>
    <a href='#' class='item navigation-btn' data-command='`+ie.MOVE_RIGHT+`'>
      <svg viewBox="0 0 100 100" ><path d="M30,10 30,90 80,50z"></path></svg>
      <div class='nav-key-legend'>D</div>
    </a>
  </div>
  <div class='navigation-row'>
    <a href='#'  class='item navigation-btn wide' data-command='`+ie.MOVE_DOWN+`'>
      <svg width="100%" height="100%" viewBox="0 0 1024 1024">
          <path d="M364,666L522,824C528,830 535.5,833 544.5,833C553.5,833 561,830 567,824L725,666C731.667,659.333 735,651.667 735,643C735,634.333 731.667,626.667 725,620C719,614 711.5,611 702.5,611C693.5,611 686,614 680,620L576,724L576,32C576,23.333 573,15.833 567,9.5C561,3.167 553.333,0 544,0C535.333,0 527.833,3.167 521.5,9.5C515.167,15.833 512,23.333 512,32L512,724L409,620C403,614 395.5,611 386.5,611C377.5,611 370,614 364,620C358,626.667 355,634.333 355,643C355,651.667 358,659.333 364,666ZM1024,992C1024,1000.67 1020.83,1008.17 1014.5,1014.5C1008.17,1020.83 1000.67,1024 992,1024L32,1024C23.333,1024 15.833,1020.83 9.5,1014.5C3.167,1008.17 0,1000.67 0,992C0,983.333 3.167,975.833 9.5,969.5C15.833,963.167 23.333,960 32,960L992,960C1000.67,960 1008.17,963.167 1014.5,969.5C1020.83,975.833 1024,983.333 1024,992Z" style="fill-rule:nonzero;"/>
      </svg>
      <div class='nav-key-legend'>shift</div>
    </a>
    <a href='#' class='item navigation-btn wide' data-command='`+ie.MOVE_UP+`'>
      <svg viewBox="0 0 1024 1024"><path d="M726 167L568 9q-9-9-22.5-9T523 9L365 167q-10 10-10 23t10 23q9 9 22.5 9t22.5-9l104-104v692q0 13 9 22.5t23 9.5q13 0 22.5-9.5T578 801V109l103 104q9 9 22.5 9t22.5-9q9-10 9-23t-9-23zm298 825q0 13-9.5 22.5T992 1024H32q-13 0-22.5-9.5T0 992t9.5-22.5T32 960h960q13 0 22.5 9.5t9.5 22.5z"></path></svg>
      <div class='nav-key-legend'>space</div>
    </a>
</div>
  <div class='cursor-legend'>
    <input type='checkbox' id='capture-mouse' name="capture-mouse">
    <label for='capture-mouse'>Capture mouse cursor</label>
  </div>
  `+bh()+`
  <div class='cross'>+</div>
</div>`}function bh(){return window.DeviceOrientationEvent&&"ontouchstart"in window?`<div class='device-orientation-legend'>
    <input type='checkbox' id='device-orientation' name="device-orientation">
    <label for='device-orientation'>Use device orientation</label>
  </div>`:""}function xh(e){var t="."+e;return`
`+t+` {
  position: fixed;
  bottom: 8px;
  left: 8px;
  font-family: 'Avenir', Helvetica, Arial, sans-serif
}
`+t+` * {
  box-sizing: border-box;
}
`+t+` label {
  color: white;
}
`+t+` .nav-key-legend {
  text-align: center;
  font-size: 14px;
}
`+t+` .navigation-row {
  display: flex;
}
`+t+` .item {
  width: 42px;
  height: 42px;
  margin: 2px;
}
`+t+` .navigation-btn {
  background: rgba(0,0,0,0.2);
  box-shadow: 0 2px 4px #000, 0 -1px 0 rgb(0 0 0 / 5%);
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  text-decoration: none;
  display: flex;
  width: 42px;
  flex-direction: column;
  color: #cecece;
}
`+t+` .navigation-btn.down {
  background: rgba(250,250,250,.2);
}
`+t+` .padded {
  margin-left: 10px;
}
`+t+` .navigation-btn.secondary {
  width: 42px;
  height: 42px;
  transform: scale(0.70);
}

`+t+` .navigation-btn.secondary svg {
  padding: 4px;
}
`+t+` .navigation-btn.secondary .nav-key-legend {
  color: #aaa;
}
`+t+` .navigation-btn.secondary.left {
  transform-origin: right bottom;
}
`+t+` .navigation-btn.secondary.right {
  transform-origin: left bottom;
}
`+t+` .navigation-btn.wide {
  width: 75px;
}
`+t+` .navigation-btn svg {
  fill: white;
  padding-top: 4px;
}
`+t+` .cursor-legend {
  margin-top: 8px;
  display: none;
}

`+t+` .cross {
  position: fixed;
  pointer-events: none;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 68px;
  color: white;
  display: none;
}
@media (pointer: fine) {
  `+t+` .cursor-legend {
    display: block;
  }
}`}function _h(e,t,n){n===void 0&&(n=15);var r;return e.addEventListener("mousedown",o),e.addEventListener("touchstart",o),e.addEventListener("keydown",l),e.addEventListener("keyup",u),i;function i(){e.removeEventListener("mousedown",o),e.removeEventListener("touchstart",o),e.removeEventListener("keydown",l),e.removeEventListener("keyup",u),document.removeEventListener("mouseup",a),document.removeEventListener("touchend",f),document.removeEventListener("touchcancel",f),clearTimeout(r)}function o(h){h.preventDefault(),document.addEventListener("mouseup",a),document.addEventListener("touchend",f),document.addEventListener("touchcancel",f),s()}function s(){t(1),r=setTimeout(s,n)}function a(){d()}function l(h){h.which===13&&(t(1),h.preventDefault())}function u(h){h.which===13&&(t(0),h.preventDefault())}function f(){d()}function d(){clearTimeout(r),document.removeEventListener("mouseup",a),document.removeEventListener("touchend",f),document.removeEventListener("touchcancel",f),t(0)}}function Eh(e,t){t===void 0&&(t={}),e.getCameraController();var n={redraw:Function.prototype,dispose:Function.prototype},r=t.lineColor||196194594,i=t.maxAlpha||255,o=u(r),s=f(t.cursorColor||4294967295);return e.on("transform",l),{dispose:a,update:l};function a(){e.off("transform",l),o.dispose(),s.dispose()}function l(){o.redraw(),s.redraw()}function u(d){if(t.showGrid===!1)return n;var h=32*2,g=new Ln(2*(h+1),{width:2.5,is3D:!0,allowColors:!0});g.svgInvisible=!0;var y=new Ln(2*(h+1),{width:1.5,is3D:!0,allowColors:!0});y.svgInvisible=!0;var w=e.getDrawContext(),b=w.view.center;return A(),e.appendChild(y),e.appendChild(g),{redraw:A,dispose:S};function S(){e.removeChild(y),e.removeChild(g)}function C(T){return 1-(T-Math.floor(T))}function A(){var T=e.getDrawContext().view.position,m=T[0]-b[0],x=T[1]-b[1],P=T[2]-b[2],L=Math.sqrt(m*m+x*x+P*P),B=L*Math.tan(w.fov/2),R=Math.log10(B),j=Math.pow(10,Math.floor(R)),H=C(R),W=Math.round(H*i),k=Math.floor(b[0]/j)*j-Math.floor(h*j/2),$=Math.floor(b[1]/j)*j-Math.floor(h*j/2),q=k+j*h,Z=$+j*h;E(y,k,$,q,Z,j,W),E(g,k,$,q,Z,j*10,i-W)}function E(T,m,x,P,L,B,R){T.model[14]=b[2],T.worldTransformNeedsUpdate=!0,T.count=0;for(var j=d&4294967040|R,H=Math.ceil(x/B)*B,W=H;W<=L;W+=B)T.add({from:{x:m,y:W,color:j},to:{x:P,y:W,color:j}});for(var k=Math.ceil(m/B)*B,$=k;$<=P;$+=B)T.add({from:{x:$,y:x,color:j},to:{x:$,y:L,color:j}})}}function f(d){if(t.showCursor===!1)return n;var h=360,g=e.getDrawContext().view.center,y=e.getDrawContext().view.position,w=new Ln(h+1,{width:3,is3D:!0,allowColors:!0});w.svgInvisible=!0;for(var b,S=[],C=0;C<=h;++C)S.push(w.add({from:{x:0,y:0,color:d},to:{x:C,y:C,color:d}}));return e.appendChild(w),E(),{redraw:E,dispose:A};function A(){e.removeChild(w)}function E(){var T=y[0]-g[0],m=y[1]-g[1],x=y[2]-g[2],P=Math.sqrt(T*T+m*m+x*x);P*=.025;for(var L=0;L<=h+1;++L){var B=L/h*2*Math.PI;if(L===0){b={x:P*Math.cos(B),y:P*Math.sin(B),color:d};continue}var R={x:P*Math.cos(B),y:P*Math.sin(B),color:d};S[L-1].update(b,R),b=R}w.model[12]=g[0],w.model[13]=g[1],w.model[14]=g[2],w.worldTransformNeedsUpdate=!0}}}var Ch={mat4:"uniformMatrix4fv",mat3:"uniformMatrix3fv",mat2:"uniformMatrix2fv",vec4:"uniform4fv",vec3:"uniform3fv",vec2:"uniform2fv",float:"uniform1f",bool:"uniform1i"},Po=function(t,n){var r=Ch[n];if(!r)throw new Error("Function name for uniform is required");this.name=t,this.functionName=r,this.location=this.name+"UniformLocation"};Po.prototype.getInitBlockForDraw=function(){return"let "+this.location+" = gl.getUniformLocation(program, '"+this.name+"');"};Po.prototype.getDraw=function(){return this.functionName.indexOf("Matrix")>-1?"gl."+this.functionName+"("+this.location+", false, uniforms."+this.name+");":"gl."+this.functionName+"("+this.location+", uniforms."+this.name+");"};var pn=function(t,n){n===void 0&&(n=0),this.name=t,this.offset=n,this.variableName=t+"Texture",this.ready=this.variableName+"Ready",this.location=this.name+"UniformLocation",this.isTexture=!0};pn.prototype.getInitBlockForDraw=function(){return`
  let `+this.location+" = gl.getUniformLocation(program, '"+this.name+`');
  let `+this.variableName+` = gl.createTexture();
  let `+this.ready+` = false;
`};pn.prototype.getTextureInitCanvasBlock=function(){return`
  gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);
  gl.bindTexture(gl.TEXTURE_2D, `+this.variableName+`);
  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureCanvas);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
  gl.bindTexture(gl.TEXTURE_2D, null);
  `+this.ready+" = true"};pn.prototype.getDraw=function(){return`
    gl.activeTexture(gl.TEXTURE`+this.offset+`);
    gl.bindTexture(gl.TEXTURE_2D, `+this.variableName+`);
    gl.uniform1i(`+this.location+", "+this.offset+`);
`};var lt=function(){this.type="gl.FLOAT",this.debug=!1,this.bufferViewType="Float32Array",this.count=1,this.name=void 0,this.bytePerElement=4};lt.prototype.setName=function(t){this.name=t};lt.prototype.getInitBlockForBuffer=function(t){this.ensureNameIsSet();var n=t?"let ":"";return""+n+this.name+"Array = new "+this.bufferViewType+"(buffer);"};lt.prototype.getInitBlockForDraw=function(){this.ensureNameIsSet();var t=this,n=t.name;return"let "+n+"AttributeLocation = gl.getAttribLocation(program, '"+n+"');"};lt.prototype.getAddBlock=function(t,n){throw new Error("Concrete types have to implement this")};lt.prototype.getMoveBlock=function(t,n){throw new Error("Concrete type have to implement `getMoveBlock`")};lt.prototype.getGetBlock=function(t){throw new Error("Concrete types have to implement `getGetBlock`")};lt.prototype.getDivisor=function(t){this.ensureNameIsSet();var n=this.name+"AttributeLocation";return"if ("+n+" > -1) gle.vertexAttribDivisorANGLE("+n+", "+t+");"};lt.prototype.getDraw=function(t,n){this.ensureNameIsSet();var r=this.name+"AttributeLocation";return`
    gl.enableVertexAttribArray(`+r+`);
    gl.vertexAttribPointer(`+r+", "+this.count+", "+this.type+", false, "+t+", "+n+");"};lt.prototype.ensureNameIsSet=function(){if(!this.name)throw new Error("You have to call setName() before using attributes")};var hr=function(e){function t(n){e.call(this),this.count=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getAddBlock=function(r,i){i===void 0&&(i=`
`);var o=this.name,s=o+"Array",a=[];this.debug&&a.push("if (item."+o+` === undefined) throw new Error('Attribute "`+o+`" is missing');
`);for(var l=0;l<this.count;++l){var u="item."+o+"["+l+"]";this.debug&&a.push("if ("+u+` === undefined) throw new Error('Attribute "`+o+'" is missing value at index '+l+`');
`),a.push(s+"[index + "+(r+l)+"] = "+u+";")}return{code:a.join(i),offset:r+this.count}},t.prototype.getMoveBlock=function(r,i){i===void 0&&(i=`
`);for(var o=this.name,s=o+"Array",a=[],l=0;l<this.count;++l)a.push(s+"[to + "+(r+l)+"] = "+s+"[from + "+(r+l)+"];");return a.join(i)},t.prototype.getGetBlock=function(r){for(var i=this.name+"Array",o=[],s=0;s<this.count;++s)o.push(i+"[index + "+(r+s)+"]");return this.name+": ["+o.join(", ")+"]"},t}(lt),Sl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getAddBlock=function(r){var i=this.name,o=i+"Array",s="";return this.debug&&(s="if (item."+i+` === undefined) throw new Error('Attribute "`+i+`" is missing');`),s+=o+"[index + "+r+"] = item."+i+";",{code:s,offset:r+this.count}},t.prototype.getMoveBlock=function(r,i){i===void 0&&(i=`
`);var o=this.name,s=o+"Array",a="";return a+=s+"[to + "+r+"] = "+s+"[from + "+r+"];"+i,a},t.prototype.getGetBlock=function(r){return this.name+": "+this.name+"Array[index + "+r+"]"},t}(lt),Is={vec4:function(){return new hr(4)},vec3:function(){return new hr(3)},vec2:function(){return new hr(2)},float:function(){return new Sl}};function Ah(e,t){var n=[],r=[],i=Th(e.vertex,e.fragment,t);i.attributes.forEach(function(f){var d=f.name,h=f.type,g=e.attributes&&e.attributes[d];if(!g&&typeof Is[h]=="function"&&(g=Is[h]()),!g)throw console.error("Unknown type "+h+" for "+d),new Error("Unknown type "+h+" for "+d);g.debug=e&&e.debug||!1,g.setName(d);var y=e.instanced&&e.instanced[d];y?(y.setTypeDefinition(g),r.push(y)):n.push(g)});var o=[],s=0;i.uniforms.forEach(function(f){var d=f.name;f.type==="sampler2D"?o.push(new pn(d,s++)):o.push(new Po(d,f.type))});var a=0,l=0;if(n.forEach(function(f){l+=f.count,a+=f.count*f.bytePerElement}),e.attributeLayout){var u=new Map;e.attributeLayout.forEach(function(f,d){return u.set(f,d)}),n.sort(function(f,d){return u.get(f.name)-u.get(d.name)})}return{bytePerVertex:a,itemPerVertex:l,attributes:n,instanced:r,uniforms:o}}function Th(e,t,n){var r=n?/in\s+(.+);/:/attribute\s+(.+);/,i=/uniform\s+(.+);/,o=[],s=[];return e.split(`
`).forEach(function(l){var u=l.match(r);if(u&&!l.trim().startsWith("//")){a(u[1],o);return}var f=l.match(i);if(f&&!l.trim().startsWith("//")){a(f[1],s);return}}),t.split(`
`).forEach(function(l){var u=l.match(i);u&&a(u[1],s)}),{attributes:o,uniforms:s};function a(l,u){for(var f=l.replace(/,/g," ").split(" ").filter(function(y){return y}),d=f[0],h=function(y){var w=f[y];u.find(function(b){return b.name===w})||u.push({type:d,name:w})},g=1;g<f.length;++g)h(g)}}var Jt=function(){this.api=[],this.init=[],this.implementation=[],this.bufferInit=[]};Jt.prototype.addToInit=function(t){t&&this.init.push(t)};Jt.prototype.addBufferInit=function(t){t&&this.bufferInit.push(t)};Jt.prototype.addToAPI=function(t){t&&this.api.push(t)};Jt.prototype.addToImplementation=function(t){t&&this.implementation.push(t)};Jt.prototype.setAttributesDrawBlock=function(t){this.attributesDrawBlock=t};Jt.prototype.link=function(){var t=[];return this.init.forEach(n),n("  return {"),this.api.forEach(n),n("  };"),this.implementation.forEach(n),t.join(`
`);function n(r){Array.isArray(r)?t.push(r.join(`
    `)):t.push(r)}};function Ml(e){var t=e.gl,n=typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext,r=Ah(e,n),i=A(e.vertex,e.fragment),o=e.preDrawHook||Ds,s=e.postDrawHook||Ds,a=f(r),l=a.link(),u=new Function("gl","program",l)(t,i);return e.debug&&(console.log("Compiled code: "),console.log(l)),u.getCode=function(){return a},u.dispose=function(){t.deleteProgram(i)},u;function f(T){var m=new Jt;return w(T,m),e.sourceBuffer?d(T,m):(b(T,m),h(T,m)),g(T,m),y(T,m),m}function d(T,m){m.addToInit(["let glBuffer;",""]),m.addToAPI(["setGLBuffer: (newBuffer) => glBuffer = newBuffer,"])}function h(T,m){m.addToInit(["let glBuffer = gl.createBuffer();","if (!glBuffer) throw new Error('failed to create a WebGL buffer');",""]),m.addToAPI(["getGLBuffer: () => glBuffer,"])}function g(T,m){var x=T.uniforms,P=[];if(x.forEach(function(R){R instanceof pn&&P.push(R)}),!!P.length){m.addToAPI("setTextureCanvas: setTextureCanvas,");var L=P.map(function(R){return`
      case '`+R.name+`': {
        `+R.getTextureInitCanvasBlock()+`
        return;
      }
      `});m.addToImplementation(`
  function setTextureCanvas(textureName, textureCanvas) {
    switch(textureName) {
      `+L.join(`
      `)+`
    }
    throw new Error('Unknown texture name: ' + textureName);
  }
`);var B=P.map(function(R){return"case '"+R.name+"': return "+R.variableName+";"});m.addToAPI("getTextureByName: getTextureByName,"),m.addToImplementation(`
  function getTextureByName(textureName) {
    switch(textureName) {
      `+B.join(`
      `)+`
    }
    throw new Error('Unknown texture name: ' + textureName);
  }
`)}}function y(T,m){var x=T.attributes,P=T.instanced,L=T.uniforms,B=T.bytePerVertex;T.itemPerVertex;var R=e.sourceBuffer&&e.sourceBuffer.getCode();R?(m.addToInit(R.bufferInit),m.addBufferInit(R.bufferInit)):x.forEach(function($){var q="  "+$.getInitBlockForDraw();m.addToInit(q),m.addBufferInit(q)});var j=[];L.forEach(function($){m.addToInit("  "+$.getInitBlockForDraw()),$ instanceof pn&&j.push($)}),P.length&&(m.addToInit(`  let gle = gl.getExtension('ANGLE_instanced_arrays');
  if (!gle) {
    // Not sure if this is going to be an error, given instancing is widely supported. But
    // If you get this error please ping me so that we can find a fallback solution
    throw new Error('Instanced collection requires instancing support. Please ping @anvaka so that we can add fallback');
  }
`),P.forEach(function($){m.addToInit("  "+$.getInitBlock())}));var H=[];if(R)H=R.attributesDrawBlock;else{var W=0;x.forEach(function($){H.push($.getDraw(B,W)),W+=$.count*$.bytePerElement})}m.setAttributesDrawBlock(H),m.addToImplementation(k()),m.addToAPI(["draw: draw,"]);function k(){var $=L.map(function(re){return re.getDraw()}),q=[],Z=[],z=[];P.forEach(function(re){q.push(re.getDraw()),Z.push(re.getDivisor(0)),z.push(re.getDivisor(0))});var V=[];return P.length?(x.forEach(function(re){Z.push(re.getDivisor(1)),z.push(re.getDivisor(0))}),V.push(Z.join(`
    `)),V.push("gle.drawArraysInstancedANGLE(gl.TRIANGLES, 0, 6, count)"),V.push(z.join(`
    `))):V.push("gl.drawArrays(gl.TRIANGLES, 0, count)"),` 
  function draw(uniforms, from, to) {
    `+X()+`
    `+te()+`
    `+o(T)+`

    gl.useProgram(program);
    `+$.join(`
    `)+`
    `+q.join(`
    `)+`

    gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);
    `+Y()+`

    `+H.join(`
    `)+`
    `+V.join(`
    `)+`

    `+s(T)+`
  }`;function Y(){return e.sourceBuffer?"":`  if (isDirty) {
          gl.bufferData(gl.ARRAY_BUFFER, buffer, gl.DYNAMIC_DRAW);
          isDirty = false;
        }`}function X(){return"if (count === 0) return;"}function te(){return j.length===0?"":j.map(function(re){return"if (!"+re.ready+") return;"}).join(`
    `)}}}function w(T,m){m.addToInit(["  var count = 0;"]),m.addToAPI(["setCount: (newCount) => count = newCount,","getCount: () => count,"])}function b(T,m){var x=T.attributes,P=T.bytePerVertex,L=T.itemPerVertex;m.addToInit(["var bytePerVertex = "+P+";","var itemPerVertex = "+L+";","var capacity = "+(e.capacity||1)*P+";","var buffer = new ArrayBuffer(capacity);","","var isDirty = true;","var dirtyOffset = 0;"]),x.forEach(function(R){m.addToInit(R.getInitBlockForBuffer(!0))}),m.addToAPI(["add: add,","get: get,","update: update,","remove: remove,","getBuffer: getBuffer,","appendBuffer: appendBuffer,"]),m.addToImplementation(B());function B(){var R=[],j=[],H=[],W=[],k=0;return x.forEach($),`
  function add(item) {
    if (count * bytePerVertex >= capacity) {
      extend();
    }

    var index = count * itemPerVertex;

    `+R.join("")+`

    isDirty = true;
    return count++;
  }

  function update(index, item) {
    `+S()+`
    index *= itemPerVertex;
    `+R.join(`
    `)+`
    isDirty = true;
  }

  function remove(index) {
    `+C()+`
    isDirty = true;
    count -= 1;
    if (count <= 0) {
      count = 0;
      return count; // last element removed
    }
    // move last element to take this element's position
    var from = count * itemPerVertex;
    var to = index * itemPerVertex;
    for (var i = 0; i < itemPerVertex; ++i) {
      `+H.join(`
`)+`
    }

    return count;
  }

  function get(index) {
    index *= itemPerVertex; 
    return {
      `+j.join(`,
      `)+`
    };
  }

  function extend() {
    var oldBuffer = buffer;
    capacity *= 2;
    buffer = new ArrayBuffer(capacity);
    // Copy old buffer to the new buffer
    new Uint8Array(buffer).set(new Uint8Array(oldBuffer));
    // And re-assign views:
    `+W.join(`
    `)+`
  }

  function getBuffer() {
    return buffer.slice(0, count * bytePerVertex);
  }

  function appendBuffer(uint8Collection, byteOffset) {
    var requiredCapacity = byteOffset + uint8Collection.byteLength;
    if (requiredCapacity > capacity) {
      // extend the buffer to fulfill the request:
      let oldBuffer = buffer;
      buffer = new ArrayBuffer(requiredCapacity);
      new Uint8Array(buffer).set(new Uint8Array(oldBuffer));
      capacity = requiredCapacity;
    }

    var view = new Uint8Array(buffer);
    view.set(uint8Collection, byteOffset);
    count = Math.floor(requiredCapacity / bytePerVertex);

    `+W.join(`
    `)+`

    isDirty = true;
  }
`;function $(q){var Z=q.getInitBlockForBuffer(!1);Z&&W.push(Z);var z=q.getAddBlock(k,`
    `);R.push(z.code),H.push(q.getMoveBlock(k,`
    `)),j.push(q.getGetBlock(k)),k=z.offset}}}function S(){return e.debug?`
    if (!Number.isFinite(index)) throw new Error('update() requires integer value for "index", got: ' + index);
    if (index < 0 || index >= count) throw new Error('update(' + index + ') is outside of [0..' + count + ') range');
`:""}function C(){return e.debug?`
    if (!Number.isFinite(index)) throw new Error('remove() requires integer value for "index", got: ' + index);
    if (index < 0 || index >= count) throw new Error('remove(' + index + ') is outside of [0..' + count + ') range');
`:""}function A(T,m){var x=E(t.VERTEX_SHADER,T),P=E(t.FRAGMENT_SHADER,m),L=t.createProgram();if(!L)throw new Error("Failed to link a program");if(t.attachShader(L,x),t.attachShader(L,P),t.linkProgram(L),!t.getProgramParameter(L,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(L)||"Failed to link a program");return L}function E(T,m){var x=t.createShader(T);if(!x)throw new Error("Failed to create a shared "+m);if(t.shaderSource(x,m),t.compileShader(x),!t.getShaderParameter(x,t.COMPILE_STATUS))throw console.error(t.getShaderInfoLog(x)),new Error(t.getShaderInfoLog(x)||"Failed to compile shader "+m);return x}}function Ds(){return""}var Sh=function(e){function t(){e.call(this),this.type="gl.UNSIGNED_BYTE",this.bufferViewType="Uint32Array"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getAddBlock=function(r){var i=this.name+"Array",o="";return this.debug&&(o="if (item."+this.name+` === undefined) throw new Error('Attribute "`+this.name+`" is missing');
`),o+=i+"[index + "+r+"] = item."+this.name+";",{code:o,offset:r+this.count}},t.prototype.getMoveBlock=function(r,i){i===void 0&&(i=`
`);var o=this.name,s=o+"Array",a="";return a+=s+"[to + "+r+"] = "+s+"[from + "+r+"];"+i,a},t.prototype.getGetBlock=function(r){return this.name+": "+this.name+"Array[index + "+r+"]"},t.prototype.getDraw=function(r,i){var o=this.name+"AttributeLocation";return`
    if (`+o+` > -1) {
      gl.enableVertexAttribArray(`+o+`);
      gl.vertexAttribPointer(`+o+", 4, "+this.type+", true, "+r+", "+i+`);
    }`},t}(lt),$n=function(t){this.bufferValues=t,this.typeDef=void 0};$n.prototype.setTypeDefinition=function(t){this.typeDef=t};$n.prototype.getInitBlock=function(){var t=this.typeDef,n=t.name;return`
  const `+n+`InstancedBuffer = gl.createBuffer();
  if (!`+n+`InstancedBuffer) throw new Error('failed to create a WebGL buffer');
  const `+n+"InstancedBufferValues = new Float32Array(["+this.bufferValues.join(",")+`]);
  let `+n+"AttributeLocation = gl.getAttribLocation(program, '"+n+`');
`};$n.prototype.getDivisor=function(t){return this.typeDef.getDivisor(t)};$n.prototype.getDraw=function(){var t=this,n=t.typeDef,r=n.name;return`
  gl.bindBuffer(gl.ARRAY_BUFFER, `+r+`InstancedBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, `+r+`InstancedBufferValues, gl.STATIC_DRAW);

  gl.enableVertexAttribArray(`+r+`AttributeLocation);
  gl.vertexAttribPointer(`+r+"AttributeLocation, "+n.count+`, gl.FLOAT, false, 0, 0);
`};var Pl=function(e){function t(n){e.call(this),this.program=n,this.uniforms=void 0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getBuffer=function(){return this.program.getBuffer()},t.prototype.appendBuffer=function(r,i){this.program.appendBuffer(r,i),this.scene&&this.scene.renderFrame()},t.prototype.add=function(r){return this.program.add(r)},t.prototype.update=function(r,i){this.program.update(r,i)},t.prototype.remove=function(r){return this.program.remove(r)},t.prototype.get=function(r){return this.program.get(r)},t.prototype.draw=function(r,i){this.uniforms||(this.uniforms={projectionMatrix:i.projection,model:this.worldModel,view:i.view.matrix,modelViewProjection:this.modelViewProjection}),this.program.draw(this.uniforms)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.program&&this.program.dispose()},t}(Ae);function me(e){return Math.abs(e)<1e-10?0:e}var Mh=function(e){function t(n){var r=Ml({gl:n,vertex:`
  uniform mat4 modelViewProjection;
  attribute vec3 point;

  void main() {
    gl_Position = modelViewProjection * vec4(point, 1.0);
  }`,fragment:`
      precision highp float;
      void main() {
        gl_FragColor = vec4(0., 0., 0., 0.);
      }`,preDrawHook:function(){return`gl.disable(gl.BLEND);
          gl.enable(gl.DEPTH_TEST);
          gl.depthFunc(gl.LEQUAL);`},postDrawHook:function(){return"gl.enable(gl.BLEND); gl.disable(gl.DEPTH_TEST);"}});e.call(this,r),this.domElementToPoints=new Map,this.uiIDToUI=new Map}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.appendFromDomElement=function(r){var i=this,o=Number.parseFloat(r.el.style.width),s=Number.parseFloat(r.el.style.height),a=[[-o/2,-s/2,0],[o/2,-s/2,0],[o/2,s/2,0],[o/2,s/2,0],[-o/2,s/2,0],[-o/2,-s/2,0]];r.updateWorldTransform();var l=a.map(function(u){var f=hn([0,0,0],u,r.worldModel),d={original:u,point:f,uiId:-1};return d.uiId=i.add(d),i.uiIDToUI.set(d.uiId,d),d});this.domElementToPoints.set(r,l),r.on("update-transform",this.updateDOMElementTransform,this),r.on("disposed",this.disposeDomElement,this)},t.prototype.disposeDomElement=function(r){var i=this,o=this.domElementToPoints.get(r);if(!o)throw new Error("Unknown dom element requested to be disposed");o.forEach(function(s){var a=s.uiId,l=i.remove(a),u=i.uiIDToUI.get(l);if(!u)throw new Error("Cannot find moved vertex ui");i.uiIDToUI.delete(l),l!==a&&(u.uiId=a,i.uiIDToUI.set(a,u))}),r.off("update-transform",this.updateDOMElementTransform),r.off("disposed",this.disposeDomElement),this.domElementToPoints.delete(r)},t.prototype.updateDOMElementTransform=function(r){var i=this,o=this.domElementToPoints.get(r);if(!o)throw new Error("Unknown dom element requested transform update");o.forEach(function(s){hn(s.point,s.original,r.worldModel),i.update(s.uiId,s)})},t.prototype.clear=function(){this.program.setCount(0)},t}(Pl),Fl=function(e){function t(n){e.call(this),this.container=document.createElement("div"),this.container.style.overflow="hidden",this.camera=document.createElement("div"),this.camera.style.transformStyle="preserve-3d",this.camera.style.pointerEvents="none",this.camera.style.position="relative",this.container.appendChild(this.camera),this.container.style.pointerEvents="none",this.bound=!1,this.lastCameraTransform="",this.seeThrough=n&&typeof n.seeThrough!="undefined"?n.seeThrough:!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.bindScene=function(r){if(r){var i=r.getDrawContext(),o=i.canvas.parentElement;if(!o)throw new Error("Scene does not have a parent element");this.seeThrough?o.insertBefore(this.container,i.canvas):o.append(this.container),this.bound=!0}else this.container.parentElement&&this.container.parentElement.removeChild(this.container),this.bound=!1,this.seeThroughQuads&&this.seeThroughQuads.parent&&this.seeThroughQuads.parent.removeChild(this.seeThroughQuads);e.prototype.bindScene.call(this,r)},t.prototype.acceptDomChild=function(r){if(this.camera.appendChild(r.el),!!this.seeThrough){if(!this.scene)throw new Error("Scene should be available at this point!");this.seeThroughQuads||(this.seeThroughQuads=new Mh(this.scene.getGL()),this.scene.appendChild(this.seeThroughQuads)),this.seeThroughQuads.appendFromDomElement(r)}},t.prototype.draw=function(r,i){!this.bound||(this._updateCameraTransforms(i),e.prototype.draw.call(this,r,i))},t.prototype._updateCameraTransforms=function(r){var i=r.projection[5]*r.height/(2*r.pixelRatio),o=r.width/r.pixelRatio,s=r.height/r.pixelRatio,a="translateZ("+i+"px)"+Ph(r.view.matrix)+"translate("+o/2+"px,"+s/2+"px)";this.lastCameraTransform!=a&&(this.lastCameraTransform=a,this.camera.style.transform=this.lastCameraTransform,this.camera.style.width=o+"px",this.camera.style.height=s+"px",this.container.style.width=o+"px",this.container.style.height=s+"px",this.container.style.perspective=i+"px")},t}(Ae);function Ph(e){return"matrix3d("+me(e[0])+","+me(-e[1])+","+me(e[2])+","+me(e[3])+","+me(e[4])+","+me(-e[5])+","+me(e[6])+","+me(e[7])+","+me(e[8])+","+me(-e[9])+","+me(e[10])+","+me(e[11])+","+me(e[12])+","+me(-e[13])+","+me(e[14])+","+me(e[15])+")"}var Fh=function(e){function t(n){e.call(this),this.lastTransform="",this.el=document.createElement("div");var r=this.el.style;if(r.position="absolute",r.pointerEvents="initial",n){var i=this.el.style;Object.keys(n).forEach(function(o){i[o]=n[o]})}jr(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.updateWorldTransform=function(r){var i=e.prototype.updateWorldTransform.call(this,r);return i&&this.fire("update-transform",this),i},t.prototype.bindScene=function(r){if(r){var i=Ll(this);if(!i)throw new Error("DomElement should be part of DomContainer hierarchy");i.acceptDomChild(this)}else this.el.parentNode&&(this.el.parentNode.removeChild(this.el),this.fire("disposed",this));e.prototype.bindScene.call(this,r)},t.prototype.draw=function(){var r=Lh(this.worldModel);r!==this.lastTransform&&(this.el.style.transform=r,this.lastTransform=r)},t.prototype.dispose=function(){this.el.parentNode&&this.el.parentNode.removeChild(this.el)},t}(Ae);function Lh(e){var t="matrix3d("+me(e[0])+","+me(e[1])+","+me(e[2])+","+me(e[3])+","+me(-e[4])+","+me(-e[5])+","+me(-e[6])+","+me(-e[7])+","+me(e[8])+","+me(e[9])+","+me(e[10])+","+me(e[11])+","+me(e[12])+","+me(e[13])+","+me(e[14])+","+me(e[15])+")";return"translate(-50%,-50%)"+t}function Ll(e){return e instanceof Fl?e:e.parent&&Ll(e.parent)}var kh=Object.freeze(Object.defineProperty({__proto__:null,ColorAttribute:Sh,DomContainer:Fl,DomElement:Fh,Element:Ae,FloatAttribute:hr,GLCollection:Pl,InstancedAttribute:$n,LineStripCollection:nh,NumberAttribute:Sl,PointCollection:Kd,WireCollection:Ln,createFPSControlsUI:yh,createGuide:Eh,createScene:Hi,defineProgram:Ml,fpsControls:gh,isWebGLEnabled:Al,mapControls:_l,scene:Hi,toSVG:Tl,utils:$e},Symbol.toStringTag,{value:"Module"})),ut=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n};const Rh={},Bh={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"12",height:"12",fill:"black",class:"loader"},Ih=G("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"},null,-1),Dh=G("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"},[G("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"0.8s",repeatCount:"indefinite"})],-1),Oh=[Ih,Dh];function Nh(e,t){return se(),fe("svg",Bh,Oh)}var kl=ut(Rh,[["render",Nh]]),Fo=function(t){Uh(t);var n=Vh(t);return t.on=n.on,t.off=n.off,t.fire=n.fire,t};function Vh(e){var t=Object.create(null);return{on:function(n,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var o=t[n];return o||(o=t[n]=[]),o.push({callback:r,ctx:i}),e},off:function(n,r){var i=typeof n=="undefined";if(i)return t=Object.create(null),e;if(t[n]){var o=typeof r!="function";if(o)delete t[n];else for(var s=t[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return e},fire:function(n){var r=t[n];if(!r)return e;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var s=r[o];s.callback.apply(s.ctx,i)}return e}}}function Uh(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}class Kr{constructor(t){Fo(this),this.callback=t||Function.prototype}cancel(){this.isCancelled=!0,this.fire("cancel")}notify(t){this.isCancelled||this.callback(t)}onCancel(t){this.on("cancel",t,this)}offCancel(t){this.off("cancel",t)}}function Xr(e,t){t||(t={});let n,r=t.progress||new Kr;return r.on&&r.onCancel(i),new Promise(o);function i(){n&&n.abort()}function o(s,a){n=new XMLHttpRequest,typeof r.notify=="function"&&n.addEventListener("progress",l,!1),n.addEventListener("load",u,!1),n.addEventListener("error",f,!1),n.addEventListener("abort",d,!1),n.open(t.method||"GET",e),t.responseType&&(n.responseType=t.responseType),t.headers&&Object.keys(t.headers).forEach(h=>{n.setRequestHeader(h,t.headers[h])}),t.method==="POST"?n.send(t.body):n.send(null);function l(h){h.lengthComputable?r.notify({loaded:h.loaded,total:h.total,percent:h.loaded/h.total,lengthComputable:!0}):r.notify({loaded:h.loaded,lengthComputable:!1})}function u(){if(r.offCancel(i),!r.isCancelled){if(n.status!==200){a({statusError:n.status,message:`Unexpected status code ${n.status} when calling ${e}`});return}var h=n.response;t.responseType==="json"&&typeof h=="string"&&(h=JSON.parse(h)),setTimeout(()=>s(h),0)}}function f(){a(`Failed to download ${e}`)}function d(){a({cancelled:!0,message:`Cancelled download of ${e}`})}}}let vi=["https://overpass.kumi.systems/api/interpreter","https://overpass-api.de/api/interpreter","https://overpass.openstreetmap.ru/cgi/interpreter"];function zh(e,t){t=t||new Kr;const n={method:"POST",responseType:"json",progress:t,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"data="+encodeURIComponent(e)};let r=0;return i(vi[r]);function i(s){return Xr(s,n).catch(o)}function o(s){if(s.cancelled||r>=vi.length-1)throw s;return s.statusError&&t.notify({loaded:-1}),r+=1,i(vi[r])}}class Hh{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}growBy(t){this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t}get left(){return this.minX}get top(){return this.minY}get right(){return this.maxX}get bottom(){return this.maxY}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}get cx(){return(this.minX+this.maxX)/2}get cy(){return(this.minY+this.maxY)/2}addPoint(t,n){if(t===void 0)throw new Error("Point is not defined");let r=t,i=n;i===void 0&&(r=t.x,i=t.y),r<this.minX&&(this.minX=r),r>this.maxX&&(this.maxX=r),i<this.minY&&(this.minY=i),i>this.maxY&&(this.maxY=i)}addRect(t){if(!t)throw new Error("rect is not defined");this.addPoint(t.left,t.top),this.addPoint(t.right,t.top),this.addPoint(t.left,t.bottom),this.addPoint(t.right,t.bottom)}merge(t){t.minX<this.minX&&(this.minX=t.minX),t.minY<this.minY&&(this.minY=t.minY),t.maxX>this.maxX&&(this.maxX=t.maxX),t.maxY>this.maxY&&(this.maxY=t.maxY)}}class $h{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}function*jh(e){for(const t of e)yield*t}function Rl(e){return Array.from(jh(e))}var Ee=1e-6,Wh=1e-12,pe=Math.PI,Ze=pe/2,Os=pe/4,at=pe*2,et=180/pe,Be=pe/180,Le=Math.abs,Bl=Math.atan,On=Math.atan2,Pe=Math.cos,qh=Math.exp,Gh=Math.log,Fe=Math.sin,Yh=Math.sign||function(e){return e>0?1:e<0?-1:0},Zr=Math.sqrt,Kh=Math.tan;function Xh(e){return e>1?0:e<-1?pe:Math.acos(e)}function Nn(e){return e>1?Ze:e<-1?-Ze:Math.asin(e)}function An(){}function Sr(e,t){e&&Vs.hasOwnProperty(e.type)&&Vs[e.type](e,t)}var Ns={Feature:function(e,t){Sr(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Sr(n[r].geometry,t)}},Vs={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Wi(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Wi(n[r],t,0)},Polygon:function(e,t){Us(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Us(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Sr(n[r],t)}};function Wi(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function Us(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Wi(e[n],t,1);t.polygonEnd()}function Zh(e,t){e&&Ns.hasOwnProperty(e.type)?Ns[e.type](e,t):Sr(e,t)}function qi(e){return[On(e[1],e[0]),Nn(e[2])]}function vn(e){var t=e[0],n=e[1],r=Pe(n);return[r*Pe(t),r*Fe(t),Fe(n)]}function er(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Mr(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function gi(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function tr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Gi(e){var t=Zr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Yi(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Ki(e,t){return[Le(e)>pe?e+Math.round(-e/at)*at:e,t]}Ki.invert=Ki;function Il(e,t,n){return(e%=at)?t||n?Yi(Hs(e),$s(t,n)):Hs(e):t||n?$s(t,n):Ki}function zs(e){return function(t,n){return t+=e,[t>pe?t-at:t<-pe?t+at:t,n]}}function Hs(e){var t=zs(e);return t.invert=zs(-e),t}function $s(e,t){var n=Pe(e),r=Fe(e),i=Pe(t),o=Fe(t);function s(a,l){var u=Pe(l),f=Pe(a)*u,d=Fe(a)*u,h=Fe(l),g=h*n+f*r;return[On(d*i-g*o,f*n-h*r),Nn(g*i+d*o)]}return s.invert=function(a,l){var u=Pe(l),f=Pe(a)*u,d=Fe(a)*u,h=Fe(l),g=h*i-d*o;return[On(d*i+h*o,f*n+g*r),Nn(g*n-f*r)]},s}function Qh(e){e=Il(e[0]*Be,e[1]*Be,e.length>2?e[2]*Be:0);function t(n){return n=e(n[0]*Be,n[1]*Be),n[0]*=et,n[1]*=et,n}return t.invert=function(n){return n=e.invert(n[0]*Be,n[1]*Be),n[0]*=et,n[1]*=et,n},t}function Jh(e,t,n,r,i,o){if(!!n){var s=Pe(t),a=Fe(t),l=r*n;i==null?(i=t+r*at,o=t-l/2):(i=js(s,i),o=js(s,o),(r>0?i<o:i>o)&&(i+=r*at));for(var u,f=i;r>0?f>o:f<o;f-=l)u=qi([s,-a*Pe(f),-a*Fe(f)]),e.point(u[0],u[1])}}function js(e,t){t=vn(t),t[0]-=e,Gi(t);var n=Xh(-t[1]);return((-t[2]<0?-n:n)+at-Ee)%at}function Dl(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:An,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function pr(e,t){return Le(e[0]-t[0])<Ee&&Le(e[1]-t[1])<Ee}function nr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ol(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(y){if(!((w=y.length-1)<=0)){var w,b=y[0],S=y[w],C;if(pr(b,S)){if(!b[2]&&!S[2]){for(i.lineStart(),a=0;a<w;++a)i.point((b=y[a])[0],b[1]);i.lineEnd();return}S[0]+=2*Ee}o.push(C=new nr(b,y,null,!0)),s.push(C.o=new nr(b,null,C,!1)),o.push(C=new nr(S,y,null,!1)),s.push(C.o=new nr(S,null,C,!0))}}),!!o.length){for(s.sort(t),Ws(o),Ws(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var u=o[0],f,d;;){for(var h=u,g=!0;h.v;)if((h=h.n)===u)return;f=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(a=0,l=f.length;a<l;++a)i.point((d=f[a])[0],d[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(g)for(f=h.p.z,a=f.length-1;a>=0;--a)i.point((d=f[a])[0],d[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,f=h.z,g=!g}while(!h.v);i.lineEnd()}}}function Ws(e){if(!!(t=e.length)){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function mi(e){return Le(e[0])<=pe?e[0]:Yh(e[0])*((Le(e[0])+pe)%at-pe)}function ep(e,t){var n=mi(t),r=t[1],i=Fe(r),o=[Fe(n),-Pe(n),0],s=0,a=0,l=new $h;i===1?r=Ze+Ee:i===-1&&(r=-Ze-Ee);for(var u=0,f=e.length;u<f;++u)if(!!(h=(d=e[u]).length))for(var d,h,g=d[h-1],y=mi(g),w=g[1]/2+Os,b=Fe(w),S=Pe(w),C=0;C<h;++C,y=E,b=m,S=x,g=A){var A=d[C],E=mi(A),T=A[1]/2+Os,m=Fe(T),x=Pe(T),P=E-y,L=P>=0?1:-1,B=L*P,R=B>pe,j=b*m;if(l.add(On(j*L*Fe(B),S*x+j*Pe(B))),s+=R?P+L*at:P,R^y>=n^E>=n){var H=Mr(vn(g),vn(A));Gi(H);var W=Mr(o,H);Gi(W);var k=(R^P>=0?-1:1)*Nn(W[2]);(r>k||r===k&&(H[0]||H[1]))&&(a+=R^P>=0?1:-1)}}return(s<-Ee||s<Ee&&l<-Wh)^a&1}function Nl(e,t,n,r){return function(i){var o=t(i),s=Dl(),a=t(s),l=!1,u,f,d,h={point:g,lineStart:w,lineEnd:b,polygonStart:function(){h.point=S,h.lineStart=C,h.lineEnd=A,f=[],u=[]},polygonEnd:function(){h.point=g,h.lineStart=w,h.lineEnd=b,f=Rl(f);var E=ep(u,r);f.length?(l||(i.polygonStart(),l=!0),Ol(f,np,E,n,i)):E&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(E,T){e(E,T)&&i.point(E,T)}function y(E,T){o.point(E,T)}function w(){h.point=y,o.lineStart()}function b(){h.point=g,o.lineEnd()}function S(E,T){d.push([E,T]),a.point(E,T)}function C(){a.lineStart(),d=[]}function A(){S(d[0][0],d[0][1]),a.lineEnd();var E=a.clean(),T=s.result(),m,x=T.length,P,L,B;if(d.pop(),u.push(d),d=null,!!x){if(E&1){if(L=T[0],(P=L.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),m=0;m<P;++m)i.point((B=L[m])[0],B[1]);i.lineEnd()}return}x>1&&E&2&&T.push(T.pop().concat(T.shift())),f.push(T.filter(tp))}}return h}}function tp(e){return e.length>1}function np(e,t){return((e=e.x)[0]<0?e[1]-Ze-Ee:Ze-e[1])-((t=t.x)[0]<0?t[1]-Ze-Ee:Ze-t[1])}var qs=Nl(function(){return!0},rp,op,[-pe,-Ze]);function rp(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?pe:-pe,l=Le(o-t);Le(l-pe)<Ee?(e.point(t,n=(n+s)/2>0?Ze:-Ze),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=pe&&(Le(t-r)<Ee&&(t-=r*Ee),Le(o-a)<Ee&&(o-=a*Ee),n=ip(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function ip(e,t,n,r){var i,o,s=Fe(e-n);return Le(s)>Ee?Bl((Fe(t)*(o=Pe(r))*Fe(n)-Fe(r)*(i=Pe(t))*Fe(e))/(i*o*s)):(t+r)/2}function op(e,t,n,r){var i;if(e==null)i=n*Ze,r.point(-pe,i),r.point(0,i),r.point(pe,i),r.point(pe,0),r.point(pe,-i),r.point(0,-i),r.point(-pe,-i),r.point(-pe,0),r.point(-pe,i);else if(Le(e[0]-t[0])>Ee){var o=e[0]<t[0]?pe:-pe;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function sp(e){var t=Pe(e),n=6*Be,r=t>0,i=Le(t)>Ee;function o(f,d,h,g){Jh(g,e,n,h,f,d)}function s(f,d){return Pe(f)*Pe(d)>t}function a(f){var d,h,g,y,w;return{lineStart:function(){y=g=!1,w=1},point:function(b,S){var C=[b,S],A,E=s(b,S),T=r?E?0:u(b,S):E?u(b+(b<0?pe:-pe),S):0;if(!d&&(y=g=E)&&f.lineStart(),E!==g&&(A=l(d,C),(!A||pr(d,A)||pr(C,A))&&(C[2]=1)),E!==g)w=0,E?(f.lineStart(),A=l(C,d),f.point(A[0],A[1])):(A=l(d,C),f.point(A[0],A[1],2),f.lineEnd()),d=A;else if(i&&d&&r^E){var m;!(T&h)&&(m=l(C,d,!0))&&(w=0,r?(f.lineStart(),f.point(m[0][0],m[0][1]),f.point(m[1][0],m[1][1]),f.lineEnd()):(f.point(m[1][0],m[1][1]),f.lineEnd(),f.lineStart(),f.point(m[0][0],m[0][1],3)))}E&&(!d||!pr(d,C))&&f.point(C[0],C[1]),d=C,g=E,h=T},lineEnd:function(){g&&f.lineEnd(),d=null},clean:function(){return w|(y&&g)<<1}}}function l(f,d,h){var g=vn(f),y=vn(d),w=[1,0,0],b=Mr(g,y),S=er(b,b),C=b[0],A=S-C*C;if(!A)return!h&&f;var E=t*S/A,T=-t*C/A,m=Mr(w,b),x=tr(w,E),P=tr(b,T);gi(x,P);var L=m,B=er(x,L),R=er(L,L),j=B*B-R*(er(x,x)-1);if(!(j<0)){var H=Zr(j),W=tr(L,(-B-H)/R);if(gi(W,x),W=qi(W),!h)return W;var k=f[0],$=d[0],q=f[1],Z=d[1],z;$<k&&(z=k,k=$,$=z);var V=$-k,Y=Le(V-pe)<Ee,X=Y||V<Ee;if(!Y&&Z<q&&(z=q,q=Z,Z=z),X?Y?q+Z>0^W[1]<(Le(W[0]-k)<Ee?q:Z):q<=W[1]&&W[1]<=Z:V>pe^(k<=W[0]&&W[0]<=$)){var te=tr(L,(-B+H)/R);return gi(te,x),[W,qi(te)]}}}function u(f,d){var h=r?e:pe-e,g=0;return f<-h?g|=1:f>h&&(g|=2),d<-h?g|=4:d>h&&(g|=8),g}return Nl(s,a,o,r?[0,-e]:[-pe,e-pe])}function ap(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],u=t[1],f=0,d=1,h=l-s,g=u-a,y;if(y=n-s,!(!h&&y>0)){if(y/=h,h<0){if(y<f)return;y<d&&(d=y)}else if(h>0){if(y>d)return;y>f&&(f=y)}if(y=i-s,!(!h&&y<0)){if(y/=h,h<0){if(y>d)return;y>f&&(f=y)}else if(h>0){if(y<f)return;y<d&&(d=y)}if(y=r-a,!(!g&&y>0)){if(y/=g,g<0){if(y<f)return;y<d&&(d=y)}else if(g>0){if(y>d)return;y>f&&(f=y)}if(y=o-a,!(!g&&y<0)){if(y/=g,g<0){if(y>d)return;y>f&&(f=y)}else if(g>0){if(y<f)return;y<d&&(d=y)}return f>0&&(e[0]=s+f*h,e[1]=a+f*g),d<1&&(t[0]=s+d*h,t[1]=a+d*g),!0}}}}}var Tn=1e9,rr=-Tn;function lp(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function o(u,f,d,h){var g=0,y=0;if(u==null||(g=s(u,d))!==(y=s(f,d))||l(u,f)<0^d>0)do h.point(g===0||g===3?e:n,g>1?r:t);while((g=(g+d+4)%4)!==y);else h.point(f[0],f[1])}function s(u,f){return Le(u[0]-e)<Ee?f>0?0:3:Le(u[0]-n)<Ee?f>0?2:1:Le(u[1]-t)<Ee?f>0?1:0:f>0?3:2}function a(u,f){return l(u.x,f.x)}function l(u,f){var d=s(u,1),h=s(f,1);return d!==h?d-h:d===0?f[1]-u[1]:d===1?u[0]-f[0]:d===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,d=Dl(),h,g,y,w,b,S,C,A,E,T,m,x={point:P,lineStart:j,lineEnd:H,polygonStart:B,polygonEnd:R};function P(k,$){i(k,$)&&f.point(k,$)}function L(){for(var k=0,$=0,q=g.length;$<q;++$)for(var Z=g[$],z=1,V=Z.length,Y=Z[0],X,te,re=Y[0],ve=Y[1];z<V;++z)X=re,te=ve,Y=Z[z],re=Y[0],ve=Y[1],te<=r?ve>r&&(re-X)*(r-te)>(ve-te)*(e-X)&&++k:ve<=r&&(re-X)*(r-te)<(ve-te)*(e-X)&&--k;return k}function B(){f=d,h=[],g=[],m=!0}function R(){var k=L(),$=m&&k,q=(h=Rl(h)).length;($||q)&&(u.polygonStart(),$&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),q&&Ol(h,a,k,o,u),u.polygonEnd()),f=u,h=g=y=null}function j(){x.point=W,g&&g.push(y=[]),T=!0,E=!1,C=A=NaN}function H(){h&&(W(w,b),S&&E&&d.rejoin(),h.push(d.result())),x.point=P,E&&f.lineEnd()}function W(k,$){var q=i(k,$);if(g&&y.push([k,$]),T)w=k,b=$,S=q,T=!1,q&&(f.lineStart(),f.point(k,$));else if(q&&E)f.point(k,$);else{var Z=[C=Math.max(rr,Math.min(Tn,C)),A=Math.max(rr,Math.min(Tn,A))],z=[k=Math.max(rr,Math.min(Tn,k)),$=Math.max(rr,Math.min(Tn,$))];ap(Z,z,e,t,n,r)?(E||(f.lineStart(),f.point(Z[0],Z[1])),f.point(z[0],z[1]),q||f.lineEnd(),m=!1):q&&(f.lineStart(),f.point(k,$),m=!1)}C=k,A=$,E=q}return x}}var Gs=e=>e,gn=1/0,Pr=gn,Vn=-gn,Fr=Vn,up={point:fp,lineStart:An,lineEnd:An,polygonStart:An,polygonEnd:An,result:function(){var e=[[gn,Pr],[Vn,Fr]];return Vn=Fr=-(Pr=gn=1/0),e}};function fp(e,t){e<gn&&(gn=e),e>Vn&&(Vn=e),t<Pr&&(Pr=t),t>Fr&&(Fr=t)}var Ys=up;function Lo(e){return function(t){var n=new Xi;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Xi(){}Xi.prototype={constructor:Xi,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ko(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Zh(n,e.stream(Ys)),t(Ys.result()),r!=null&&e.clipExtent(r),e}function Vl(e,t,n){return ko(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function cp(e,t,n){return Vl(e,[[0,0],t],n)}function dp(e,t,n){return ko(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function hp(e,t,n){return ko(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var Ks=16,pp=Pe(30*Be);function Xs(e,t){return+t?gp(e,t):vp(e)}function vp(e){return Lo({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function gp(e,t){function n(r,i,o,s,a,l,u,f,d,h,g,y,w,b){var S=u-r,C=f-i,A=S*S+C*C;if(A>4*t&&w--){var E=s+h,T=a+g,m=l+y,x=Zr(E*E+T*T+m*m),P=Nn(m/=x),L=Le(Le(m)-1)<Ee||Le(o-d)<Ee?(o+d)/2:On(T,E),B=e(L,P),R=B[0],j=B[1],H=R-r,W=j-i,k=C*H-S*W;(k*k/A>t||Le((S*H+C*W)/A-.5)>.3||s*h+a*g+l*y<pp)&&(n(r,i,o,s,a,l,R,j,L,E/=x,T/=x,m,w,b),b.point(R,j),n(R,j,L,E,T,m,u,f,d,h,g,y,w,b))}}return function(r){var i,o,s,a,l,u,f,d,h,g,y,w,b={point:S,lineStart:C,lineEnd:E,polygonStart:function(){r.polygonStart(),b.lineStart=T},polygonEnd:function(){r.polygonEnd(),b.lineStart=C}};function S(P,L){P=e(P,L),r.point(P[0],P[1])}function C(){d=NaN,b.point=A,r.lineStart()}function A(P,L){var B=vn([P,L]),R=e(P,L);n(d,h,f,g,y,w,d=R[0],h=R[1],f=P,g=B[0],y=B[1],w=B[2],Ks,r),r.point(d,h)}function E(){b.point=S,r.lineEnd()}function T(){C(),b.point=m,b.lineEnd=x}function m(P,L){A(i=P,L),o=d,s=h,a=g,l=y,u=w,b.point=A}function x(){n(d,h,f,g,y,w,o,s,i,a,l,u,Ks,r),b.lineEnd=E,E()}return b}}var mp=Lo({point:function(e,t){this.stream.point(e*Be,t*Be)}});function yp(e){return Lo({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function wp(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function Zs(e,t,n,r,i,o){if(!o)return wp(e,t,n,r,i);var s=Pe(o),a=Fe(o),l=s*e,u=a*e,f=s/e,d=a/e,h=(a*n-s*t)/e,g=(a*t+s*n)/e;function y(w,b){return w*=r,b*=i,[l*w-u*b+t,n-u*w-l*b]}return y.invert=function(w,b){return[r*(f*w-d*b+h),i*(g-d*w-f*b)]},y}function bp(e){return xp(function(){return e})()}function xp(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,u=0,f,d=0,h=1,g=1,y=null,w=qs,b=null,S,C,A,E=Gs,T=.5,m,x,P,L,B;function R(k){return P(k[0]*Be,k[1]*Be)}function j(k){return k=P.invert(k[0],k[1]),k&&[k[0]*et,k[1]*et]}R.stream=function(k){return L&&B===k?L:L=mp(yp(f)(w(m(E(B=k)))))},R.preclip=function(k){return arguments.length?(w=k,y=void 0,W()):w},R.postclip=function(k){return arguments.length?(E=k,b=S=C=A=null,W()):E},R.clipAngle=function(k){return arguments.length?(w=+k?sp(y=k*Be):(y=null,qs),W()):y*et},R.clipExtent=function(k){return arguments.length?(E=k==null?(b=S=C=A=null,Gs):lp(b=+k[0][0],S=+k[0][1],C=+k[1][0],A=+k[1][1]),W()):b==null?null:[[b,S],[C,A]]},R.scale=function(k){return arguments.length?(n=+k,H()):n},R.translate=function(k){return arguments.length?(r=+k[0],i=+k[1],H()):[r,i]},R.center=function(k){return arguments.length?(o=k[0]%360*Be,s=k[1]%360*Be,H()):[o*et,s*et]},R.rotate=function(k){return arguments.length?(a=k[0]%360*Be,l=k[1]%360*Be,u=k.length>2?k[2]%360*Be:0,H()):[a*et,l*et,u*et]},R.angle=function(k){return arguments.length?(d=k%360*Be,H()):d*et},R.reflectX=function(k){return arguments.length?(h=k?-1:1,H()):h<0},R.reflectY=function(k){return arguments.length?(g=k?-1:1,H()):g<0},R.precision=function(k){return arguments.length?(m=Xs(x,T=k*k),W()):Zr(T)},R.fitExtent=function(k,$){return Vl(R,k,$)},R.fitSize=function(k,$){return cp(R,k,$)},R.fitWidth=function(k,$){return dp(R,k,$)},R.fitHeight=function(k,$){return hp(R,k,$)};function H(){var k=Zs(n,0,0,h,g,d).apply(null,t(o,s)),$=Zs(n,r-k[0],i-k[1],h,g,d);return f=Il(a,l,u),x=Yi(t,$),P=Yi(f,x),m=Xs(x,T),W()}function W(){return L=B=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&j,H()}}function Ro(e,t){return[e,Gh(Kh((Ze+t)/2))]}Ro.invert=function(e,t){return[e,2*Bl(qh(t))-Ze]};function _p(){return Ep(Ro).scale(961/at)}function Ep(e){var t=bp(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,u;t.scale=function(d){return arguments.length?(r(d),f()):r()},t.translate=function(d){return arguments.length?(i(d),f()):i()},t.center=function(d){return arguments.length?(n(d),f()):n()},t.clipExtent=function(d){return arguments.length?(d==null?s=a=l=u=null:(s=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),f()):s==null?null:[[s,a],[l,u]]};function f(){var d=pe*r(),h=t(Qh(t.rotate()).invert([0,0]));return o(s==null?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:e===Ro?[[Math.max(h[0]-d,s),a],[Math.min(h[0]+d,l),u]]:[[s,Math.max(h[1]-d,a)],[l,Math.min(h[1]+d,u)]])}return f()}class Un{constructor(){this.elements=[],this.bounds=new Hh,this.nodes=new Map,this.wayPointCount=0,this.id=0,this.name="",this.isArea=!0,this.projector=void 0}setName(t){this.name=t}setId(t){this.id=t}setIsArea(t){this.isArea=t}setBBox(t){this.bboxString=t}hasRoads(){return this.wayPointCount>0}setProjector(t){this.projector=t}static fromPBF(t){if(t.version!==1)throw new Error("Unknown version "+t.version);let n=[];t.nodes.forEach(i=>{i.type="node",n.push(i)}),t.ways.forEach(i=>{i.type="way",n.push(i)});const r=Un.fromOSMResponse(n);return r.setName(t.name),r.setId(t.id),r}static fromOSMResponse(t){let n=new Un,r=n.nodes,i=n.bounds,o=0;return t.forEach(s=>{s.type==="node"?(r.set(s.id,s),i.addPoint(s.lon,s.lat)):s.type==="way"&&(o+=s.nodes.length)}),n.elements=t,n.wayPointCount=o,n}getProjectedRect(){let t=this.bounds,n=this.getProjector(),r=n({lon:t.left,lat:t.bottom}),i=n({lon:t.right,lat:t.top}),o=r.x,s=r.y,a=i.y,l=i.x;return{left:o,top:s,right:l,bottom:a,width:l-o,height:Math.abs(a-s)}}forEachElement(t){this.elements.forEach(t)}forEachWay(t,n,r){let i=this.nodes,o=this.getProjector();this.elements.forEach(s=>{if(s.type!=="way")return;let a=s.nodes,l=i.get(a[0]);if(!l)return;let u=o(l);n&&n(s);for(let f=1;f<a.length;++f){if(l=i.get(a[f]),!l)continue;let d=o(l);t(u,d),u=d}r&&r(s)})}getProjector(){let t=[0,0];this.projector||(this.projector=_p(),this.projector.center([this.bounds.cx,this.bounds.cy]).scale(6371393));let n=this.projector;return r;function r({lon:i,lat:o}){t[0]=i,t[1]=o;let s=n(t);return{x:s[0],y:-s[1]}}}}let Qs=new Map;function Bo(e){let t=Qs.get(e);if(t)return Promise.resolve(t);let n=encodeURIComponent(e);return Xr(`https://nominatim.openstreetmap.org/search?format=json&q=${n}`,{responseType:"json"}).then(Cp).then(r=>(Qs.set(e,r),r))}function Cp(e){return e.map(n=>{let r,i;return n.osm_type==="relation"?r=n.osm_id+36e8:n.osm_type==="way"&&(r=n.osm_id+24e8),n.boundingbox&&(i=[Number.parseFloat(n.boundingbox[0]),Number.parseFloat(n.boundingbox[2]),Number.parseFloat(n.boundingbox[1]),Number.parseFloat(n.boundingbox[3])]),{areaId:r,bbox:i,lat:n.lat,lon:n.lon,osmId:n.osm_id,osmType:n.osm_type,name:n.display_name,type:n.type}})}const Oo=class{static runFromOptions(t,n){return t.getQueryTemplate().then(r=>new Oo(r,n).run())}constructor(t,n){this.queryBounds=t.bounds,this.queryString=t.queryString,this.progress=n,this.promise=null}run(){if(this.promise)return this.promise;let t=Sp(this.queryString);return this.promise=Ap(t).then(n=>zh(n,this.progress)).then(n=>{let r=Un.fromOSMResponse(n.elements);return r.queryBounds=this.queryBounds,r}),this.promise}};let ct=Oo;en(ct,"All","way"),en(ct,"Building","way[building]"),en(ct,"Road","way[highway]"),en(ct,"RoadBasic",'way[highway~"^(motorway|primary|secondary|tertiary)|residential"]'),en(ct,"RoadStrict",'way[highway~"^(((motorway|trunk|primary|secondary|tertiary)(_link)?)|unclassified|residential|living_street|pedestrian|service|track)$"][area!=yes]');function Ap(e){let t=0;return r().then(n);function n(){return e.map(i=>{if(typeof i=="string")return i;if(i.geoType==="Area")return`area(${i.areaId})`;if(i.geoType==="Coords")return i.lat+","+i.lon;if(i.geoType==="Id")return`${i.osmType}(${i.osmId})`;if(i.geoType==="Bbox")return i.bbox.join(",")}).join("")}function r(){if(t>=e.length)return Promise.resolve();let i=e[t];return t+=1,typeof i=="string"?r():Bo(i.name).then(Tp).then(o=>{if(!o)throw new Error("No areas found for request "+i.name);Object.assign(i,o)}).then(Mp(1e3)).then(r)}}function Tp(e){if(e.length>0)return e[0]}function Sp(e){let t=/{{geocode(.+?):(.+?)}}/,n,r=[];for(;n=e.match(t);)r.push(e.substr(0,n.index)),r.push({geoType:n[1],name:n[2]}),e=e.substr(n.index+n[0].length);return r.push(e),r}function Mp(e){return function(t){return new Promise(n=>{setTimeout(()=>n(t),e)})}}var Pp=function(e){Lp(e);var t=Fp(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e};function Fp(e){var t=Object.create(null);return{on:function(n,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var o=t[n];return o||(o=t[n]=[]),o.push({callback:r,ctx:i}),e},off:function(n,r){var i=typeof n=="undefined";if(i)return t=Object.create(null),e;if(t[n]){var o=typeof r!="function";if(o)delete t[n];else for(var s=t[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return e},fire:function(n){var r=t[n];if(!r)return e;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var s=r[o];s.callback.apply(s.ctx,i)}return e}}}function Lp(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var t=["on","fire","off"],n=0;n<t.length;++n)if(e.hasOwnProperty(t[n]))throw new Error("Subject cannot be eventified, since it already has property '"+t[n]+"'")}var kp=Rp;function Rp(e){var t=[],n=e;return{dispose:o,onChanged:s,set:i,get:r};function r(){return n}function i(l){n=l,setTimeout(function(){a(l)},0)}function o(){t=[]}function s(l){if(typeof l!="function")throw new Error("changeCallback should be a function");t.push(l)}function a(l){t.forEach(function(u){u(l)})}}var Bp={parse:Dp,stringify:Ip};function Ip(e){if(!e)return"";return Object.keys(e).map(t).join("&");function t(n){var r=e[n],i=Ul(n);return r!==void 0&&(i+="="+Op(r)),i}}function Dp(e){var t=Object.create(null);if(!e)return t;return e.split("&").forEach(n),t;function n(r){if(!!r){var i=r.split("=");t[decodeURIComponent(i[0])]=Vp(i[1])}}}function Op(e){e instanceof Date&&(e=e.toISOString());var t=Ul(e);return t}function Ul(e){var t=encodeURIComponent(e);return t.replace(/[()]/g,Np)}function Np(e){return e===")"?"%29":e==="("?"%28":e}function Vp(e){return e=decodeURIComponent(e),e===""?e:isNaN(e)?Up(e)?e==="true":zp(e)?new Date(e):e:parseFloat(e)}function Up(e){return e==="true"||e==="false"}function zp(e){return e&&e.match(/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/)}var Hp=jp,$p=kp,ir=Bp;function jp(e,t){if(typeof window=="undefined")return $p(e);var n=[],r=t&&t.useSearch,i=r?"?":"#?";return t.rewriteHashToSearch&&s(),o(),{onChanged:l,dispose:u,set:a,get:h,rewriteHashToSearch:s};function o(){var g=h(),y=!1;typeof e=="object"&&e&&Object.keys(e).forEach(function(w){w in g||(g[w]=e[w],y=!0)}),y&&a(g)}function s(){var g=Object.create(null),y=window.location.search;y&&(g=Object.assign(g,ir.parse(y.substr(1))));var w=window.location.hash;w&&(g=Object.assign(g,ir.parse(w.substr(2)))),a(g)}function a(g){var y=i+ir.stringify(g);r&&window.location.hash&&(y+=window.location.hash),window.history?window.history.replaceState(void 0,void 0,y):window.location.replace(y)}function l(g){if(typeof g!="function")throw new Error("changeCallback needs to be a function");n.length===0&&window.addEventListener("hashchange",f,!1),n.push(g)}function u(){n.length!==0&&(n=[],window.removeEventListener("hashchange",f,!1))}function f(){var g=h();d(g)}function d(g){for(var y=0;y<n.length;++y){var w=n[y];w(g)}}function h(){var g=r?window.location.search:window.location.hash,y=(g||i).substr(i.length);return ir.parse(y)}}var Wp=Io,qp=Pp,Gp=Hp;Io.instance=Yp;var or;function Io(e,t){t=t||{};var n=t.history||Gp(e,t);Kp(n),n.onChanged(g);var r=n.get()||Object.create(null),i={get:f,set:d,unset:h,setIfEmpty:y,dispose:u,onChange:s,offChange:a,getHistoryObject:l},o=qp({});return i;function s(w,b){o.on("change",w,b)}function a(w,b){o.off("change",w,b)}function l(){return n}function u(){n.dispose(),o.off()}function f(w){return w===void 0?r:r[w]}function d(w,b){var S=typeof w;return S==="object"?Object.keys(w).forEach(function(C){r[C]=w[C]}):S==="string"&&(r[w]=b),n.set(r),i}function h(w){if(w in r)return delete r[w],n.set(r),i}function g(w){r=w,o.fire("change",r)}function y(w,b){if(typeof w=="object"&&Object.keys(w).forEach(function(S){S in r||(r[S]=w[S])}),!(w in r))return r[w]=b,n.set(r),i}}function Yp(e,t){return or?e&&or.setIfEmpty(e):or=Io(e,t),or}function Kp(e){if(!e)throw new Error("history is required");if(typeof e.dispose!="function")throw new Error("dispose is required");if(typeof e.onChanged!="function")throw new Error("onChanged is required")}const ft=Wp({},{useSearch:!0});var Ve={isCacheEnabled(){return ft.get("cache")!=0},enableCache(){return ft.unset("cache")},get(){return ft.get.apply(ft,arguments)},set(){return ft.set.apply(ft,arguments)},unset(){return ft.unset.apply(ft,arguments)},unsetPlace(){ft.unset("areaId"),ft.unset("osm_id"),ft.unset("bbox")}},zl={exports:{}};(function(e){(function(t){var n=/^\s+/,r=/\s+$/,i=0,o=t.round,s=t.min,a=t.max,l=t.random;function u(c,p){if(c=c||"",p=p||{},c instanceof u)return c;if(!(this instanceof u))return new u(c,p);var v=f(c);this._originalInput=c,this._r=v.r,this._g=v.g,this._b=v.b,this._a=v.a,this._roundA=o(100*this._a)/100,this._format=p.format||v.format,this._gradientType=p.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=v.ok,this._tc_id=i++}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var c=this.toRgb();return(c.r*299+c.g*587+c.b*114)/1e3},getLuminance:function(){var c=this.toRgb(),p,v,_,M,F,O;return p=c.r/255,v=c.g/255,_=c.b/255,p<=.03928?M=p/12.92:M=t.pow((p+.055)/1.055,2.4),v<=.03928?F=v/12.92:F=t.pow((v+.055)/1.055,2.4),_<=.03928?O=_/12.92:O=t.pow((_+.055)/1.055,2.4),.2126*M+.7152*F+.0722*O},setAlpha:function(c){return this._a=z(c),this._roundA=o(100*this._a)/100,this},toHsv:function(){var c=y(this._r,this._g,this._b);return{h:c.h*360,s:c.s,v:c.v,a:this._a}},toHsvString:function(){var c=y(this._r,this._g,this._b),p=o(c.h*360),v=o(c.s*100),_=o(c.v*100);return this._a==1?"hsv("+p+", "+v+"%, "+_+"%)":"hsva("+p+", "+v+"%, "+_+"%, "+this._roundA+")"},toHsl:function(){var c=h(this._r,this._g,this._b);return{h:c.h*360,s:c.s,l:c.l,a:this._a}},toHslString:function(){var c=h(this._r,this._g,this._b),p=o(c.h*360),v=o(c.s*100),_=o(c.l*100);return this._a==1?"hsl("+p+", "+v+"%, "+_+"%)":"hsla("+p+", "+v+"%, "+_+"%, "+this._roundA+")"},toHex:function(c){return b(this._r,this._g,this._b,c)},toHexString:function(c){return"#"+this.toHex(c)},toHex8:function(c){return S(this._r,this._g,this._b,this._a,c)},toHex8String:function(c){return"#"+this.toHex8(c)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(V(this._r,255)*100)+"%",g:o(V(this._g,255)*100)+"%",b:o(V(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(V(this._r,255)*100)+"%, "+o(V(this._g,255)*100)+"%, "+o(V(this._b,255)*100)+"%)":"rgba("+o(V(this._r,255)*100)+"%, "+o(V(this._g,255)*100)+"%, "+o(V(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:q[b(this._r,this._g,this._b,!0)]||!1},toFilter:function(c){var p="#"+C(this._r,this._g,this._b,this._a),v=p,_=this._gradientType?"GradientType = 1, ":"";if(c){var M=u(c);v="#"+C(M._r,M._g,M._b,M._a)}return"progid:DXImageTransform.Microsoft.gradient("+_+"startColorstr="+p+",endColorstr="+v+")"},toString:function(c){var p=!!c;c=c||this._format;var v=!1,_=this._a<1&&this._a>=0,M=!p&&_&&(c==="hex"||c==="hex6"||c==="hex3"||c==="hex4"||c==="hex8"||c==="name");return M?c==="name"&&this._a===0?this.toName():this.toRgbString():(c==="rgb"&&(v=this.toRgbString()),c==="prgb"&&(v=this.toPercentageRgbString()),(c==="hex"||c==="hex6")&&(v=this.toHexString()),c==="hex3"&&(v=this.toHexString(!0)),c==="hex4"&&(v=this.toHex8String(!0)),c==="hex8"&&(v=this.toHex8String()),c==="name"&&(v=this.toName()),c==="hsl"&&(v=this.toHslString()),c==="hsv"&&(v=this.toHsvString()),v||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(c,p){var v=c.apply(null,[this].concat([].slice.call(p)));return this._r=v._r,this._g=v._g,this._b=v._b,this.setAlpha(v._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(P,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(E,arguments)},greyscale:function(){return this._applyModification(T,arguments)},spin:function(){return this._applyModification(L,arguments)},_applyCombination:function(c,p){return c.apply(null,[this].concat([].slice.call(p)))},analogous:function(){return this._applyCombination(W,arguments)},complement:function(){return this._applyCombination(B,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(H,arguments)},triad:function(){return this._applyCombination(R,arguments)},tetrad:function(){return this._applyCombination(j,arguments)}},u.fromRatio=function(c,p){if(typeof c=="object"){var v={};for(var _ in c)c.hasOwnProperty(_)&&(_==="a"?v[_]=c[_]:v[_]=Me(c[_]));c=v}return u(c,p)};function f(c){var p={r:0,g:0,b:0},v=1,_=null,M=null,F=null,O=!1,I=!1;return typeof c=="string"&&(c=ke(c)),typeof c=="object"&&(le(c.r)&&le(c.g)&&le(c.b)?(p=d(c.r,c.g,c.b),O=!0,I=String(c.r).substr(-1)==="%"?"prgb":"rgb"):le(c.h)&&le(c.s)&&le(c.v)?(_=Me(c.s),M=Me(c.v),p=w(c.h,_,M),O=!0,I="hsv"):le(c.h)&&le(c.s)&&le(c.l)&&(_=Me(c.s),F=Me(c.l),p=g(c.h,_,F),O=!0,I="hsl"),c.hasOwnProperty("a")&&(v=c.a)),v=z(v),{ok:O,format:c.format||I,r:s(255,a(p.r,0)),g:s(255,a(p.g,0)),b:s(255,a(p.b,0)),a:v}}function d(c,p,v){return{r:V(c,255)*255,g:V(p,255)*255,b:V(v,255)*255}}function h(c,p,v){c=V(c,255),p=V(p,255),v=V(v,255);var _=a(c,p,v),M=s(c,p,v),F,O,I=(_+M)/2;if(_==M)F=O=0;else{var U=_-M;switch(O=I>.5?U/(2-_-M):U/(_+M),_){case c:F=(p-v)/U+(p<v?6:0);break;case p:F=(v-c)/U+2;break;case v:F=(c-p)/U+4;break}F/=6}return{h:F,s:O,l:I}}function g(c,p,v){var _,M,F;c=V(c,360),p=V(p,100),v=V(v,100);function O(N,Q,K){return K<0&&(K+=1),K>1&&(K-=1),K<1/6?N+(Q-N)*6*K:K<1/2?Q:K<2/3?N+(Q-N)*(2/3-K)*6:N}if(p===0)_=M=F=v;else{var I=v<.5?v*(1+p):v+p-v*p,U=2*v-I;_=O(U,I,c+1/3),M=O(U,I,c),F=O(U,I,c-1/3)}return{r:_*255,g:M*255,b:F*255}}function y(c,p,v){c=V(c,255),p=V(p,255),v=V(v,255);var _=a(c,p,v),M=s(c,p,v),F,O,I=_,U=_-M;if(O=_===0?0:U/_,_==M)F=0;else{switch(_){case c:F=(p-v)/U+(p<v?6:0);break;case p:F=(v-c)/U+2;break;case v:F=(c-p)/U+4;break}F/=6}return{h:F,s:O,v:I}}function w(c,p,v){c=V(c,360)*6,p=V(p,100),v=V(v,100);var _=t.floor(c),M=c-_,F=v*(1-p),O=v*(1-M*p),I=v*(1-(1-M)*p),U=_%6,N=[v,O,F,F,I,v][U],Q=[I,v,v,O,F,F][U],K=[F,F,I,v,v,O][U];return{r:N*255,g:Q*255,b:K*255}}function b(c,p,v,_){var M=[ve(o(c).toString(16)),ve(o(p).toString(16)),ve(o(v).toString(16))];return _&&M[0].charAt(0)==M[0].charAt(1)&&M[1].charAt(0)==M[1].charAt(1)&&M[2].charAt(0)==M[2].charAt(1)?M[0].charAt(0)+M[1].charAt(0)+M[2].charAt(0):M.join("")}function S(c,p,v,_,M){var F=[ve(o(c).toString(16)),ve(o(p).toString(16)),ve(o(v).toString(16)),ve(oe(_))];return M&&F[0].charAt(0)==F[0].charAt(1)&&F[1].charAt(0)==F[1].charAt(1)&&F[2].charAt(0)==F[2].charAt(1)&&F[3].charAt(0)==F[3].charAt(1)?F[0].charAt(0)+F[1].charAt(0)+F[2].charAt(0)+F[3].charAt(0):F.join("")}function C(c,p,v,_){var M=[ve(oe(_)),ve(o(c).toString(16)),ve(o(p).toString(16)),ve(o(v).toString(16))];return M.join("")}u.equals=function(c,p){return!c||!p?!1:u(c).toRgbString()==u(p).toRgbString()},u.random=function(){return u.fromRatio({r:l(),g:l(),b:l()})};function A(c,p){p=p===0?0:p||10;var v=u(c).toHsl();return v.s-=p/100,v.s=Y(v.s),u(v)}function E(c,p){p=p===0?0:p||10;var v=u(c).toHsl();return v.s+=p/100,v.s=Y(v.s),u(v)}function T(c){return u(c).desaturate(100)}function m(c,p){p=p===0?0:p||10;var v=u(c).toHsl();return v.l+=p/100,v.l=Y(v.l),u(v)}function x(c,p){p=p===0?0:p||10;var v=u(c).toRgb();return v.r=a(0,s(255,v.r-o(255*-(p/100)))),v.g=a(0,s(255,v.g-o(255*-(p/100)))),v.b=a(0,s(255,v.b-o(255*-(p/100)))),u(v)}function P(c,p){p=p===0?0:p||10;var v=u(c).toHsl();return v.l-=p/100,v.l=Y(v.l),u(v)}function L(c,p){var v=u(c).toHsl(),_=(v.h+p)%360;return v.h=_<0?360+_:_,u(v)}function B(c){var p=u(c).toHsl();return p.h=(p.h+180)%360,u(p)}function R(c){var p=u(c).toHsl(),v=p.h;return[u(c),u({h:(v+120)%360,s:p.s,l:p.l}),u({h:(v+240)%360,s:p.s,l:p.l})]}function j(c){var p=u(c).toHsl(),v=p.h;return[u(c),u({h:(v+90)%360,s:p.s,l:p.l}),u({h:(v+180)%360,s:p.s,l:p.l}),u({h:(v+270)%360,s:p.s,l:p.l})]}function H(c){var p=u(c).toHsl(),v=p.h;return[u(c),u({h:(v+72)%360,s:p.s,l:p.l}),u({h:(v+216)%360,s:p.s,l:p.l})]}function W(c,p,v){p=p||6,v=v||30;var _=u(c).toHsl(),M=360/v,F=[u(c)];for(_.h=(_.h-(M*p>>1)+720)%360;--p;)_.h=(_.h+M)%360,F.push(u(_));return F}function k(c,p){p=p||6;for(var v=u(c).toHsv(),_=v.h,M=v.s,F=v.v,O=[],I=1/p;p--;)O.push(u({h:_,s:M,v:F})),F=(F+I)%1;return O}u.mix=function(c,p,v){v=v===0?0:v||50;var _=u(c).toRgb(),M=u(p).toRgb(),F=v/100,O={r:(M.r-_.r)*F+_.r,g:(M.g-_.g)*F+_.g,b:(M.b-_.b)*F+_.b,a:(M.a-_.a)*F+_.a};return u(O)},u.readability=function(c,p){var v=u(c),_=u(p);return(t.max(v.getLuminance(),_.getLuminance())+.05)/(t.min(v.getLuminance(),_.getLuminance())+.05)},u.isReadable=function(c,p,v){var _=u.readability(c,p),M,F;switch(F=!1,M=Ne(v),M.level+M.size){case"AAsmall":case"AAAlarge":F=_>=4.5;break;case"AAlarge":F=_>=3;break;case"AAAsmall":F=_>=7;break}return F},u.mostReadable=function(c,p,v){var _=null,M=0,F,O,I,U;v=v||{},O=v.includeFallbackColors,I=v.level,U=v.size;for(var N=0;N<p.length;N++)F=u.readability(c,p[N]),F>M&&(M=F,_=u(p[N]));return u.isReadable(c,_,{level:I,size:U})||!O?_:(v.includeFallbackColors=!1,u.mostReadable(c,["#fff","#000"],v))};var $=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},q=u.hexNames=Z($);function Z(c){var p={};for(var v in c)c.hasOwnProperty(v)&&(p[c[v]]=v);return p}function z(c){return c=parseFloat(c),(isNaN(c)||c<0||c>1)&&(c=1),c}function V(c,p){te(c)&&(c="100%");var v=re(c);return c=s(p,a(0,parseFloat(c))),v&&(c=parseInt(c*p,10)/100),t.abs(c-p)<1e-6?1:c%p/parseFloat(p)}function Y(c){return s(1,a(0,c))}function X(c){return parseInt(c,16)}function te(c){return typeof c=="string"&&c.indexOf(".")!=-1&&parseFloat(c)===1}function re(c){return typeof c=="string"&&c.indexOf("%")!=-1}function ve(c){return c.length==1?"0"+c:""+c}function Me(c){return c<=1&&(c=c*100+"%"),c}function oe(c){return t.round(parseFloat(c)*255).toString(16)}function de(c){return X(c)/255}var ue=function(){var c="[-\\+]?\\d+%?",p="[-\\+]?\\d*\\.\\d+%?",v="(?:"+p+")|(?:"+c+")",_="[\\s|\\(]+("+v+")[,|\\s]+("+v+")[,|\\s]+("+v+")\\s*\\)?",M="[\\s|\\(]+("+v+")[,|\\s]+("+v+")[,|\\s]+("+v+")[,|\\s]+("+v+")\\s*\\)?";return{CSS_UNIT:new RegExp(v),rgb:new RegExp("rgb"+_),rgba:new RegExp("rgba"+M),hsl:new RegExp("hsl"+_),hsla:new RegExp("hsla"+M),hsv:new RegExp("hsv"+_),hsva:new RegExp("hsva"+M),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function le(c){return!!ue.CSS_UNIT.exec(c)}function ke(c){c=c.replace(n,"").replace(r,"").toLowerCase();var p=!1;if($[c])c=$[c],p=!0;else if(c=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var v;return(v=ue.rgb.exec(c))?{r:v[1],g:v[2],b:v[3]}:(v=ue.rgba.exec(c))?{r:v[1],g:v[2],b:v[3],a:v[4]}:(v=ue.hsl.exec(c))?{h:v[1],s:v[2],l:v[3]}:(v=ue.hsla.exec(c))?{h:v[1],s:v[2],l:v[3],a:v[4]}:(v=ue.hsv.exec(c))?{h:v[1],s:v[2],v:v[3]}:(v=ue.hsva.exec(c))?{h:v[1],s:v[2],v:v[3],a:v[4]}:(v=ue.hex8.exec(c))?{r:X(v[1]),g:X(v[2]),b:X(v[3]),a:de(v[4]),format:p?"name":"hex8"}:(v=ue.hex6.exec(c))?{r:X(v[1]),g:X(v[2]),b:X(v[3]),format:p?"name":"hex"}:(v=ue.hex4.exec(c))?{r:X(v[1]+""+v[1]),g:X(v[2]+""+v[2]),b:X(v[3]+""+v[3]),a:de(v[4]+""+v[4]),format:p?"name":"hex8"}:(v=ue.hex3.exec(c))?{r:X(v[1]+""+v[1]),g:X(v[2]+""+v[2]),b:X(v[3]+""+v[3]),format:p?"name":"hex"}:!1}function Ne(c){var p,v;return c=c||{level:"AA",size:"small"},p=(c.level||"AA").toUpperCase(),v=(c.size||"small").toLowerCase(),p!=="AA"&&p!=="AAA"&&(p="AA"),v!=="small"&&v!=="large"&&(v="small"),{level:p,size:v}}e.exports?e.exports=u:window.tinycolor=u})(Math)})(zl);var He=zl.exports,Pt={areaServer:"https://city-roads.s3-us-west-2.amazonaws.com/nov-02-2020",getDefaultLineColor(){return He("rgba(26, 26, 26, 0.8)")},getLabelColor(){return He("#161616")},getBackgroundColor(){return He("#F7F2E8")}};class Qr{static parse(t,n,r){let i=new Qr;if(typeof r=="string"&&(i.place=r),n&&(i.wayFilter=n),!r)return i;Object.assign(i,r);let o=Xp(t,r.layer);if(o){i.projector=o.getGridProjector();let s=o.getQueryBounds();s&&!i.place&&!i.areaId&&!i.bbox&&(i.place=s.place,i.areaId=s.areaId,i.bbox=s.bbox)}return r.projector&&(i.projector=projector),i}constructor(t){this.place=void 0,this.projector=void 0,this.wayFilter=void 0,this.timeout=900,this.maxHeapByteSize=1073741824,this.outputMethod="skel",Object.assign(this,t)}getQueryTemplate(){if(this.raw)return Promise.resolve({queryString:this.raw});if(!this.wayFilter)throw new Error("Way filter is required");return this.getBounds().then(t=>{let n;if(t.areaId)n=`[timeout:${this.timeout}][maxsize:${this.maxHeapByteSize}][out:json];
area(${t.areaId});
(._; )->.area;
(${this.wayFilter}(area.area); node(w););
out ${this.outputMethod};`;else if(t.bbox){let r=Zp(t.bbox);n=`[timeout:${this.timeout}][maxsize:${this.maxHeapByteSize}][bbox:${r}][out:json];
(${this.wayFilter}; node(w););
out ${this.outputMethod};`}return{bounds:t,queryString:n}})}getBounds(){if(this.place)return Bo(this.place).then(t=>t&&t[0]);if(this.areaId)return Promise.resolve({areaId:this.areaId});if(this.bbox)return Promise.resolve({bbox:this.bbox});throw new Error("Please specify bounding area for the query (place|areaId|bbox)")}}function Xp(e,t){if(t!==void 0)return typeof t=="number"?e.queryLayerAll()[t]:typeof t=="string"?e.queryLayer(t):t}function Zp(e){return e&&e.join(",")}var Do={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Do.read=function(e,t,n,r,i){var o,s,a=i*8-r-1,l=(1<<a)-1,u=l>>1,f=-7,d=n?i-1:0,h=n?-1:1,g=e[t+d];for(d+=h,o=g&(1<<-f)-1,g>>=-f,f+=a;f>0;o=o*256+e[t+d],d+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=s*256+e[t+d],d+=h,f-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(g?-1:1)*s*Math.pow(2,o-r)};Do.write=function(e,t,n,r,i,o){var s,a,l,u=o*8-i-1,f=(1<<u)-1,d=f>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:o-1,y=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=f?(a=0,s=f):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s=s+d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+g]=a&255,g+=y,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+g]=s&255,g+=y,s/=256,u-=8);e[n+g-y]|=w*128};var Qp=ye,sr=Do;function ye(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}ye.Varint=0;ye.Fixed64=1;ye.Bytes=2;ye.Fixed32=5;var Zi=(1<<16)*(1<<16),Js=1/Zi,Jp=12,Hl=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");ye.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=r&7,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ar(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=ta(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ar(this.buf,this.pos)+ar(this.buf,this.pos+4)*Zi;return this.pos+=8,e},readSFixed64:function(){var e=ar(this.buf,this.pos)+ta(this.buf,this.pos+4)*Zi;return this.pos+=8,e},readFloat:function(){var e=sr.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=sr.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,n,r;return r=t[this.pos++],n=r&127,r<128||(r=t[this.pos++],n|=(r&127)<<7,r<128)||(r=t[this.pos++],n|=(r&127)<<14,r<128)||(r=t[this.pos++],n|=(r&127)<<21,r<128)?n:(r=t[this.pos],n|=(r&15)<<28,ev(n,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Jp&&Hl?pv(this.buf,t,e):hv(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==ye.Bytes)return e.push(this.readVarint(t));var n=At(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==ye.Bytes)return e.push(this.readSVarint());var t=At(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==ye.Bytes)return e.push(this.readBoolean());var t=At(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==ye.Bytes)return e.push(this.readFloat());var t=At(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==ye.Bytes)return e.push(this.readDouble());var t=At(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==ye.Bytes)return e.push(this.readFixed32());var t=At(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==ye.Bytes)return e.push(this.readSFixed32());var t=At(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==ye.Bytes)return e.push(this.readFixed64());var t=At(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==ye.Bytes)return e.push(this.readSFixed64());var t=At(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===ye.Varint)for(;this.buf[this.pos++]>127;);else if(t===ye.Bytes)this.pos=this.readVarint()+this.pos;else if(t===ye.Fixed32)this.pos+=4;else if(t===ye.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),nn(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),nn(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),nn(this.buf,e&-1,this.pos),nn(this.buf,Math.floor(e*Js),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),nn(this.buf,e&-1,this.pos),nn(this.buf,Math.floor(e*Js),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){tv(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=vv(this.buf,e,this.pos);var n=this.pos-t;n>=128&&ea(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),sr.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),sr.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&ea(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,ye.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,iv,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,ov,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,lv,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,sv,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,av,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,uv,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,fv,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,cv,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,dv,t)},writeBytesField:function(e,t){this.writeTag(e,ye.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,ye.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,ye.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,ye.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,ye.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,ye.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,ye.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,ye.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,ye.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,ye.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function ev(e,t,n){var r=n.buf,i,o;if(o=r[n.pos++],i=(o&112)>>4,o<128||(o=r[n.pos++],i|=(o&127)<<3,o<128)||(o=r[n.pos++],i|=(o&127)<<10,o<128)||(o=r[n.pos++],i|=(o&127)<<17,o<128)||(o=r[n.pos++],i|=(o&127)<<24,o<128)||(o=r[n.pos++],i|=(o&1)<<31,o<128))return tn(e,i,t);throw new Error("Expected varint not more than 10 bytes")}function At(e){return e.type===ye.Bytes?e.readVarint()+e.pos:e.pos+1}function tn(e,t,n){return n?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function tv(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),n^4294967295?n=n+1|0:(n=0,r=r+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),nv(n,r,t),rv(r,t)}function nv(e,t,n){n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos]=e&127}function rv(e,t){var n=(e&7)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function ea(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function iv(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function ov(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function sv(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function av(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function lv(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function uv(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function fv(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function cv(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function dv(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function ar(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function nn(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function ta(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function hv(e,t,n){for(var r="",i=t;i<n;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a>n)break;var l,u,f;a===1?o<128&&(s=o):a===2?(l=e[i+1],(l&192)===128&&(s=(o&31)<<6|l&63,s<=127&&(s=null))):a===3?(l=e[i+1],u=e[i+2],(l&192)===128&&(u&192)===128&&(s=(o&15)<<12|(l&63)<<6|u&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(l=e[i+1],u=e[i+2],f=e[i+3],(l&192)===128&&(u&192)===128&&(f&192)===128&&(s=(o&15)<<18|(l&63)<<12|(u&63)<<6|f&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,r+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),r+=String.fromCharCode(s),i+=a}return r}function pv(e,t,n){return Hl.decode(e.subarray(t,n))}function vv(e,t,n){for(var r=0,i,o;r<t.length;r++){if(i=t.charCodeAt(r),i>55295&&i<57344)if(o)if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||r+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):o=i;continue}else o&&(e[n++]=239,e[n++]=191,e[n++]=189,o=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=i&63|128)}return n}const De={};De.read=function(e,t){return e.readFields(De._readField,{version:0,name:"",date:"",id:"",nodes:[],ways:[]},t)};De._readField=function(e,t,n){e===1?t.version=n.readVarint():e===2?t.name=n.readString():e===3?t.date=n.readString():e===4?t.id=n.readString():e===5?t.nodes.push(De.node.read(n,n.readVarint()+n.pos)):e===6&&t.ways.push(De.way.read(n,n.readVarint()+n.pos))};De.write=function(e,t){if(e.version&&t.writeVarintField(1,e.version),e.name&&t.writeStringField(2,e.name),e.date&&t.writeStringField(3,e.date),e.id&&t.writeStringField(4,e.id),e.nodes)for(var n=0;n<e.nodes.length;n++)t.writeMessage(5,De.node.write,e.nodes[n]);if(e.ways)for(n=0;n<e.ways.length;n++)t.writeMessage(6,De.way.write,e.ways[n])};De.node={};De.node.read=function(e,t){return e.readFields(De.node._readField,{id:0,lat:0,lon:0},t)};De.node._readField=function(e,t,n){e===1?t.id=n.readVarint():e===2?t.lat=n.readFloat():e===3&&(t.lon=n.readFloat())};De.node.write=function(e,t){e.id&&t.writeVarintField(1,e.id),e.lat&&t.writeFloatField(2,e.lat),e.lon&&t.writeFloatField(3,e.lon)};De.way={};De.way.read=function(e,t){return e.readFields(De.way._readField,{nodes:[]},t)};De.way._readField=function(e,t,n){e===1&&n.readPackedVarint(t.nodes)};De.way.write=function(e,t){e.nodes&&t.writePackedVarint(1,e.nodes)};const na="Find City Bounds",gv={name:"FindPlace",components:{LoadingIcon:kl},data(){const e=Ve.get("q")||"";let t=ia();return{enteredInput:e,loading:null,lastCancel:null,suggestionsLoaded:!1,boxInTheMiddle:!0,stillLoading:0,error:null,hideInput:!1,noRoads:!1,clicked:!1,showWarning:t,mainActionText:t?"Download Area":na,suggestions:[]}},watch:{enteredInput(){this.mainActionText=na,this.showWarning=!1,this.hideInput=!1,Ve.unsetPlace()}},mounted(){this.$refs.input.focus(),Ve.get("auto")&&this.onSubmit()},beforeUnmount(){this.lastCancel&&this.lastCancel(),clearInterval(this.notifyStillLoading)},methods:{onSubmit(){Ve.set("q",this.enteredInput),this.cancelRequest(),this.suggestions=[],this.noRoads=!1,this.error=!1,this.showWarning=!1;const e=ia(this.enteredInput);if(e){this.pickSuggestion(e);return}this.loading="Searching cities that match your query...",Bo(this.enteredInput).then(t=>{this.loading=null,this.hideInput=t&&t.length,this.boxInTheMiddle?(this.boxInTheMiddle=!1,setTimeout(()=>{this.suggestionsLoaded=!0,this.suggestions=t},50)):(this.suggestionsLoaded=!0,this.suggestions=t)})},getBugReportURL(e){let t=encodeURIComponent("OSM Error"),n="";return e&&(n="Hello, an error occurred on the website:\n\n```\n"+e.toString()+"\n```\n\n Can you please help?"),`https://github.com/anvaka/city-roads/issues/new?title=${t}&body=${encodeURIComponent(n)}`},updateProgress(e){if(this.stillLoading=0,clearInterval(this.notifyStillLoading),e.loaded<0){this.loading="Trying a different server",this.restartLoadingMonitor();return}e.percent!==void 0?this.loading="Loaded "+Math.round(100*e.percent)+"% ("+ra(e.loaded)+" bytes)...":this.loading="Loaded "+ra(e.loaded)+" bytes..."},retry(){this.lastSuggestion&&this.pickSuggestion(this.lastSuggestion)},pickSuggestion(e){this.lastSuggestion=e,this.error=!1,Ve.isCacheEnabled()&&e.areaId?this.checkCache(e).catch(t=>{if(!t.cancelled)return this.useOSM(e)}):this.useOSM(e)},restartLoadingMonitor(){clearInterval(this.notifyStillLoading),this.stillLoading=0,this.notifyStillLoading=setInterval(()=>{this.stillLoading++},1e4)},checkCache(e){this.loading="Checking cache...";let t=e.areaId;return Xr(Pt.areaServer+"/"+t+".pbf",{progress:this.generateNewProgressToken(),responseType:"arraybuffer"}).then(n=>{var r=new Uint8Array(n);return r}).then(n=>{var r=new Qp(n),i=De.read(r);let o=Un.fromPBF(i);this.$emit("loaded",o)})},useOSM(e){this.loading="Connecting to OpenStreetMap...",this.restartLoadingMonitor(),ct.runFromOptions(new Qr({wayFilter:ct.Road,areaId:e.areaId,bbox:e.bbox}),this.generateNewProgressToken()).then(t=>{this.loading=null,t.hasRoads()?(t.setName(e.name),t.setId(e.areaId||e.osm_id),t.setIsArea(e.areaId),t.setBBox(mv(e.bbox)),this.$emit("loaded",t)):this.noRoads=!0}).catch(t=>{if(t.cancelled){this.loading=null;return}console.error(t),this.error=t,this.loading=null,this.suggestions=[]}).finally(()=>{clearInterval(this.notifyStillLoading),this.stillLoading=0})},cancelRequest(){this.progressToken&&(this.progressToken.cancel(),this.progressToken=null,this.loading=!1)},generateNewProgressToken(){return this.progressToken&&(this.progressToken.cancel(),this.progressToken=null),this.progressToken=new Kr(this.updateProgress),this.progressToken}}};function mv(e){return e&&e.join(",")}function ra(e){return Number.isFinite(e)?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"N/A"}function ia(e){let t=yv();if(t)return{name:e,areaId:t};let n=wv();if(n)return{name:e,osm_id:n.osm_id,bbox:n.bbox}}function yv(){let e=Ve.get("areaId");return Number.isFinite(Number.parseInt(e,10))||(e=null),e}function wv(){let e=Ve.get("osm_id");if(!Number.isFinite(Number.parseInt(e,10)))return;let t=bv(Ve.get("bbox"));if(!!t)return{osm_id:e,bbox:t}}function bv(e){if(!e)return null;let t=e.split(",").map(n=>Number.parseFloat(n)).filter(n=>Number.isFinite(n));return t.length===4?t:null}const xv={key:0},_v=G("h3",{class:"site-header"},"city roads",-1),Ev=G("p",{class:"description"},"This website renders every single road within a city",-1),Cv=[_v,Ev],Av={key:1,class:"prompt message note shadow"},Tv={key:2,class:"results"},Sv={key:0,class:"suggestions shadow"},Mv=G("div",{class:"prompt message"},[G("div",null,"Select boundaries below to download all roads within"),G("div",{class:"note"},"large cities may require 200MB+ of data transfer and a powerful device")],-1),Pv=["onClick"],Fv={key:1,class:"no-results message shadow"},Lv={key:2,class:"no-results message shadow"},kv={key:3,class:"error message shadow"},Rv=Ie("Sorry, we were not able to download data from the OpenStreetMap. It could be very busy at the moment processing other requests. "),Bv=G("br",null,null,-1),Iv=G("br",null,null,-1),Dv=Ie(" Please bookmark this website and "),Ov=Ie(" later?"),Nv={class:"error-links"},Vv=G("a",{href:"https://twitter.com/anvaka/status/1218971717734789120",title:"see what it supposed to do",target:"_blank"},"see how it should have worked",-1),Uv=["href","title"],zv={key:4,class:"loading message shadow"},Hv={key:0,class:"load-padding"},$v={key:1,class:"load-padding"};function jv(e,t,n,r,i,o){const s=pt("loading-icon");return se(),fe("div",{class:Qt(["find-place",{centered:i.boxInTheMiddle}])},[i.boxInTheMiddle?(se(),fe("div",xv,Cv)):Te("",!0),G("form",{onSubmit:t[2]||(t[2]=_t((...a)=>o.onSubmit&&o.onSubmit(...a),["prevent"])),class:"search-box"},[Bn(G("input",{class:"query-input","onUpdate:modelValue":t[0]||(t[0]=a=>i.enteredInput=a),type:"text",placeholder:"Enter a city name to start",ref:"input"},null,512),[[al,i.enteredInput]]),i.enteredInput&&!i.hideInput?(se(),fe("a",{key:0,type:"submit",class:"search-submit",href:"#",onClick:t[1]||(t[1]=_t((...a)=>o.onSubmit&&o.onSubmit(...a),["prevent"]))},Ot(i.mainActionText),1)):Te("",!0)],32),i.showWarning?(se(),fe("div",Av," Note: Large cities may require 200MB+ of data transfer and may need a powerful device to render. ")):Te("",!0),i.loading?Te("",!0):(se(),fe("div",Tv,[i.suggestionsLoaded&&i.suggestions.length?(se(),fe("div",Sv,[Mv,G("ul",null,[(se(!0),fe(Ge,null,mo(i.suggestions,(a,l)=>(se(),fe("li",{key:l},[G("a",{onClick:_t(u=>o.pickSuggestion(a),["prevent"]),class:"suggestion",href:"#"},[G("span",null,[Ie(Ot(a.name)+" ",1),G("small",null,"("+Ot(a.type)+")",1)])],8,Pv)]))),128))])])):Te("",!0),i.suggestionsLoaded&&!i.suggestions.length&&!i.loading&&!i.error?(se(),fe("div",Fv," Didn't find matching cities. Try a different query? ")):Te("",!0),i.noRoads?(se(),fe("div",Lv," Didn't find any roads. Try a different query? ")):Te("",!0)])),i.error?(se(),fe("div",kv,[G("div",null,[Rv,Bv,Iv,Dv,G("a",{href:"#",onClick:t[3]||(t[3]=_t((...a)=>o.retry&&o.retry(...a),["prevent"]))},"try again"),Ov]),G("div",Nv,[Vv,G("a",{href:o.getBugReportURL(i.error),title:"report error: "+i.error,target:"_blank"},"report this bug",8,Uv)])])):Te("",!0),i.loading?(se(),fe("div",zv,[Se(s),G("span",null,Ot(i.loading),1),G("a",{href:"#",onClick:t[4]||(t[4]=_t((...a)=>o.cancelRequest&&o.cancelRequest(...a),["prevent"])),class:"cancel-request"},"cancel"),i.stillLoading>0?(se(),fe("div",Hv," Still loading... ")):Te("",!0),i.stillLoading>1?(se(),fe("div",$v," Sorry it takes so long! ")):Te("",!0)])):Te("",!0)],2)}var Wv=ut(gv,[["render",jv]]);const an=[],Tt="@@clickoutsideContext";let Jr,qv=0;document.addEventListener("mousedown",e=>Jr=e,!0);document.addEventListener("mouseup",e=>{an.forEach(t=>t[Tt].documentHandler(e,Jr))},!0);document.addEventListener("touchstart",e=>{Jr=e},!0);document.addEventListener("touchend",e=>{an.forEach(t=>t[Tt].documentHandler(e,Jr))},!0);function oa(e,t,n){return function(r={},i={}){if(!n||!r.target||!i.target||e.contains(r.target)||e.contains(i.target)||e===r.target)return;const o=e[Tt].handler;o&&o()}}var $l={created(e,t,n){an.push(e);const r=qv++;e[Tt]={id:r,documentHandler:oa(e,t,n),handler:t.value}},updated(e,t,n){e[Tt].documentHandler=oa(e,t,n),e[Tt].handler=t.value},unmounted(e){let t=an.length;for(let n=0;n<t;n++)if(an[n][Tt].id===e[Tt].id){an.splice(n,1);break}delete e[Tt]}};const Gv={name:"EditableLabel",props:["modelValue","printable","overlayManager"],emits:["update:modelValue"],directives:{ClickOutside:$l},mounted(){this.$el.receiveFocus=this.focus,this.$el.style.pointerEvents="none"},methods:{looseFocus(){this.$refs.input.blur()},focus(){this.$refs.input.focus()}}},Yv={class:"can-drag"},Kv={class:"editable-label"},Xv=["value"];function Zv(e,t,n,r,i,o){const s=qa("click-outside");return Bn((se(),fe("div",Yv,[G("div",Kv,[G("span",{class:Qt({printable:n.printable})},Ot(n.modelValue),3),G("input",{value:n.modelValue,onInput:t[0]||(t[0]=a=>e.$emit("update:modelValue",a.target.value)),ref:"input"},null,40,Xv)])])),[[s,o.looseFocus]])}var Qv=ut(Gv,[["render",Zv]]);function yi(e={},t=0){const n=e&&e.a;let r;e&&e.hsl?r=He(e.hsl):e&&e.hex&&e.hex.length>0?r=He(e.hex):e&&e.hsv?r=He(e.hsv):e&&e.rgba?r=He(e.rgba):e&&e.rgb?r=He(e.rgb):r=He(e),r&&(r._a===void 0||r._a===null)&&r.setAlpha(n||1);const i=r.toHsl(),o=r.toHsv();return i.s===0&&(o.h=i.h=e.h||e.hsl&&e.hsl.h||t||0),{hsl:i,hex:r.toHexString().toUpperCase(),hex8:r.toHex8String().toUpperCase(),rgba:r.toRgb(),hsv:o,oldHue:e.h||t||i.h,source:e.source,a:e.a||r.getAlpha()}}var Jv={props:["modelValue"],data(){return{val:yi(this.modelValue)}},computed:{colors:{get(){return this.val},set(e){this.val=e,this.$emit("update:modelValue",e)}}},watch:{modelValue(e){this.val=yi(e)}},methods:{colorChange(e,t){this.oldHue=this.colors.hsl.h,this.colors=yi(e,t||this.oldHue)},isValidHex(e){return He(e).isValid()},simpleCheckForValidColor(e){const t=["r","g","b","a","h","s","l","v"];let n=0,r=0;for(let i=0;i<t.length;i++){const o=t[i];e[o]&&(n++,isNaN(e[o])||r++)}if(n===r)return e},paletteUpperCase(e){return e.map(t=>t.toUpperCase())},isTransparent(e){return He(e).getAlpha()===0}}};const e0={name:"editableInput",props:{label:String,labelText:String,desc:String,modelValue:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.modelValue},set(e){if(this.max!==void 0&&+e>this.max)this.$refs.input.value=this.max;else return e}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(e){this.handleChange(e.target.value)},handleChange(e){const t={};t[this.label]=e,t.hex===void 0&&t["#"]===void 0?this.$emit("change",t):e.length>5&&this.$emit("change",t)},handleKeyDown(e){let t=this.val;const n=Number(t);if(n){const r=this.arrowOffset||1;e.keyCode===38&&(t=n+r,this.handleChange(t),e.preventDefault()),e.keyCode===40&&(t=n-r,this.handleChange(t),e.preventDefault())}}}},t0={class:"vc-editable-input"},n0=["aria-labelledby"],r0=["for","id"],i0={class:"vc-input__desc"};function o0(e,t,n,r,i,o){return se(),fe("div",t0,[Bn(G("input",{"aria-labelledby":o.labelId,class:"vc-input__input","onUpdate:modelValue":t[0]||(t[0]=s=>o.val=s),onKeydown:t[1]||(t[1]=(...s)=>o.handleKeyDown&&o.handleKeyDown(...s)),onInput:t[2]||(t[2]=(...s)=>o.update&&o.update(...s)),ref:"input"},null,40,n0),[[al,o.val]]),G("span",{for:n.label,class:"vc-input__label",id:o.labelId},Ot(o.labelSpanText),9,r0),G("span",i0,Ot(n.desc),1)])}var s0=ut(e0,[["render",o0]]);const a0={name:"Saturation",props:{modelValue:Object},computed:{colors(){return this.modelValue},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return-(this.colors.hsv.v*100)+1+100+"%"},pointerLeft(){return this.colors.hsv.s*100+"%"}},methods:{throttle:l0((e,t)=>{e(t)},20),handleChange(e,t){!t&&e.preventDefault();const n=this.$refs.container;if(!n)return;const r=n.clientWidth,i=n.clientHeight,o=n.getBoundingClientRect().left+window.pageXOffset,s=n.getBoundingClientRect().top+window.pageYOffset,a=e.pageX||(e.touches?e.touches[0].pageX:0),l=e.pageY||(e.touches?e.touches[0].pageY:0),u=wi(a-o,0,r),f=wi(l-s,0,i),d=u/r,h=wi(-(f/i)+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:d,v:h,a:this.colors.hsv.a,source:"hsva"})},onChange(e){this.$emit("change",e)},handleMouseDown(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};function wi(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}function l0(e,t){var n=0;return function(...r){var i=new Date;i-n>=t&&(e(...r),n=i)}}const u0=G("div",{class:"vc-saturation--white"},null,-1),f0=G("div",{class:"vc-saturation--black"},null,-1),c0=G("div",{class:"vc-saturation-circle"},null,-1),d0=[c0];function h0(e,t,n,r,i,o){return se(),fe("div",{class:"vc-saturation",style:je({background:o.bgColor}),ref:"container",onMousedown:t[0]||(t[0]=(...s)=>o.handleMouseDown&&o.handleMouseDown(...s)),onTouchmove:t[1]||(t[1]=(...s)=>o.handleChange&&o.handleChange(...s)),onTouchstart:t[2]||(t[2]=(...s)=>o.handleChange&&o.handleChange(...s))},[u0,f0,G("div",{class:"vc-saturation-pointer",style:je({top:o.pointerTop,left:o.pointerLeft})},d0,4)],36)}var p0=ut(a0,[["render",h0]]);const v0={name:"Hue",props:{modelValue:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){const e=this.modelValue.hsl.h;return e!==0&&e-this.oldHue>0&&(this.pullDirection="right"),e!==0&&e-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=e,this.modelValue},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:-(this.colors.hsl.h*100/360)+100+"%":0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":this.colors.hsl.h*100/360+"%"}},methods:{handleChange(e,t){!t&&e.preventDefault();const n=this.$refs.container;if(!n)return;const r=n.clientWidth,i=n.clientHeight,o=n.getBoundingClientRect().left+window.pageXOffset,s=n.getBoundingClientRect().top+window.pageYOffset,a=e.pageX||(e.touches?e.touches[0].pageX:0),l=e.pageY||(e.touches?e.touches[0].pageY:0),u=a-o,f=l-s;let d,h;this.direction==="vertical"?(f<0?d=360:f>i?d=0:(h=-(f*100/i)+100,d=360*h/100),this.colors.hsl.h!==d&&this.$emit("change",{h:d,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(u<0?d=0:u>r?d=360:(h=u*100/r,d=360*h/100),this.colors.hsl.h!==d&&this.$emit("change",{h:d,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}},g0=["aria-valuenow"],m0=G("div",{class:"vc-hue-picker"},null,-1),y0=[m0];function w0(e,t,n,r,i,o){return se(),fe("div",{class:Qt(["vc-hue",o.directionClass])},[G("div",{class:"vc-hue-container",role:"slider","aria-valuenow":o.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",ref:"container",onMousedown:t[0]||(t[0]=(...s)=>o.handleMouseDown&&o.handleMouseDown(...s)),onTouchmove:t[1]||(t[1]=(...s)=>o.handleChange&&o.handleChange(...s)),onTouchstart:t[2]||(t[2]=(...s)=>o.handleChange&&o.handleChange(...s))},[G("div",{class:"vc-hue-pointer",style:je({top:o.pointerTop,left:o.pointerLeft}),role:"presentation"},y0,4)],40,g0)],2)}var b0=ut(v0,[["render",w0]]);const bi={},x0={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":"url("+E0(this.white,this.grey,this.size)+")"}}}};function _0(e,t,n){if(typeof document=="undefined")return null;const r=document.createElement("canvas");r.width=r.height=n*2;const i=r.getContext("2d");return i?(i.fillStyle=e,i.fillRect(0,0,r.width,r.height),i.fillStyle=t,i.fillRect(0,0,n,n),i.translate(n,n),i.fillRect(0,0,n,n),r.toDataURL()):null}function E0(e,t,n){const r=e+","+t+","+n;if(bi[r])return bi[r];{const i=_0(e,t,n);return bi[r]=i,i}}function C0(e,t,n,r,i,o){return se(),fe("div",{class:"vc-checkerboard",style:je(o.bgStyle)},null,4)}var jl=ut(x0,[["render",C0]]);const A0={name:"Alpha",props:{modelValue:Object,onChange:Function},components:{checkboard:jl},computed:{colors(){return this.modelValue},gradientColor(){const e=this.colors.rgba,t=[e.r,e.g,e.b].join(",");return"linear-gradient(to right, rgba("+t+", 0) 0%, rgba("+t+", 1) 100%)"}},methods:{handleChange(e,t){!t&&e.preventDefault();const n=this.$refs.container;if(!n)return;const r=n.clientWidth,i=n.getBoundingClientRect().left+window.pageXOffset,s=(e.pageX||(e.touches?e.touches[0].pageX:0))-i;let a;s<0?a=0:s>r?a=1:a=Math.round(s*100/r)/100,this.colors.a!==a&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a,source:"rgba"})},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}},T0={class:"vc-alpha"},S0={class:"vc-alpha-checkboard-wrap"},M0=G("div",{class:"vc-alpha-picker"},null,-1),P0=[M0];function F0(e,t,n,r,i,o){const s=pt("checkboard");return se(),fe("div",T0,[G("div",S0,[Se(s)]),G("div",{class:"vc-alpha-gradient",style:je({background:o.gradientColor})},null,4),G("div",{class:"vc-alpha-container",ref:"container",onMousedown:t[0]||(t[0]=(...a)=>o.handleMouseDown&&o.handleMouseDown(...a)),onTouchmove:t[1]||(t[1]=(...a)=>o.handleChange&&o.handleChange(...a)),onTouchstart:t[2]||(t[2]=(...a)=>o.handleChange&&o.handleChange(...a))},[G("div",{class:"vc-alpha-pointer",style:je({left:o.colors.a*100+"%"})},P0,4)],544)])}var L0=ut(A0,[["render",F0]]);const k0=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"],R0={name:"Sketch",mixins:[Jv],components:{saturation:p0,hue:b0,alpha:L0,"ed-in":s0,checkboard:jl},props:{presetColors:{type:Array,default(){return k0}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let e;return this.colors.a<1?e=this.colors.hex8:e=this.colors.hex,e.replace("#","")},activeColor(){const e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"}},methods:{handlePreset(e){this.colorChange({hex:e,source:"hex"})},childChange(e){this.colorChange(e)},inputChange(e){!e||(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b||e.a)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}},B0={class:"vc-sketch-saturation-wrap"},I0={class:"vc-sketch-controls"},D0={class:"vc-sketch-sliders"},O0={class:"vc-sketch-hue-wrap"},N0={key:0,class:"vc-sketch-alpha-wrap"},V0={class:"vc-sketch-color-wrap"},U0=["aria-label"],z0={key:0,class:"vc-sketch-field"},H0={class:"vc-sketch-field--double"},$0={class:"vc-sketch-field--single"},j0={class:"vc-sketch-field--single"},W0={class:"vc-sketch-field--single"},q0={key:0,class:"vc-sketch-field--single"},G0={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},Y0=["aria-label","onClick"],K0=["aria-label","onClick"];function X0(e,t,n,r,i,o){const s=pt("saturation"),a=pt("hue"),l=pt("alpha"),u=pt("checkboard"),f=pt("ed-in");return se(),fe("div",{role:"application","aria-label":"Sketch color picker",class:Qt(["vc-sketch",n.disableAlpha?"vc-sketch__disable-alpha":""])},[G("div",B0,[Se(s,{modelValue:e.colors,"onUpdate:modelValue":t[0]||(t[0]=d=>e.colors=d),onChange:o.childChange},null,8,["modelValue","onChange"])]),G("div",I0,[G("div",D0,[G("div",O0,[Se(a,{modelValue:e.colors,"onUpdate:modelValue":t[1]||(t[1]=d=>e.colors=d),onChange:o.childChange},null,8,["modelValue","onChange"])]),n.disableAlpha?Te("",!0):(se(),fe("div",N0,[Se(l,{modelValue:e.colors,"onUpdate:modelValue":t[2]||(t[2]=d=>e.colors=d),onChange:o.childChange},null,8,["modelValue","onChange"])]))]),G("div",V0,[G("div",{"aria-label":`Current color is ${o.activeColor}`,class:"vc-sketch-active-color",style:je({background:o.activeColor})},null,12,U0),Se(u)])]),n.disableFields?Te("",!0):(se(),fe("div",z0,[G("div",H0,[Se(f,{label:"hex",modelValue:o.hex,onChange:o.inputChange},null,8,["modelValue","onChange"])]),G("div",$0,[Se(f,{label:"r",modelValue:e.colors.rgba.r,onChange:o.inputChange},null,8,["modelValue","onChange"])]),G("div",j0,[Se(f,{label:"g",modelValue:e.colors.rgba.g,onChange:o.inputChange},null,8,["modelValue","onChange"])]),G("div",W0,[Se(f,{label:"b",modelValue:e.colors.rgba.b,onChange:o.inputChange},null,8,["modelValue","onChange"])]),n.disableAlpha?Te("",!0):(se(),fe("div",q0,[Se(f,{label:"a",modelValue:e.colors.a,"arrow-offset":.01,max:1,onChange:o.inputChange},null,8,["modelValue","arrow-offset","onChange"])]))])),G("div",G0,[(se(!0),fe(Ge,null,mo(n.presetColors,d=>(se(),fe(Ge,null,[e.isTransparent(d)?(se(),fe("div",{key:"else-"+d,"aria-label":"Color:"+d,class:"vc-sketch-presets-color",onClick:h=>o.handlePreset(d)},[Se(u)],8,K0)):(se(),fe("div",{class:"vc-sketch-presets-color","aria-label":"Color:"+d,key:"if-"+d,style:je({background:d}),onClick:h=>o.handlePreset(d)},null,12,Y0))],64))),256))])],2)}var Z0=ut(R0,[["render",X0]]);const Q0={name:"vue-colorpicker",components:{"sketch-picker":Z0},directives:{ClickOutside:$l},props:{modelValue:{type:Object}},emits:["update:modelValue","change"],data(){return{showPicker:!1,colors:{hex:"#FFFFFF",a:1},colorValue:"#FFFFFF",panelLeft:"0px",panelTop:"0px"}},computed:{pickerType(){return"sketch-picker"},isTransparent(){return this.colors.a===0},btnStyle(){if(this.isTransparent)return{background:"#eee",backgroundImage:"linear-gradient(45deg, rgba(0,0,0,.25) 25%, transparent 0, transparent 75%,rgba(0,0,0,.25)0), linear-gradient(45deg, rgba(0,0,0,.25)25%,transparent 0, transparent 75%,rgba(0,0,0,.25)0)",backgroundPosition:"0 0, 11px 11px",backgroundSize:"22px 22px"};let{r:e,g:t,b:n,a:r}=this.colorValue;return{background:`rgba(${e}, ${t}, ${n}, ${r})`}}},watch:{modelValue(e,t){e!==t&&this.updateColorObject(e)},showPicker(e){if(!e)return;const t=220,n=320;let r=this.$refs.triggerButton.getBoundingClientRect(),i=r.x,o=r.bottom;r.y+n>window.innerHeight&&(o=Math.max(0,window.innerHeight-n),i+=36),i+t>window.innerWidth&&(i=Math.max(0,window.innerWidth-t)),this.panelLeft=i+"px",this.panelTop=o+"px"}},methods:{hide(){this.showPicker=!1},changeColor(e){this.colorValue=e.rgba,this.$emit("update:modelValue",this.colorValue),this.$emit("change",this.colorValue)},updateColorObject(e){if(!e)return;const t=He(e);!e||e==="transparent"?this.colors={hex:"#FFFFFF",hsl:{h:0,s:0,l:1,a:0},hsv:{h:0,s:0,v:1,a:0},rgba:{r:255,g:255,b:255,a:0},a:0}:this.colors={hex:t.toHexString(),hsl:t.toHsl(),hsv:t.toHsv(),rgba:t.toRgb(),a:t.getAlpha()},this.colorValue=this.colors.rgba}},mounted(){this.updateColorObject(this.modelValue)}};function J0(e,t,n,r,i,o){const s=qa("click-outside");return Bn((se(),fe("div",{class:"vue-colorpicker",onClick:t[0]||(t[0]=a=>i.showPicker=!0)},[G("span",{class:"vue-colorpicker-btn",style:je(o.btnStyle),ref:"triggerButton"},null,4),Bn(G("div",{class:"vue-colorpicker-panel",style:je({left:i.panelLeft,top:i.panelTop})},[(se(),_r(Af(o.pickerType),{modelValue:i.colors,"onUpdate:modelValue":o.changeColor},null,8,["modelValue","onUpdate:modelValue"]))],4),[[Mc,i.showPicker]])])),[[s,o.hide]])}var eg=ut(Q0,[["render",J0],["__scopeId","data-v-01827dd4"]]),St=Fo({});let sa=0;class Wl{get color(){return this._color}set color(t){let n=He(t);this._color=n,this.lines&&(this.lines.color=aa(n.toRgb())),this.scene&&this.scene.renderFrame()}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,!(!this.lines||!this.scene)&&this.lines.setLineWidth(t)}constructor(){this._color=Pt.getDefaultLineColor(),this.grid=null,this.lines=null,this.scene=null,this.dx=0,this.dy=0,this.scale=1,this.hidden=!1,this.id="paths_"+sa,this._lineWidth=1,sa+=1}getGridProjector(){if(this.grid)return this.grid.projector}getQueryBounds(){const{grid:t}=this;if(t){if(t.queryBounds)return t.queryBounds;if(t.isArea)return{areaId:t.id}}}setGrid(t){this.grid=t,this.scene&&this.bindToScene(this.scene)}getViewBox(){if(!this.grid)return null;let{width:t,height:n}=this.grid.getProjectedRect(),r=Math.max(t,n)/4;return{left:-r,top:r,right:r,bottom:-r}}moveTo(t,n=0){console.warn("Please use moveBy() instead. The moveTo() is under construction")}moveBy(t,n=0){this.dx=t,this.dy=n,this._transferTransform()}buildLinesCollection(){if(this.lines)return this.lines;let t=this.grid,n=new Ln(t.wayPointCount,{width:this._lineWidth,allowColors:!1,is3D:!1});t.forEachWay(function(i,o){n.add({from:i,to:o})});let r=He(this._color).toRgb();n.color=aa(r),n.id=this.id,this.lines=n}destroy(){!this.scene||!this.lines||this.scene.removeChild(this.lines)}bindToScene(t){this.scene&&this.lines&&console.error("You seem to be adding this layer twice..."),this.scene=t,this.grid&&(this.buildLinesCollection(),!this.hidden&&this.scene.appendChild(this.lines))}hide(){this.hidden||(this.hidden=!0,!(!this.scene||!this.grid)&&this.scene.removeChild(this.lines))}show(){if(!!this.hidden){if(this.hidden=!1,!this.scene||!this.grid){console.log("Layer will be shown when grid is available");return}this.scene.appendChild(this.lines)}}_transferTransform(){!this.lines||(this.lines.translate([this.dx,this.dy,0]),this.lines.updateWorldTransform(!0),this.scene&&this.scene.renderFrame(!0))}}function aa(e){return{r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}}function tg(e,t){const n=e.getRenderer(),r={open(){return`<!-- Generator: https://github.com/anvaka/city-roads
Data \xA9 OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright
-->`},close(){return o()}};return t.minLength&&(r.beforeWrite=s=>{let a=0;for(let l=1;l<s.length;++l)if(a+=Math.hypot(s[l].x-s[l-1].x,s[l].y-s[l-1].y),a>t.minLength)return!0;return a>t.minLength}),r.round=t.round,Tl(n,r);function o(){let s=n.getPixelRatio();return t.printable.map(a=>{if(a.element instanceof SVGSVGElement){let l=a.bounds;l.left*s,l.top*s;let u=a.element;u.setAttribute("x",l.left*s),u.setAttribute("y",l.top*s),u.setAttribute("width",l.width*s),u.setAttribute("height",l.height*s);let f=new XMLSerializer().serializeToString(a.element);return u.removeAttribute("x"),u.removeAttribute("y"),u.removeAttribute("width"),u.removeAttribute("height"),f}else{let l=a;if(!l.text)return;let u=l.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),f=l.bounds,d=(f.right-l.paddingRight)*s,h=(f.bottom-l.paddingBottom)*s,g=l.fontSize*s,y=l.fontFamily.replace(/"/g,"'");return`<text text-anchor="end" x="${d}" y="${h}" fill="${l.color}" font-family="${y}" font-size="${g}">${u}</text>`}}).filter(a=>a).join(`
`)}}function ng(e,t){t=t||{};let n=tg(e,{printable:Yl(),...t}),r=new Blob([n],{type:"image/svg+xml"}),i=window.URL.createObjectURL(r),o=Gl(t.name,".svg");setTimeout(()=>{let s=document.createElement("a");s.href=i,s.download=o,s.click(),Kl(i)},30)}function rg(e,t){t=t||{},ql(e).then(n=>{let r=Gl(t.name,".png");n.toBlob(function(i){let o=window.URL.createObjectURL(i),s=document.createElement("a");s.href=o,s.download=r,s.click(),Kl(o)},"image/png")})}function ql(e){let t=Qi(),n=t.width,r=t.height,i=document.createElement("canvas"),o=i.getContext("2d");return i.width=n,i.height=r,e.render(),o.drawImage(t,0,0,t.width,t.height,0,0,n,r),Promise.all(Yl().map(s=>og(s,o))).then(()=>i)}function Qi(){return document.querySelector("#canvas")}function Gl(e,t){return ig(e||new Date().toISOString())+(t||"")}function ig(e){return e?e.replace(/[#%&{}\\/?*><$!'":@+`|=]/g,"_"):""}function og(e,t){return e?new Promise((n,r)=>{let i=window.devicePixelRatio||1;if(e.element instanceof SVGSVGElement){let o=e.element,s=e.bounds,a=new Image;a.width=s.width*i,a.height=s.height*i,a.onload=()=>{t.drawImage(a,s.left*i,s.top*i,a.width,a.height),o.removeAttribute("width"),o.removeAttribute("height"),n()},o.setAttribute("width",a.width),o.setAttribute("height",a.height),a.src="data:image/svg+xml;base64,"+btoa(new XMLSerializer().serializeToString(o))}else t.save(),t.font=i*e.fontSize+"px "+e.fontFamily,t.fillStyle=e.color,t.textAlign="end",t.fillText(e.text,(e.bounds.right-e.paddingRight)*i,(e.bounds.bottom-e.paddingBottom)*i),t.restore(),n()}):Promise.resolve()}function Yl(){return Array.from(document.querySelectorAll(".printable")).map(e=>{let t=window.getComputedStyle(e),n=e.getBoundingClientRect(),r=Number.parseInt(t.fontSize,10),i=Number.parseInt(t.paddingRight,10),o=Number.parseInt(t.paddingBottom,10)*2;return{text:e.innerText,bounds:n,fontSize:r,paddingBottom:o,paddingRight:i,color:t.color,fontFamily:t.fontFamily,fill:t.color,element:e}})}function Kl(e){setTimeout(()=>{window.URL.revokeObjectURL(e)},45e3)}function sg(e){let t=Hi(e),n=Pt.getDefaultLineColor();t.on("transform",w),t.on("append-child",b),t.on("remove-child",S),t.setClearColor(247/255,242/255,232/255,1);let r=t.getCameraController();r.setMoveSpeed&&(r.setMoveSpeed(200),r.setRotationSpeed(Math.PI/500));let i=t.getGL();i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);let o=!1,s=[],a=Pt.getBackgroundColor();C();let l={render(){t.renderFrame(!0)},clear(){s.forEach(m=>m.destroy()),s=[],t.clear()},queryLayerAll:f,queryLayer:d,getRenderer(){return t},getWGL(){return kh},version(){return"0.0.2"},dispose(){t.clear(),t.dispose(),l.fire("dispose",l),A()},set lineColor(m){s.forEach(x=>{x.color=m}),n=He(m),St.fire("line-color",n),l.fire("line-color",n)},get lineColor(){let m=d();return m&&m.color||n},set background(m){a=He(m);let x=a.toRgb();t.setClearColor(x.r/255,x.g/255,x.b/255,x.a),t.renderFrame(),St.fire("background-color",a),l.fire("background-color",a)},get background(){return a},add:h,load:u,saveToPNG:g,saveToSVG:y};return Fo(l);function u(m,x){let P=Qr.parse(l,m,x),L=new Wl;return L.id=P.place,ct.runFromOptions(P).then(B=>{B.setProjector(P.projector),L.setGrid(B)}).catch(B=>{console.error(`Could not execute:
  ${m}
  The error was:`),console.error(B),L.destroy()}),h(L),L}function f(m){return m?s.filter(x=>x.id===m):s}function d(m){let x=f(m);if(x)return x[0]}function h(m){if(!(s.indexOf(m)>-1)&&(m.bindToScene(t),s.push(m),s.length===1)){let x=m.getViewBox();x&&t.setViewBox(x)}}function g(m){return rg(l,{name:m})}function y(m,x){return ng(l,Object.assign({},{name:m},x))}function w(m){St.fire("scene-transform")}function b(m){l.fire("layer-added",m)}function S(m){l.fire("layer-removed",m)}function C(){document.addEventListener("keydown",E,!0),document.addEventListener("keyup",T,!0)}function A(){document.removeEventListener("keydown",E,!0),document.removeEventListener("keyup",T,!0)}function E(m){m.shiftKey&&(o=!0,r.setSpeed&&r.setSpeed(.1))}function T(m){!m.shiftKey&&o&&(r.setSpeed&&r.setSpeed(1),o=!1)}}let ag="https://edi6jgnosf.execute-api.us-west-2.amazonaws.com/Stage/put_image";const lg={mug:"168739066664861503"};function ug(e,t){const n=lg[e];if(!n)throw new Error("Unknown product kind: "+e);const r=encodeURIComponent(t);return`https://www.zazzle.com/api/create/at-238058511445368984?rf=238058511445368984&ax=Linkover&pd=${n}&ed=true&tc=&ic=&t_map_iid=${r}`}function fg(e){var t=e.toDataURL("image/png").replace(/^data:image\/(png|jpg);base64,/,"");const n=new FormData;return n.append("image",t),Xr(ag,{method:"POST",responseType:"json",progress:new Kr(Function.prototype),body:n}).then(r=>{if(!r.success)throw new Error("Failed to upload image");let i=r.data.link;return ug("mug",i)}).catch(r=>{throw console.log("error",r),r})}(function(e){var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch{return!1}}(),r=n&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,s=(n||i)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(a){var l,u,f,d,h,g,y,w,b;if(l=a.match(o),!l)throw new Error("invalid data URI");for(u=l[2]?l[1]:"text/plain"+(l[3]||";charset=US-ASCII"),f=!!l[4],d=a.slice(l[0].length),f?h=atob(d):h=decodeURIComponent(d),g=new ArrayBuffer(h.length),y=new Uint8Array(g),w=0;w<h.length;w+=1)y[w]=h.charCodeAt(w);return n?new Blob([r?y:g],{type:u}):(b=new i,b.append(g),b.getBlob(u))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(a,l,u){var f=this;setTimeout(function(){u&&t.toDataURL&&s?a(s(f.toDataURL(l,u))):a(f.mozGetAsFile("blob",l))})}:t.toDataURL&&s&&(t.toBlob=function(a,l,u){var f=this;setTimeout(function(){a(s(f.toDataURL(l,u)))})})),typeof define=="function"&&define.amd?define(function(){return s}):typeof vr=="object"&&vr.exports?vr.exports=s:e.dataURLtoBlob=s})(window);function cg(){let e,t={clickedElement:null,x:0,y:0,time:Date.now(),left:0,right:0};return document.addEventListener("mousedown",r),document.addEventListener("mouseup",o),document.addEventListener("touchstart",s,{passive:!1,capture:!0}),document.addEventListener("touchend",a,!0),document.addEventListener("touchcancel",a,!0),{track:E,dispose:T,clear:n};function n(){const m=document.querySelectorAll(".overlay-active");for(let x=0;x<m.length;++x)b(m[x])}function r(m){u(m.clientX,m.clientY,m)}function i(m){d(m.clientX,m.clientY)}function o(m){f(m.clientX,m.clientY)}function s(m){if(m.touches.length>1)return;let x=m.touches[0];u(x.clientX,x.clientY,m)}function a(m){if(m.changedTouches.length>1)return;let x=m.changedTouches[0];f(x.clientX,x.clientY)&&(m.preventDefault(),m.stopPropagation())}function l(m){if(m.touches.length>1)return;let x=m.touches[0];d(x.clientX,x.clientY),m.preventDefault(),m.stopPropagation()}function u(m,x,P){let L=w(m,x),B=document.querySelectorAll(".overlay-active");for(let H=0;H<B.length;++H){let W=B[H];W!==L&&b(W)}B.length===1&&(t.clickedElement=B[0]);let R=L&&L===t.clickedElement;if(R&&(t.clickedElement.contains(P.target)||(L=null,R=!1)),R&&!L.classList.contains("exclusive")?(h(),P.preventDefault(),P.stopPropagation()):t.clickedElement=L,t.x=m,t.y=x,t.time=Date.now(),L){let H=L.getBoundingClientRect();t.dx=H.right-t.x,t.dy=H.bottom-t.y}else n()}function f(m,x){if(!!t.clickedElement){if(g(),y(m,x))return S(t.clickedElement),!0;t.clickedElement=null}}function d(m,x){if(!t.clickedElement)return;let P=t.clickedElement.style;P.right=100*(window.innerWidth-m-t.dx)/window.innerWidth+"%",P.bottom=100*(window.innerHeight-x-t.dy)/window.innerHeight+"%"}function h(){g(),e=document.createElement("div"),e.classList.add("drag-overlay"),document.body.appendChild(e),document.addEventListener("mousemove",i,!0),document.addEventListener("touchmove",l,{passive:!1,capture:!0})}function g(){e&&(document.body.removeChild(e),e=null),document.removeEventListener("mousemove",i,!0),document.removeEventListener("touchmove",l,{passive:!1,capture:!0})}function y(m,x){return Date.now()-t.time>300?!1:Math.hypot(m-t.x,x-t.y)<40}function w(m,x){let P=document.querySelectorAll(".can-drag");for(let L=0;L<P.length;++L){let B=P[L],R=A(B);if(C(m,x,R))return B}}function b(m){m.style.pointerEvents="none",m.classList.remove("overlay-active"),m.classList.remove("exclusive")}function S(m,x,P){!m||(m.style.pointerEvents="",m.classList.contains("overlay-active")?(m.receiveFocus&&m.receiveFocus(),m.classList.add("exclusive")):(m.classList.add("overlay-active"),m.classList.contains("can-resize")))}function C(m,x,P){return!(m<P.left||m>P.right||x<P.top||x>P.bottom)}function A(m){return m.getBoundingClientRect()}function E(m,x){m.style.pointerEvents="none",m.classList.add("can-drag"),x&&x.receiveFocus&&(m.receiveFocus=x.receiveFocus)}function T(){document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",o),document.removeEventListener("touchstart",s),document.removeEventListener("touchend",a),document.removeEventListener("touchcancel",a),t.clickedElement=void 0,g()}}class xi{constructor(t,n,r){this.name=t,this.changeColor=r,this.color=n}}const dg={name:"App",components:{FindPlace:Wv,LoadingIcon:kl,EditableLabel:Qv,ColorPicker:eg},data(){return{placeFound:!1,name:"",zazzleLink:null,generatingPreview:!1,showSettings:!1,settingsOpen:!1,labelColor:Pt.getLabelColor().toRgb(),backgroundColor:Pt.getBackgroundColor().toRgb(),layers:[]}},computed:{labelColorRGBA(){return la(this.labelColor)}},created(){St.on("scene-transform",this.handleSceneTransform),St.on("background-color",this.syncBackground),St.on("line-color",this.syncLineColor),this.overlayManager=cg()},beforeUnmount(){debugger;this.overlayManager.dispose(),this.dispose(),St.off("scene-transform",this.handleSceneTransform),St.off("background-color",this.syncBackground),St.off("line-color",this.syncLineColor)},methods:{dispose(){this.scene&&(this.scene.dispose(),window.scene=null)},toggleSettings(){this.showSettings=!this.showSettings},handleSceneTransform(){this.zazzleLink=null},onGridLoaded(e){e.isArea?(Ve.set("areaId",e.id),Ve.unset("osm_id"),Ve.unset("bbox")):e.bboxString&&(Ve.unset("areaId"),Ve.set("osm_id",e.id),Ve.set("bbox",e.bboxString)),this.placeFound=!0,this.name=e.name.split(",")[0];let t=Qi();t.style.visibility="visible",this.scene=sg(t),this.scene.on("layer-added",this.updateLayers),this.scene.on("layer-removed",this.updateLayers),window.scene=this.scene;let n=new Wl;n.id="lines",n.setGrid(e),this.scene.add(n)},startOver(){Ve.unset("areaId"),Ve.unsetPlace(),Ve.unset("q"),Ve.enableCache(),this.dispose(),this.placeFound=!1,this.zazzleLink=null,this.showSettings=!1,this.backgroundColor=Pt.getBackgroundColor().toRgb(),this.labelColor=Pt.getLabelColor().toRgb(),document.body.style.backgroundColor=Pt.getBackgroundColor().toRgbString(),Qi().style.visibility="hidden"},toPNGFile(e){scene.saveToPNG(this.name)},toSVGFile(e){scene.saveToSVG(this.name)},updateLayers(){let e=[],t=0,n=this.scene.getRenderer();n.getRoot().children.forEach(o=>{if(!o.color)return;let s=o.id;s||(t+=1,s="lines "+t);let a=He.fromRatio(o.color);e.push(new xi(s,a,l=>{this.zazzleLink=null,o.color=i(l),n.renderFrame(),this.scene.fire("color-change",o)}))}),e.push(new xi("background",this.backgroundColor,this.setBackgroundColor),new xi("labels",this.labelColor,o=>this.labelColor=o)),this.layers=e;function i(o){return{r:o.r/255,g:o.g/255,b:o.b/255,a:o.a}}this.zazzleLink=null},syncLineColor(){this.updateLayers()},syncBackground(e){this.backgroundColor=e.toRgb(),this.updateLayers()},updateBackground(){this.setBackgroundColor(this.backgroundColor),this.zazzleLink=null},setBackgroundColor(e){this.scene.background=e,document.body.style.backgroundColor=la(e),this.zazzleLink=null},zazzleMugPrint(){if(this.zazzleLink){window.open(this.zazzleLink,"_blank"),ua(this.zazzleLink);return}this.generatingPreview=!0,ql(this.scene).then(e=>{fg(e).then(t=>{this.zazzleLink=t,window.open(t,"_blank"),ua(t),this.generatingPreview=!1}).catch(t=>{this.error=t,this.generatingPreview=!1})})}}};function la(e){return`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}function ua(e){typeof gtag!="undefined"&&gtag("event","click",{event_category:"Outbound Link",event_label:e})}const hg={id:"app"},pg={key:0},vg={class:"controls"},gg={key:0,class:"print-window"},mg=G("h3",null,"Display",-1),yg={class:"row"},wg=G("div",{class:"col"},"Colors",-1),bg={class:"col colors c-2"},xg={class:"color-label"},_g=G("h3",null,"Export",-1),Eg={class:"row"},Cg=G("span",{class:"col c-2"},[Ie(" Print what you see onto a mug. "),G("br"),Ie("Get a unique gift of your favorite city. ")],-1),Ag={key:0,class:"preview-actions message"},Tg={key:0,class:"padded popup-help"},Sg=Ie(" If your browser has blocked the new window, "),Mg=G("br",null,null,-1),Pg=Ie("please "),Fg=["href"],Lg=Ie(" to open it. "),kg={key:1,class:"loading-container"},Rg=Ie(" Generating preview url... "),Bg={class:"row"},Ig=G("span",{class:"col c-2"}," Save the current screen as a raster image. ",-1),Dg={class:"row"},Og=G("span",{class:"col c-2"}," Save the current screen as a vector image. ",-1),Ng=G("h3",null,"About",-1),Vg=G("div",null,[G("p",null,[Ie("This website was created by "),G("a",{href:"https://twitter.com/anvaka",target:"_blank"},"@anvaka"),Ie(". It downloads roads from OpenStreetMap and renders them with WebGL. ")]),G("p",null,[Ie(" You can find the entire "),G("a",{href:"https://github.com/anvaka/city-roads"},"source code here"),Ie(". If you love this website you can also "),G("a",{href:"https://www.paypal.com/paypalme2/anvakos/3"},"buy me a coffee"),Ie(" or "),G("a",{href:"https://www.patreon.com/anvaka"},"support me on Patreon"),Ie(", but you don't have to. ")])],-1),Ug=Ie("data ");function zg(e,t,n,r,i,o){const s=pt("find-place"),a=pt("color-picker"),l=pt("loading-icon"),u=pt("editable-label");return se(),fe(Ge,null,[i.placeFound?Te("",!0):(se(),_r(s,{key:0,onLoaded:o.onGridLoaded},null,8,["onLoaded"])),G("div",hg,[i.placeFound?(se(),fe("div",pg,[G("div",vg,[G("a",{href:"#",class:"print-button",onClick:t[0]||(t[0]=_t((...f)=>o.toggleSettings&&o.toggleSettings(...f),["prevent"]))},"Customize..."),G("a",{href:"#",class:"try-another",onClick:t[1]||(t[1]=_t((...f)=>o.startOver&&o.startOver(...f),["prevent"]))},"Try another city")]),i.showSettings?(se(),fe("div",gg,[mg,G("div",yg,[wg,G("div",bg,[(se(!0),fe(Ge,null,mo(i.layers,f=>(se(),fe("div",{key:f.name,class:"color-container"},[Se(a,{modelValue:f.color,"onUpdate:modelValue":d=>f.color=d,onChange:f.changeColor},null,8,["modelValue","onUpdate:modelValue","onChange"]),G("div",xg,Ot(f.name),1)]))),128))])]),_g,G("div",Eg,[G("a",{href:"#",onClick:t[2]||(t[2]=_t(f=>o.zazzleMugPrint(),["prevent"])),class:"col"},"Onto a mug"),Cg]),i.zazzleLink||i.generatingPreview?(se(),fe("div",Ag,[i.zazzleLink?(se(),fe("div",Tg,[Sg,Mg,Pg,G("a",{href:i.zazzleLink,target:"_blank"},"click here",8,Fg),Lg])):Te("",!0),i.generatingPreview?(se(),fe("div",kg,[Se(l),Rg])):Te("",!0)])):Te("",!0),G("div",Bg,[G("a",{href:"#",onClick:t[3]||(t[3]=_t((...f)=>o.toPNGFile&&o.toPNGFile(...f),["prevent"])),class:"col"},"As an image (.png)"),Ig]),G("div",Dg,[G("a",{href:"#",onClick:t[4]||(t[4]=_t((...f)=>o.toSVGFile&&o.toSVGFile(...f),["prevent"])),class:"col"},"As a vector (.svg)"),Og]),Te("",!0),Ng,Vg])):Te("",!0)])):Te("",!0)]),i.placeFound?(se(),_r(u,{key:1,modelValue:i.name,"onUpdate:modelValue":t[6]||(t[6]=f=>i.name=f),class:"city-name",printable:!0,style:je({color:o.labelColorRGBA}),"overlay-manager":e.overlayManager},null,8,["modelValue","style","overlay-manager"])):Te("",!0),i.placeFound?(se(),fe("div",{key:2,class:"license printable can-drag",style:je({color:o.labelColorRGBA})},[Ug,G("a",{href:"https://www.openstreetmap.org/about/",target:"_blank",style:je({color:o.labelColorRGBA})},"\xA9 OpenStreetMap",4)],4)):Te("",!0)],64)}var Hg=ut(dg,[["render",zg]]);const $g={},jn=e=>(Ju("data-v-3325dbc3"),e=e(),ef(),e),jg={class:"absolute no-webgl"},Wg=jn(()=>G("h3",null,"WebGL is not enabled :(",-1)),qg=jn(()=>G("p",null,"This website renders millions of roads at once.",-1)),Gg=jn(()=>G("p",null,[Ie(" To render this amount of data fast, the website uses "),G("a",{href:"https://get.webgl.org/"},"WebGL"),Ie(", which seem to be not supported by the device that you are using. ")],-1)),Yg=jn(()=>G("p",null,"Please try a different device to play with this website",-1)),Kg=jn(()=>G("img",{src:"https://i.imgur.com/Fbbe5a6.png",alt:"demo"},null,-1)),Xg=[Wg,qg,Gg,Yg,Kg];function Zg(e,t){return se(),fe("div",jg,Xg)}var Qg=ut($g,[["render",Zg],["__scopeId","data-v-3325dbc3"]]);window.addEventListener("error",Jg);window.requireModule=Oc;window.Query=ct;Al(document.querySelector("#canvas"))?vs(Hg).mount("#host"):vs(Qg).mount("#host");function Jg(e){if(typeof gtag!="function")return;const t=e?`${e.message} in ${e.filename}:${e.lineno}`:"Unknown exception";gtag("send","exception",{description:t,fatal:!1})}});export default em();
