(this["webpackJsonparchimate-navigator"]=this["webpackJsonparchimate-navigator"]||[]).push([[0],{117:function(e,t,n){e.exports=n(269)},268:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);n(118),n(119);var r,i,a,o=n(0),s=n.n(o),c=n(23),l=n.n(c),u=n(2),h=n(4),p=n(7),m=n(3),d=n(6),y=n(281),f=n(271),b=n(284);!function(e){e[e.Access=0]="Access",e[e.Read=1]="Read",e[e.Write=2]="Write",e[e.ReadWrite=3]="ReadWrite"}(r||(r={})),function(e){e.ArchimateDiagramModel="ArchimateDiagramModel",e.SketchModel="SketchModel",e.ModelQuery="ModelQuery"}(i||(i={})),function(e){e.Strategy="Strategy",e.Business="Business",e.Application="Application",e.Technology="Technology",e.Physical="Physical",e.Motivation="Motivation",e.ImplementationAndMigration="Implementation And Migration",e.Connectors="Connectors",e.Other="Other",e.None="None"}(a||(a={}));var v,g=[a.Strategy,a.Business,a.Application,a.Technology,a.Physical,a.Motivation,a.ImplementationAndMigration,a.Connectors,a.Other,a.None],O=[a.Strategy,a.Business,a.Application,a.Technology,a.Physical,a.Motivation,a.ImplementationAndMigration];function j(e){switch(e){case a.Strategy:return"archimate-strategy-background";case a.Business:return"archimate-business-background";case a.Application:return"archimate-application-background";case a.Technology:return"archimate-infrastructure-background";case a.Physical:return"archimate-physical-background";case a.Motivation:return"archimate-motivation-background";case a.ImplementationAndMigration:return"archimate-implementation-background";case a.Connectors:return"archimate-connectors-background";case a.Other:return"archimate-other-background";case a.None:default:return"archimate-none-background"}}function k(e){switch(e){case a.Strategy:return[v.Capability,v.CourseOfAction,v.Resource];case a.Business:return[v.BusinessActor,v.BusinessCollaboration,v.BusinessEvent,v.BusinessFunction,v.BusinessInteraction,v.BusinessInterface,v.BusinessObject,v.BusinessProcess,v.BusinessRole,v.BusinessService,v.Contract,v.Product,v.Representation];case a.Application:return[v.ApplicationCollaboration,v.ApplicationComponent,v.ApplicationEvent,v.ApplicationFunction,v.ApplicationInteraction,v.ApplicationInterface,v.ApplicationProcess,v.ApplicationService,v.DataObject];case a.Technology:return[v.Artifact,v.CommunicationNetwork,v.CommunicationPath,v.Device,v.InfrastructureFunction,v.InfrastructureInterface,v.InfrastructureService,v.Network,v.Node,v.Path,v.SystemSoftware,v.TechnologyCollaboration,v.TechnologyEvent,v.TechnologyFunction,v.TechnologyInteraction,v.TechnologyInterface,v.TechnologyObject,v.TechnologyProcess,v.TechnologyService];case a.Physical:return[v.DistributionNetwork,v.Equipment,v.Facility,v.Material];case a.Motivation:return[v.Assessment,v.Constraint,v.Driver,v.Goal,v.Meaning,v.Outcome,v.Principle,v.Requirement,v.Stakeholder,v.Value];case a.ImplementationAndMigration:return[v.Deliverable,v.Gap,v.ImplementationEvent,v.Plateau,v.WorkPackage];case a.Connectors:return[v.AndJunction,v.Junction,v.OrJunction];case a.Other:return[v.Location,v.Grouping];case a.None:default:return E}}!function(e){e.BusinessActor="BusinessActor",e.BusinessCollaboration="BusinessCollaboration",e.BusinessEvent="BusinessEvent",e.BusinessFunction="BusinessFunction",e.BusinessInteraction="BusinessInteraction",e.BusinessInterface="BusinessInterface",e.BusinessObject="BusinessObject",e.BusinessProcess="BusinessProcess",e.BusinessRole="BusinessRole",e.BusinessService="BusinessService",e.Contract="Contract",e.Location="Location",e.Product="Product",e.Representation="Representation",e.ApplicationCollaboration="ApplicationCollaboration",e.ApplicationComponent="ApplicationComponent",e.ApplicationEvent="ApplicationEvent",e.ApplicationFunction="ApplicationFunction",e.ApplicationInteraction="ApplicationInteraction",e.ApplicationInterface="ApplicationInterface",e.ApplicationProcess="ApplicationProcess",e.ApplicationService="ApplicationService",e.DataObject="DataObject",e.Artifact="Artifact",e.CommunicationNetwork="CommunicationNetwork",e.CommunicationPath="CommunicationPath",e.Device="Device",e.InfrastructureFunction="InfrastructureFunction",e.InfrastructureInterface="InfrastructureInterface",e.InfrastructureService="InfrastructureService",e.Network="Network",e.Node="Node",e.Path="Path",e.SystemSoftware="SystemSoftware",e.TechnologyCollaboration="TechnologyCollaboration",e.TechnologyEvent="TechnologyEvent",e.TechnologyFunction="TechnologyFunction",e.TechnologyInteraction="TechnologyInteraction",e.TechnologyInterface="TechnologyInterface",e.TechnologyObject="TechnologyObject",e.TechnologyProcess="TechnologyProcess",e.TechnologyService="TechnologyService",e.DistributionNetwork="DistributionNetwork",e.Equipment="Equipment",e.Facility="Facility",e.Material="Material",e.Assessment="Assessment",e.Constraint="Constraint",e.Driver="Driver",e.Goal="Goal",e.Meaning="Meaning",e.Outcome="Outcome",e.Principle="Principle",e.Requirement="Requirement",e.Stakeholder="Stakeholder",e.Value="Value",e.Deliverable="Deliverable",e.Gap="Gap",e.ImplementationEvent="ImplementationEvent",e.Plateau="Plateau",e.WorkPackage="WorkPackage",e.AndJunction="AndJunction",e.Junction="Junction",e.OrJunction="OrJunction",e.Capability="Capability",e.CourseOfAction="CourseOfAction",e.Resource="Resource",e.Grouping="Grouping"}(v||(v={}));var w,E=[v.BusinessActor,v.BusinessCollaboration,v.BusinessEvent,v.BusinessFunction,v.BusinessInteraction,v.BusinessInterface,v.BusinessObject,v.BusinessProcess,v.BusinessRole,v.BusinessService,v.Contract,v.Location,v.Product,v.Representation,v.ApplicationCollaboration,v.ApplicationComponent,v.ApplicationEvent,v.ApplicationFunction,v.ApplicationInteraction,v.ApplicationInterface,v.ApplicationProcess,v.ApplicationService,v.DataObject,v.Artifact,v.CommunicationNetwork,v.CommunicationPath,v.Device,v.InfrastructureFunction,v.InfrastructureInterface,v.InfrastructureService,v.Network,v.Node,v.Path,v.SystemSoftware,v.TechnologyCollaboration,v.TechnologyEvent,v.TechnologyFunction,v.TechnologyInteraction,v.TechnologyInterface,v.TechnologyObject,v.TechnologyProcess,v.TechnologyService,v.DistributionNetwork,v.Equipment,v.Facility,v.Material,v.Assessment,v.Constraint,v.Driver,v.Goal,v.Meaning,v.Outcome,v.Principle,v.Requirement,v.Stakeholder,v.Value,v.Deliverable,v.Gap,v.ImplementationEvent,v.Plateau,v.WorkPackage,v.AndJunction,v.Junction,v.OrJunction,v.Capability,v.CourseOfAction,v.Resource,v.Grouping],P=k(a.Business).concat(k(a.Application),k(a.Technology)),C=k(a.Connectors);!function(e){e.Composition="CompositionRelationship",e.Aggregation="AggregationRelationship",e.Assignment="AssignmentRelationship",e.Realization="RealizationRelationship",e.Realisation="RealisationRelationship",e.Serving="ServingRelationship",e.UsedBy="UsedByRelationship",e.Access="AccessRelationship",e.Influence="InfluenceRelationship",e.Triggering="TriggeringRelationship",e.Flow="FlowRelationship",e.Specialization="SpecializationRelationship",e.Specialisation="SpecialisationRelationship",e.Association="AssociationRelationship",e.Junction="JunctionRelationship",e.AndJunction="AndJunctionRelationship",e.OrJunction="OrJunctionRelationship"}(w||(w={}));var S,x=[w.Composition,w.Aggregation,w.Assignment,w.Realization,w.Realisation,w.Serving,w.UsedBy,w.Access,w.Influence,w.Triggering,w.Flow,w.Specialization,w.Specialisation,w.Association,w.Junction,w.AndJunction,w.OrJunction],A=n(14);!function(e){e.Total="Total",e.Introductory="Introductory",e.Organization="Organization",e.Application_platform="Application platform",e.Information_structure="Information structure",e.Technology="Technology",e.Layered="Layered",e.Physical="Physical",e.Product="Product",e.Application_usage="Application usage",e.Technology_usage="Technology usage",e.Business_process_cooperation="Business process cooperation",e.Application_cooperation="Application cooperation",e.Service_realization="Service realization",e.Implementation_and_deployment="Implementation and deployment",e.Goal_realization="Goal realization",e.Goal_contribution="Goal contribution",e.Principles="Principles",e.Requirements_realization="Requirements realization",e.Motivation="Motivation",e.Strategy="Strategy",e.Capability_map="Capability map",e.Outcome_realization="Outcome realization",e.Resource_map="Resource map",e.Project="Project",e.Migration="Migration",e.Implementation_and_migration="Implementation and migration",e.Stakeholder="Stakeholder",e.Actor_cooperation="Actor cooperation",e.Business_function="Business function",e.Business_process="Business process",e.Application_behavior="Application behavior",e.Application_structure="Application structure",e.Infrastructure="Infrastructure",e.Infrastructure_usage="Infrastructure usage",e.Landscape_map="Landscape map",e.Custom="Custom"}(S||(S={}));var D=[S.Total,S.Introductory,S.Organization,S.Application_platform,S.Information_structure,S.Technology,S.Layered,S.Physical,S.Product,S.Application_usage,S.Technology_usage,S.Business_process_cooperation,S.Application_cooperation,S.Service_realization,S.Implementation_and_deployment,S.Goal_realization,S.Goal_contribution,S.Principles,S.Requirements_realization,S.Motivation,S.Strategy,S.Capability_map,S.Outcome_realization,S.Resource_map,S.Project,S.Migration,S.Implementation_and_migration,S.Stakeholder,S.Actor_cooperation,S.Business_function,S.Business_process,S.Application_behavior,S.Application_structure,S.Infrastructure,S.Infrastructure_usage,S.Landscape_map,S.Custom],B=new Map([[S.Actor_cooperation,C.concat(v.ApplicationComponent,v.ApplicationInterface,v.ApplicationService,v.BusinessActor,v.BusinessCollaboration,v.BusinessInterface,v.BusinessRole,v.BusinessService)],[S.Application_behavior,C.concat(v.ApplicationCollaboration,v.ApplicationComponent,v.ApplicationFunction,v.ApplicationInteraction,v.ApplicationInterface,v.ApplicationService,v.DataObject)],[S.Application_cooperation,C.concat(v.ApplicationCollaboration,v.ApplicationComponent,v.ApplicationFunction,v.ApplicationInteraction,v.ApplicationInterface,v.ApplicationService,v.DataObject,v.Location)],[S.Application_platform,P],[S.Application_structure,C.concat(v.ApplicationCollaboration,v.ApplicationComponent,v.ApplicationInterface,v.DataObject)],[S.Application_usage,C.concat(v.ApplicationCollaboration,v.ApplicationComponent,v.ApplicationInterface,v.ApplicationService,v.BusinessEvent,v.BusinessFunction,v.BusinessInteraction,v.BusinessObject,v.BusinessProcess,v.BusinessRole,v.DataObject)],[S.Business_function,C.concat(v.BusinessActor,v.BusinessFunction,v.BusinessRole)],[S.Business_process,C.concat(v.ApplicationService,v.BusinessActor,v.BusinessCollaboration,v.BusinessEvent,v.BusinessFunction,v.BusinessInteraction,v.BusinessObject,v.BusinessProcess,v.BusinessRole,v.BusinessService,v.Location,v.Representation)],[S.Business_process_cooperation,C.concat(v.ApplicationCollaboration,v.ApplicationComponent,v.ApplicationEvent,v.ApplicationFunction,v.ApplicationInteraction,v.ApplicationInterface,v.ApplicationProcess,v.ApplicationService,v.BusinessActor,v.BusinessCollaboration,v.BusinessEvent,v.BusinessFunction,v.BusinessInteraction,v.BusinessInterface,v.BusinessObject,v.BusinessProcess,v.BusinessRole,v.BusinessService,v.DataObject,v.Location,v.Representation)],[S.Capability_map,P],[S.Goal_contribution,[v.Constraint,v.Goal,v.Principle,v.Requirement]],[S.Goal_realization,[v.Constraint,v.Goal,v.Principle,v.Requirement]],[S.Implementation_and_deployment,C.concat(v.ApplicationCollaboration,v.ApplicationComponent,v.Artifact,v.CommunicationPath,v.DataObject,v.Device,v.InfrastructureService,v.Network,v.Node,v.SystemSoftware)],[S.Implementation_and_migration,P.concat(C,v.Location,v.Requirement,v.Constraint,v.Goal,v.BusinessRole,v.WorkPackage,v.Deliverable,v.BusinessActor,v.Plateau,v.Gap)],[S.Information_structure,C.concat(v.Artifact,v.BusinessObject,v.DataObject,v.Meaning,v.Representation)],[S.Infrastructure_usage,C.concat(v.ApplicationComponent,v.ApplicationFunction,v.CommunicationPath,v.Device,v.InfrastructureFunction,v.InfrastructureInterface,v.InfrastructureService,v.Network,v.Node,v.SystemSoftware)],[S.Infrastructure,C.concat(v.Artifact,v.CommunicationPath,v.Device,v.InfrastructureFunction,v.InfrastructureInterface,v.InfrastructureService,v.Location,v.Network,v.Node,v.SystemSoftware)],[S.Introductory,P],[S.Landscape_map,E.concat(C)],[S.Layered,E.concat(C)],[S.Migration,C.concat(v.Gap,v.Plateau)],[S.Motivation,[v.Assessment,v.Constraint,v.Driver,v.Goal,v.Principle,v.Requirement,v.Stakeholder]],[S.Organization,C.concat(v.BusinessActor,v.BusinessCollaboration,v.BusinessInterface,v.BusinessRole,v.Location)],[S.Outcome_realization,P],[S.Physical,P],[S.Principles,[v.Goal,v.Principle]],[S.Product,C.concat(v.ApplicationComponent,v.ApplicationInterface,v.ApplicationService,v.BusinessActor,v.BusinessEvent,v.BusinessFunction,v.BusinessInteraction,v.BusinessInterface,v.BusinessProcess,v.BusinessRole,v.BusinessService,v.Contract,v.Product,v.Value)],[S.Project,C.concat(v.BusinessActor,v.BusinessRole,v.Deliverable,v.Goal,v.WorkPackage)],[S.Requirements_realization,P.concat(C,v.Constraint,v.Goal,v.Requirement)],[S.Resource_map,P],[S.Service_realization,C.concat(v.ApplicationCollaboration,v.ApplicationComponent,v.ApplicationService,v.BusinessActor,v.BusinessCollaboration,v.BusinessEvent,v.BusinessFunction,v.BusinessInteraction,v.BusinessObject,v.BusinessProcess,v.BusinessRole,v.BusinessService,v.DataObject)],[S.Stakeholder,[v.Assessment,v.Driver,v.Goal,v.Stakeholder]],[S.Strategy,P],[S.Technology_usage,P],[S.Technology,P],[S.Total,E]]);function N(e){var t=S.Custom;return B.forEach((function(n,r){Object(A.is)(e,Object(A.Set)(n))&&(t=r)})),t}function T(e,t){if(e===S.Custom)return t;var n=B.get(e);return void 0===n?t:Object(A.Set)(n)}var I=function(){function e(t,n,r,i){Object(u.a)(this,e),this.r=void 0,this.g=void 0,this.b=void 0,this.a=void 0,this.r=t,this.g=n,this.b=r,this.a=i}return Object(h.a)(e,null,[{key:"rgba",value:function(t){if(t){var n=t.match(/#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?/);if(n)return new e(Number.parseInt(n[1],16),Number.parseInt(n[2],16),Number.parseInt(n[3],16),n[4]?Number.parseInt(n[4],16)/256*100:100)}}},{key:"black",value:function(){return new e(0,0,0,100)}}]),Object(h.a)(e,[{key:"toString",value:function(){return"Color(r: ".concat(this.r,", g: ").concat(this.g,", b: ").concat(this.b,", a: ").concat(this.a,")")}},{key:"toRGBA",value:function(){var e=[this.r,this.g,this.b];this.a&&e.push(this.scaledAlpha());var t=e.filter((function(e){return void 0!==e})).map((function(e){return e})).map((function(e){return e.toString(16)})).map((function(e){return e.trim()})).map((function(e){return 1===e.length?"0".concat(e):e})).join("");return"#".concat(t)}},{key:"scaledAlpha",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:255;return this.a?Math.round(e*(this.a/100)):e}}]),e}(),M=function(){function e(t,n,r,i){Object(u.a)(this,e),this.name=void 0,this.size=void 0,this.style=void 0,this.fontData=void 0,t&&(this.name=t),n&&(this.size=n),r&&(this.style=r),i&&(this.fontData=i)}return Object(h.a)(e,null,[{key:"archiFontString",value:function(t){if(t){var n=t.split("|");return new e(n[1],Number.parseFloat(n[2]),Number.parseInt(n[3],10),t)}}}]),Object(h.a)(e,[{key:"toString",value:function(){return"Font(name: ".concat(this.name,", size: ").concat(this.size,", style: ").concat(this.style,")")}},{key:"toArchiFont",value:function(){return this.fontData||[1,this.name,this.size,this.style,"WINDOWS",1,0,0,0,0,0,0,0,0,1,0,0,0,0,this.name].map((function(e){return"".concat(e)})).join("|")}},{key:"styleString",value:function(){switch(this.style){case 1:return"italic";case 2:return"bold";case 3:return"bold|italic";default:return""}}}]),e}(),R=function e(){Object(u.a)(this,e),this.textAlignment=void 0,this.fillColor=void 0,this.lineColor=void 0,this.fontColor=void 0,this.lineWidth=void 0,this.font=void 0,this.textPosition=void 0},z=function(){function e(t,n){Object(u.a)(this,e),this.begin=void 0,this.end=void 0,this.begin=t,this.end=n}return Object(h.a)(e,[{key:"overlapMidpoint",value:function(e){var t=Math.max(this.begin,e.begin),n=Math.min(this.end,e.end);if(!(t>n))return(t+n)/2}},{key:"cover",value:function(e){return this.begin<=e&&e<=this.end}}]),e}(),L=function(){function e(t,n){Object(u.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return Object(h.a)(e,[{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"subtract",value:function(e){return Math.sqrt(Math.pow(e.x-this.x,2)+Math.pow(e.y-this.y,2))}},{key:"toString",value:function(){return[this.x,this.y].map((function(e){return e.toString()})).join(" ")}},{key:"inside",value:function(e){return void 0!==e&&(e.xRange().cover(this.x)&&e.yRange().cover(this.y))}}]),e}(),F=function(){function e(t,n,r,i){Object(u.a)(this,e),this.x=void 0,this.y=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.left=void 0,this.right=void 0,this.bottom=void 0,this.x=t,this.y=n,this.width=r,this.height=i,this.top=this.y||0,this.left=this.x||0,this.right=this.left+this.width,this.bottom=this.top+this.height}return Object(h.a)(e,null,[{key:"fromPoint",value:function(t){return new e(t.x,t.y,0,0)}},{key:"zeroBounds",value:function(){return new e(0,0,0,0)}}]),Object(h.a)(e,[{key:"offset",value:function(t){return new e(this.left+t.left,this.top+t.top,this.width,this.height)}},{key:"toString",value:function(){return"Bounds(x: ".concat(this.x,", y: ").concat(this.y,", width: ").concat(this.width,", height: ").concat(this.height,")")}},{key:"xRange",value:function(){return new z(this.left,this.right)}},{key:"yRange",value:function(){return new z(this.top,this.bottom)}},{key:"center",value:function(){return new L(this.left+this.width/2,this.top+this.height/2)}},{key:"above",value:function(e){return this.bottom<e.top}},{key:"below",value:function(e){return this.top>e.bottom}},{key:"rightOf",value:function(e){return this.left>e.right}},{key:"leftOf",value:function(e){return this.right<e.left}},{key:"reducedBy",value:function(t){return new e(this.left+t,this.top+t,this.width-2*t,this.height-2*t)}},{key:"inside",value:function(e){return this.left>e.left&&this.right<e.right&&this.top>e.top&&this.bottom<e.bottom}},{key:"empty",value:function(){return 0===this.width&&0===this.height}}]),e}();function _(){return new F(0,0,0,0)}var W=n(33),q=function(){function e(t,n){Object(u.a)(this,e),this.a=void 0,this.b=void 0,this.a=t,this.b=n}return Object(h.a)(e,[{key:"length",value:function(){return this.b.subtract(this.a)}},{key:"fromEnd",value:function(e){var t=this.b.subtract(this.a);return this.fromStart(t-e)}},{key:"fromStart",value:function(e){var t=this.b.subtract(this.a);return e<0?this.a:t<e?this.b:this.pointAtPercent(e/t)}},{key:"pointAtPercent",value:function(e){return new L(this.a.x+(this.b.x-this.a.x)*e,this.a.y+(this.b.y-this.a.y)*e)}}]),e}(),X=function(){function e(t,n){Object(u.a)(this,e),this.connection=void 0,this.points=void 0,this.segments=void 0,this.sourceBounds=void 0,this.targetBounds=void 0,this.autoLayout=void 0,this.dCmds=void 0,this.pathLength=void 0,this.connection=t,this.autoLayout=n||!1,this.sourceBounds=this.connection.sourceBounds()||_(),this.targetBounds=this.connection.targetBounds()||_(),this.points=this.calcPoints(),this.segments=this.calcSegments()}return Object(h.a)(e,[{key:"d",value:function(){var e,t=this;if(this.dCmds)return this.dCmds.join(" ");var n=[];this.autoLayout||(n=this.eachCons(this.points,3).map((function(e){return t.curve_segment(e[0],e[1],e[2])})));var r=(e=[]).concat.apply(e,[this.move_to(this.points[0])].concat(Object(W.a)(n),[this.line_to(this.points[this.points.length-1])]));return this.dCmds=r,r.join(" ")}},{key:"point",value:function(e){var t=this.length()*e,n=this.segments.reduce((function(e,n){return void 0===e&&n.length()>=t?n.fromStart(t):(t-=n.length(),e)}),void 0);return n||new L(0,0)}},{key:"midpoint",value:function(){return this.point(.5)}},{key:"boundsToPoints",value:function(e,t){var n,r,i=e.xRange(),a=t.xRange(),o=i.overlapMidpoint(a);o?n=r=o:t.rightOf(e)?(n=e.right,r=t.left):(n=e.left,r=t.right);var s,c,l=e.yRange(),u=t.yRange(),h=l.overlapMidpoint(u);return h?s=c=h:t.above(e)?(s=e.top,c=t.bottom):(s=e.bottom,c=t.top),[new L(n,s),new L(r,c)]}},{key:"normalizedBendPoints",value:function(){return this.connection.bendpoints.map((function(e){return F.fromPoint(e)}))}},{key:"calcSegments",value:function(){for(var e=this.points.length-1,t=new Array(e),n=0;n<t.length;++n)t[n]=new q(this.points[n],this.points[n+1]);return t}},{key:"calcPoints",value:function(){for(var e=(new Array).concat(this.sourceBounds,this.normalizedBendPoints(),this.targetBounds).filter((function(e){return void 0!==e})),t=[],n=e.shift();e.length>0;){var r=e.shift();t=t.concat(this.boundsToPoints(n,r)),n=r}var i=new Map;return t.forEach((function(e){return i.set(e.toString(),e)})),Array.from(i.values())}},{key:"segmentLengths",value:function(){return this.segments.map((function(e){return e.length()}))}},{key:"length",value:function(){return this.pathLength?this.pathLength:(this.pathLength=this.segmentLengths().reduce((function(e,t){return e+t}),0),this.pathLength)}},{key:"move_to",value:function(e){return"M ".concat(e)}},{key:"line_to",value:function(e){return"L ".concat(e)}},{key:"q_curve",value:function(e,t){return"Q ".concat(e," ").concat(t)}},{key:"curve_segment",value:function(e,t,n){var r=new q(e,t).fromEnd(5),i=new q(t,n).fromStart(5);return[this.line_to(r),this.q_curve(t,i)]}},{key:"eachCons",value:function(e,t){var n=e.length-t+1;if(n<1)return[];for(var r=new Array(n),i=0;i<n;++i)r[i]=i;return r.map((function(t){return[e[t],e[t+1],e[t+2]]}))}}]),e}(),Y=n(116),G={maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER},V=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).name=n.constructor.name,n.stack=new Error(e).stack,n}return Object(d.a)(t,e),t}(Object(Y.a)(Error)),H=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),t}(V),Q=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),t}(V),U=function(e){function t(e,n){var r;return Object(u.a)(this,t),(r=Object(p.a)(this,Object(m.a)(t).call(this,e))).xmlns=void 0,r.xmlns=n,r}return Object(d.a)(t,e),t}(V);var Z=function(){function e(t,n){Object(u.a)(this,e),this.key=void 0,this.value=void 0,this.key=t,this.value=n}return Object(h.a)(e,[{key:"toString",value:function(){return"Property<".concat(this.key,' = "').concat(this.value,'">')}}]),e}(),J=function(){function e(t,n){Object(u.a)(this,e),this.id=void 0,this.name=void 0,this.documentation=void 0,this.type=void 0,this.style=void 0,this.viewRefs=void 0,this.content=void 0,this.properties=[],this.parent=void 0,this.bounds=void 0,this.nodes=[],this.connections=[],this.element=void 0,this.childType=void 0,this.diagram=void 0,this.conceptRef=void 0,this.xpathPath=void 0,this.index=void 0,this.x=void 0,this.y=void 0,this.vx=void 0,this.vy=void 0,this.fx=void 0,this.fy=void 0,this.model=void 0,this.entity=void 0,this.model=t,this.id=this.model.makeUniqueId(),this.diagram=n,this.type="ViewNode",this.bounds=_()}return Object(h.a)(e,[{key:"toString",value:function(){return"ViewNode[".concat(this.name||"","](").concat(this.element?this.element:"",")")}},{key:"entityInstance",value:function(){return this.entity?this.entity:this.viewRefs?(this.entity=this.model.lookup(this.viewRefs),this.entity):(this.entity=this.model.lookup(this.element),this.entity)}},{key:"absolutePosition",value:function(){return new F(this.x||this.bounds.left,this.y||this.bounds.top,this.bounds.width,this.bounds.height)}},{key:"extents",value:function(){return{maxX:(this.x||this.bounds.left)+this.bounds.width,maxY:(this.y||this.bounds.top)+this.bounds.height,minX:this.x||this.bounds.left,minY:this.y||this.bounds.top}}},{key:"inside",value:function(e){return!(e instanceof K)&&this.bounds.inside(e.bounds)}},{key:"center",value:function(){return this.bounds.center()}}]),e}(),K=function(){function e(t,n,r,i){Object(u.a)(this,e),this.id=void 0,this.name=void 0,this.documentation=void 0,this.type=void 0,this.sourceAttachment=void 0,this.bendpoints=[],this.targetAttachment=void 0,this.source=void 0,this.target=void 0,this.relationship=void 0,this.style=void 0,this.properties=[],this.model=void 0,this.sourceEntity=void 0,this.targetEntity=void 0,this.model=t,this.id=t.makeUniqueId(),this.type=n,this.source=r,this.target=i}return Object(h.a)(e,[{key:"typeName",value:function(){return"Connection[".concat(this.name||"","]")}},{key:"entityInstance",value:function(){return this.model.lookup(this.relationship)}},{key:"toString",value:function(){return"".concat(this.typeName," ").concat(this.source||"nothing"," -> ").concat(this.target||"nothing")}},{key:"startLocation",value:function(){return this.sourceAttachment||this.sourceBounds().center()}},{key:"endLocation",value:function(){return this.targetAttachment||this.targetBounds().center()}},{key:"sourceViewNode",value:function(){return this.sourceEntity?this.sourceEntity:(this.sourceEntity=this.srcTargetLookup(this.source),this.sourceEntity)}},{key:"targetViewNode",value:function(){return this.targetEntity?this.targetEntity:(this.targetEntity=this.srcTargetLookup(this.target),this.targetEntity)}},{key:"sourceBounds",value:function(){return this.sourceViewNode().absolutePosition()}},{key:"targetBounds",value:function(){return this.targetViewNode().absolutePosition()}},{key:"inside",value:function(e){return!1}},{key:"nodes",value:function(){return[]}},{key:"absolutePosition",value:function(){var e=new X(this).midpoint();return new F(e.x,e.y,0,0)}},{key:"extents",value:function(){return new X(this).points.reduce((function(e,t){return{maxX:Math.max(t.x,e.maxX),maxY:Math.max(t.y,e.maxY),minX:Math.min(t.x,e.minX),minY:Math.min(t.y,e.minY)}}),G)}},{key:"srcTargetLookup",value:function(t){var n,r=this.model.lookup(t);if(void 0===r)throw new Q("Lookup failed for srcTargetLookup");if(r instanceof J)n=r;else{if(!(r instanceof e))throw new Q("Lookup returned unexpected type");n=r}return n}}]),e}(),$=function(){function e(t,n,r,i){Object(u.a)(this,e),this.id=void 0,this.type=void 0,this.name=void 0,this.documentation=void 0,this.properties=void 0,this.href=void 0,this.model=void 0,this.diagramCache=void 0,this.relationshipCache=void 0,this.model=t,this.type=n,this.id=r||t.makeUniqueId(),this.name=i||"",this.properties=[]}return Object(h.a)(e,[{key:"toString",value:function(){return"".concat(this.type,"<").concat(this.id,">[").concat(this.name,"]")}},{key:"relationships",value:function(){var e=this;return this.relationshipCache?this.relationshipCache:(this.relationshipCache=this.model.relationships.filter((function(t){return t.source===e.id||t.target===e.id})),this.relationshipCache)}},{key:"sourceRelationships",value:function(){var e=this;return this.model.relationships.filter((function(t){return t.source===e.id}))}},{key:"targetRelationships",value:function(){var e=this;return this.model.relationships.filter((function(t){return t.target===e.id}))}},{key:"diagrams",value:function(){var e=this;return this.diagramCache?this.diagramCache:(this.diagramCache=this.model.diagrams.filter((function(t){return t.elements().find((function(t){return t.id===e.id}))})),this.diagramCache)}}]),e}(),ee=function(){function e(t){Object(u.a)(this,e),this.id=void 0,this.name=void 0,this.href=void 0,this.documentation=void 0,this.properties=void 0,this.type=void 0,this.organizations=void 0,this.items=void 0,this.model=void 0,this.model=t,this.id=this.model.makeUniqueId(),this.type="",this.organizations=[],this.items=[],this.properties=[]}return Object(h.a)(e,[{key:"item",value:function(e){return this.model.lookup(e)}},{key:"itemEntities",value:function(){var e=this;return this.items.map((function(t){return e.item(t)})).filter((function(e){return void 0!==e})).map((function(e){return e}))}}]),e}(),te=function(){function e(t,n,r,i){Object(u.a)(this,e),this.id=void 0,this.type=void 0,this.name=void 0,this.documentation=void 0,this.properties=void 0,this.source=void 0,this.target=void 0,this.accessType=void 0,this.derived=!1,this.strength=void 0,this.model=void 0,this.model=t,this.type=n,this.id=t.makeUniqueId(),this.source=r,this.target=i,this.properties=[]}return Object(h.a)(e,[{key:"sourceElement",value:function(){return this.model.lookup(this.source)}},{key:"targetElement",value:function(){return this.model.lookup(this.target)}},{key:"toString",value:function(){return"<".concat(this.id,">[").concat(this.name||"","] ").concat(this.source," -> ").concat(this.target)}},{key:"diagrams",value:function(){var e=this;return this.model.diagrams.filter((function(t){return t.relationships().find((function(t){return t.id===e.id}))}))}}]),e}(),ne=function(){function e(t,n){Object(u.a)(this,e),this.id=void 0,this.name=void 0,this.documentation=void 0,this.type=void 0,this.properties=void 0,this.viewpoint=void 0,this.nodes=void 0,this.connectionRouterType=void 0,this.background=void 0,this.connections=void 0,this.path=void 0,this.model=void 0,this.elementsCache=void 0,this.relationshipsCache=void 0,this.diagramsCache=void 0,this.model=t,this.id=this.model.makeUniqueId(),this.type=n,this.properties=[],this.nodes=[],this.connections=[],this.path="svg/".concat(this.id,".svg")}return Object(h.a)(e,[{key:"relationships",value:function(){return this.relationshipsCache=new Set(this.connections.map((function(e){return e.entityInstance()})).filter((function(e){return void 0!==e})).map((function(e){return e}))),Array.from(this.relationshipsCache)}},{key:"elements",value:function(){return this.elementsCache=new Set(this.nodes.map((function(e){return e.entityInstance()})).filter((function(e){return e instanceof $})).map((function(e){return e}))),Array.from(this.elementsCache.values())}},{key:"diagrams",value:function(){return this.diagramsCache?this.diagramsCache:(this.diagramsCache=this.nodes.map((function(e){return e.entityInstance()})).filter((function(t){return t instanceof e})).map((function(e){return e})),this.diagramsCache)}},{key:"toString",value:function(){return"Diagram<".concat(this.id,">[").concat(this.name,"]")}},{key:"totalViewpoint",value:function(){return void 0!==this.viewpoint}},{key:"viewpointDescription",value:function(){if(void 0===this.viewpoint)switch(this.type){case"canvas:CanvasModel":return"Canvas";case"archimate:SketchModel":return"Sketch";default:return"Total"}return this.viewpoint.toString()}},{key:"calculateMaxExtents",value:function(){var e=this.nodes.concat(this.connections);if(e.length<1)return{maxX:0,maxY:0,minX:0,minY:0};var t=e.map((function(e){return e.extents()})).reduce((function(e,t){return{maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY),minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY)}}),G);return{maxX:t.maxX+20,maxY:t.maxY+20,minX:t.minX-10,minY:t.minY-10}}}]),e}(),re=function(){function e(){Object(u.a)(this,e),this.id="",this.name="",this.documentation=void 0,this.properties=void 0,this.metadata=void 0,this.elements=[],this.relationships=[],this.organizations=[],this.propertyDefs=new Map,this.version=void 0,this.diagrams=[],this.viewpoints=[],this.href=void 0,this.type=void 0,this.indexHash=void 0,this.indexHash=ie(),this.properties=[],this.rebuildIndex(),this.type="Model"}return Object(h.a)(e,[{key:"lookup",value:function(e){if(void 0!==e&&""!==e)return void 0===this.indexHash.get(e)&&this.rebuildIndex(e),this.indexHash.get(e)}},{key:"lookupDiagram",value:function(e){var t=this.lookup(e);return void 0===t?void 0:t}},{key:"viewOrganization",value:function(){var e=this.organizations.find((function(e){return!(!e||"diagrams"!==e.type)}));if(e)return e;if(0===this.organizations.length){var t=new ee(this);t.name="Diagrams",t.type="diagrams",this.organizations.push(t)}return this.organizations[this.organizations.length-1]}},{key:"entities",value:function(){return Array.from(this.indexHash.values())}},{key:"toString",value:function(){return"Model<".concat(this.id,">[").concat(this.name,"]")}},{key:"makeUniqueId",value:function(){return(4294967295*Math.random()).toString(16)}},{key:"register",value:function(e){this.indexHash.set(e.id,e)}},{key:"deregister",value:function(e){this.indexHash.delete(e.id)}},{key:"adjacencyList",value:function(){var e=new Map;return this.elements.reduce(ae,e)}},{key:"rebuildIndex",value:function(e){return void 0===e?this:(this.indexHash=this.buildIndex(),this)}},{key:"buildIndex",value:function(){var e=this;return this.indexHash=ie(),this.indexHash.set(this.id,this),this.elements.forEach((function(t){e.indexHash.set(t.id,t)})),this.relationships.forEach((function(t){e.indexHash.set(t.id,t)})),this.diagrams.forEach((function(t){e.indexHash.set(t.id,e.indexViewNodes(t))})),this.indexOrganizations(this),this.indexHash}},{key:"indexViewNodes",value:function(e){var t=this;return e.nodes.forEach((function(e){return t.indexHash.set(e.id,e)})),e.connections.forEach((function(e){return t.indexHash.set(e.id,e)})),e}},{key:"indexOrganizations",value:function(e){var t=this;return e.organizations.forEach((function(e){t.indexOrganizations(e),t.indexHash.set(e.id,e)})),e}}]),e}();function ie(){return new Map}function ae(e,t){return e.set(t,t.relationships())}var oe=function(){function e(t){Object(u.a)(this,e),this.query=void 0,this.query=t}return Object(h.a)(e,[{key:"run",value:function(){for(var e=Object(A.Set)(this.query.elements),t=Array.from(this.query.elements.toJS()).map((function(e){return{element:e,depth:1}})),n=[],r=[];t.length>0;){var i=t.pop();if(!i)throw new Q("queue shouldn't be undefined");n.push(i.element),i.element.relationships().filter((function(e){return e.source&&e.target})).filter(ce(this.query.relationshipTypes)).filter(le(this.query.elementTypes)).reduce(se,{maxPathDepth:this.query.pathDepth,queue:t,relationships:r,searchQueueItem:i,visited:e})}return[n,r]}}]),e}();function se(e,t){var n=t.sourceElement()===e.searchQueueItem.element?t.targetElement():t.sourceElement();return n&&n instanceof $&&!e.visited.includes(n)&&(e.relationships.push(t),e.visited=e.visited.add(n),e.searchQueueItem.depth<e.maxPathDepth&&e.queue.push({depth:e.searchQueueItem.depth+1,element:n})),e}function ce(e){return function(t){return e.includes(t.type)}}function le(e){return function(t){return[t.sourceElement(),t.targetElement()].every(function(e){return function(t){return t&&t instanceof $&&e.includes(t.type)||!1}}(e))}}Object(A.Set)();var ue=function(){function e(t){Object(u.a)(this,e),this.elements=void 0,this.elementTypes=void 0,this.id=void 0,this.includeDerivedRelations=void 0,this.layerFilter=void 0,this.model=void 0,this.name=void 0,this.pathDepth=void 0,this.relationships=void 0,this.relationshipTypes=void 0,this.viewpointType=void 0,this.elements=Object(A.Set)(),this.elementTypes=Object(A.Set)(E),this.id=t.makeUniqueId(),this.includeDerivedRelations=!1,this.layerFilter=Object(A.Set)(g),this.model=t,this.name="New Query",this.pathDepth=2,this.relationships=Object(A.Set)(),this.relationshipTypes=Object(A.Set)(x),this.viewpointType=S.Total}return Object(h.a)(e,[{key:"updateQuery",value:function(t){return Object.assign(new e(this.model),this,t)}},{key:"availableElementTypes",value:function(){return Object(A.Set)(B.get(this.viewpointType||S.Total)||E)}},{key:"unselectedElementTypes",value:function(){var e=this;return Object(A.Set)(this.availableElementTypes().filter((function(t){return void 0===e.elementTypes.find((function(e){return e===t}))})))}},{key:"run",value:function(){var e=new oe(this),t=this.findOrCreateDiagram(),n=this.diagramNodesAndConnections(t,e.run());return t.name=this.name,t.viewpoint=this.viewpointType,t.nodes=n[0],t.connections=n[1],t}},{key:"findOrCreateDiagram",value:function(){var e=this.model.lookupDiagram(this.id);return e||((e=new ne(this.model,i.ModelQuery)).id=this.id,e.name=this.name,this.model.diagrams.push(e),this.model.viewOrganization().items.push(e.id),e)}},{key:"diagramNodesAndConnections",value:function(e,t){var n=this,r=t[0],i=t[1],a=i.reduce((function(e,t){var n=t.sourceElement(),r=t.targetElement();if(void 0===n)throw new Q("Relationship ".concat(t.id," source ").concat(t.source," Element not found"));if(void 0===r)throw new Q("Relationship ".concat(t.id," target ").concat(t.target," Element not found"));return e.concat([n,r])}),[]),o=r.concat(a).reduce((function(t,r){return t.set(r.id,n.viewNodeFor(r,e))}),new Map),s=i.map((function(t){return n.connectionFor(t,o,e)}));return[Array.from(o.values()),s]}},{key:"viewNodeFor",value:function(e,t){var n=new J(this.model,t);return n.type="archimate:DiagramObject",n.bounds=new F(700,700,120,55),n.element=e.id,n.diagram=t,n}},{key:"connectionFor",value:function(e,t,n){var r=t.get(e.source),i=t.get(e.target);if(void 0===r)throw new Q("Source ViewNode id: ".concat(e.source," not found"));if(void 0===i)throw new Q("Target ViewNode id: ".concat(e.target," not found"));var a=new K(this.model,"archimate:Connection",r.id,i.id);return a.relationship=e.id,a}}]),e}();function he(e,t){var n=e.attributes.getNamedItem(t);if(null!==n)return n.value}function pe(e,t,n){var r=e.attributes.getNamedItemNS(n||null,t);if(null!==r)return r.value}function me(e,t){var n=he(e,t);if(void 0!==n)return Number.parseInt(n,10)}var de=function(){function e(){var t=this;Object(u.a)(this,e),this.createPoint=function(e){return new L(t.parseAttrInt(e,"startX"),t.parseAttrInt(e,"startY"))}}return Object(h.a)(e,[{key:"bendpoints",value:function(e){var t=Array.from(e.children).filter((function(e){return"bendpoint"===e.nodeName}));return void 0===t?[]:t.map(this.createPoint)}},{key:"parseAttrInt",value:function(e,t){var n=he(e,t)||"0",r=Number.parseInt(n,10);return Number.isNaN(r)?0:r}}]),e}(),ye=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"value",value:function(e,t){var n=e.querySelector(t||"documentation");if(null!==n)return n.textContent||void 0}}]),e}(),fe=function(){function e(t){var n=this;Object(u.a)(this,e),this.model=void 0,this.createOrganization=function(e){var t=new ee(n.model);return t.id=he(e,"id")||"noid",t.name=he(e,"name"),t.type=he(e,"type")||"",t.items=Array.from(e.children).filter((function(e){return"element"===e.nodeName})).map((function(e){return e.attributes.getNamedItem("id").value})),t.organizations=n.organizations(e),t},this.model=t}return Object(h.a)(e,[{key:"organizations",value:function(e){var t=Array.from(e.children).filter((function(e){return"folder"===e.nodeName}));return void 0===t?[]:t.map(this.createOrganization,this)}}]),e}(),be=function(){function e(t){Object(u.a)(this,e),this.model=void 0,this.handleElement=function(e){var t=he(e,"key"),n=he(e,"value");if(void 0===t)throw new H("Property is missing key");return new Z(t,n)},this.model=t}return Object(h.a)(e,[{key:"properties",value:function(e){var t=Array.from(e.children).filter((function(e){return"property"===e.nodeName}));return null===t?[]:t.map(this.handleElement)}}]),e}(),ve=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"content",value:function(e){var t=Array.from(e.children).find((function(e){return"content"===e.nodeName}));if(void 0!==t)return t.textContent||void 0}}]),e}(),ge=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"style",value:function(e){var t=new R,n=he(e,"textAlignment"),r=I.rgba(he(e,"fillColor")),i=I.rgba(he(e,"lineColor")),a=I.rgba(he(e,"fontColor")),o=M.archiFontString(he(e,"font")),s=me(e,"lineWidth"),c=me(e,"textPosition");return n&&(t.textAlignment=n),r&&(t.fillColor=r),i&&(t.lineColor=i),a&&(t.fontColor=a),o&&(t.font=o),s&&(t.lineWidth=s),c&&(t.textPosition=c),t}}]),e}(),Oe=new Map([["1",void 0],["2",S.Application_behavior],["application_cooperation",S.Application_cooperation],["3",S.Application_cooperation],["4",S.Application_structure],["application_usage",S.Application_usage],["5",S.Application_usage],["6",S.Business_function],["business_process_cooperation",S.Business_process_cooperation],["7",void 0],["8",S.Business_process],["product",S.Product],["9",S.Product],["implementation_deployment",S.Implementation_and_deployment],["10",S.Implementation_and_deployment],["information_structure",S.Information_structure],["11",S.Information_structure],["12",S.Infrastructure_usage],["13",S.Infrastructure],["layered",S.Layered],["14",S.Layered],["organization",S.Organization],["15",S.Organization],["service_realization",S.Service_realization],["16",S.Service_realization],["stakeholder",S.Stakeholder],["17",S.Stakeholder],["goal_realization",S.Goal_realization],["18",S.Goal_realization],["19",S.Goal_contribution],["20",S.Principles],["requirements_realization",S.Requirements_realization],["21",S.Requirements_realization],["motivation",S.Motivation],["22",S.Motivation],["project",S.Project],["23",S.Project],["migration",S.Migration],["24",S.Migration],["implementation_migration",S.Implementation_and_migration],["25",S.Implementation_and_migration],["capability",void 0],["outcome_realization",S.Outcome_realization],["physical",S.Physical],["resource",void 0],["strategy",S.Strategy],["technology",S.Technology],["technology_usage",S.Technology_usage]]),je=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"viewpoint",value:function(e){var t=he(e,"viewpoint");if(void 0!==t)return Oe.get(t)}}]),e}(),ke=function(){function e(t,n,r){var i=this;Object(u.a)(this,e),this.model=void 0,this.diagram=void 0,this.offset=void 0,this.documentationParser=void 0,this.bendpointParser=void 0,this.styleParser=void 0,this.createConnection=function(e){var t=pe(e,"type","http://www.w3.org/2001/XMLSchema-instance")||"Connection",n=he(e,"source"),r=he(e,"target"),a=he(e,"id");if([n,r].some((function(e){return void 0===e})))throw new H("Element id=".concat(a," Type=").concat(t,", Source=").concat(n," or Target=").concat(r," missing from Connection"));var o=new K(i.model,t,n,r);return o.id=he(e,"id")||i.model.makeUniqueId(),o.name=he(e,"name"),o.documentation=i.documentationParser.value(e),o.bendpoints=i.bendpointParser.bendpoints(e),o.relationship=he(e,"archimateRelationship"),o.style=i.styleParser.style(e),i.diagram.connections.push(o),o},this.model=t,this.diagram=n,this.offset=r,this.documentationParser=new ye,this.bendpointParser=new de,this.styleParser=new ge}return Object(h.a)(e,[{key:"connections",value:function(e){var t=Array.from(e.children).filter((function(e){return"sourceConnection"===e.nodeName}));return void 0===t?[]:t.map(this.createConnection)}}]),e}(),we=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"bounds",value:function(e){var t=Array.from(e.children).find((function(e){return"bounds"===e.nodeName}));if(null!==t){var n=t,r=me(n,"x"),i=me(n,"y"),a=me(n,"width"),o=me(n,"height");if(void 0===a||void 0===o)throw new H("Invalid value for width or height");return new F(r,i,a,o)}}}]),e}(),Ee=function(){function e(t,n,r){var i=this;Object(u.a)(this,e),this.model=void 0,this.diagram=void 0,this.offset=void 0,this.documentationParser=void 0,this.contentParser=void 0,this.boundsParser=void 0,this.styleParser=void 0,this.createViewNode=function(t){var n=new J(i.model,i.diagram);if(n.id=he(t,"id")||i.model.makeUniqueId(),n.name=he(t,"name"),n.documentation=i.documentationParser.value(t),n.type=(pe(t,"type","http://www.w3.org/2001/XMLSchema-instance")||"").replace("archimate:",""),n.style=i.styleParser.style(t),n.viewRefs=he(t,"model"),n.content=i.contentParser.content(t),"child"===t.parentElement.nodeName){var r=t.parentElement;n.parent=he(r,"id")}n.bounds=i.boundsParser.bounds(t).offset(i.offset),n.element=he(t,"archimateElement"),n.childType=he(t,"type"),i.diagram.nodes.push(n),i.model.register(n),new ke(i.model,i.diagram,n.bounds).connections(t);var a=new e(i.model,i.diagram,n.bounds);return[n].concat(a.viewNodes(t))},this.model=t,this.diagram=n,this.offset=r,this.documentationParser=new ye,this.contentParser=new ve,this.boundsParser=new we,this.styleParser=new ge}return Object(h.a)(e,[{key:"viewNodes",value:function(e){var t=Array.from(e.children).filter((function(e){return"child"===e.nodeName}));return 0===t.length?[]:t.map(this.createViewNode).reduce((function(e,t){return e.concat(t)}))}}]),e}(),Pe=function(){function e(t){Object(u.a)(this,e),this.model=void 0,this.documentationParser=void 0,this.propertiesParser=void 0,this.viewpointParser=void 0,this.model=t,this.documentationParser=new ye,this.propertiesParser=new be(t),this.viewpointParser=new je}return Object(h.a)(e,[{key:"diagram",value:function(e,t){var n=new ne(this.model,t);n.id=he(e,"id")||this.model.makeUniqueId(),n.name=he(e,"name"),n.documentation=this.documentationParser.value(e),n.properties=this.propertiesParser.properties(e),n.viewpoint=this.viewpointParser.viewpoint(e);var r=new Ee(this.model,n,_());return n.nodes=r.viewNodes(e),n}}]),e}(),Ce=function(){function e(t,n){var r=this;Object(u.a)(this,e),this.model=void 0,this.doc=void 0,this.diagramParser=void 0,this.documentationParser=void 0,this.propertiesParser=void 0,this.handleElement=function(e){var t=e.attributes.getNamedItemNS("http://www.w3.org/2001/XMLSchema-instance","type");if(null===t)throw new Error("Couldn't find element type");var n=t.value.replace("archimate:","");switch(n){case v.BusinessActor:r.parseArchimateElement(e,v.BusinessActor);break;case v.BusinessCollaboration:r.parseArchimateElement(e,v.BusinessCollaboration);break;case v.BusinessEvent:r.parseArchimateElement(e,v.BusinessEvent);break;case v.BusinessFunction:r.parseArchimateElement(e,v.BusinessFunction);break;case v.BusinessInteraction:r.parseArchimateElement(e,v.BusinessInteraction);break;case v.BusinessInterface:r.parseArchimateElement(e,v.BusinessInterface);break;case v.BusinessObject:r.parseArchimateElement(e,v.BusinessObject);break;case v.BusinessProcess:r.parseArchimateElement(e,v.BusinessProcess);break;case v.BusinessRole:r.parseArchimateElement(e,v.BusinessRole);break;case v.BusinessService:r.parseArchimateElement(e,v.BusinessService);break;case v.Contract:r.parseArchimateElement(e,v.Contract);break;case v.Location:r.parseArchimateElement(e,v.Location);break;case v.Product:r.parseArchimateElement(e,v.Product);break;case v.Representation:r.parseArchimateElement(e,v.Representation);break;case v.ApplicationCollaboration:r.parseArchimateElement(e,v.ApplicationCollaboration);break;case v.ApplicationComponent:r.parseArchimateElement(e,v.ApplicationComponent);break;case v.ApplicationEvent:r.parseArchimateElement(e,v.ApplicationEvent);break;case v.ApplicationFunction:r.parseArchimateElement(e,v.ApplicationFunction);break;case v.ApplicationInteraction:r.parseArchimateElement(e,v.ApplicationInteraction);break;case v.ApplicationInterface:r.parseArchimateElement(e,v.ApplicationInterface);break;case v.ApplicationProcess:r.parseArchimateElement(e,v.ApplicationProcess);break;case v.ApplicationService:r.parseArchimateElement(e,v.ApplicationService);break;case v.DataObject:r.parseArchimateElement(e,v.DataObject);break;case v.Artifact:r.parseArchimateElement(e,v.Artifact);break;case v.CommunicationNetwork:r.parseArchimateElement(e,v.CommunicationNetwork);break;case v.CommunicationPath:r.parseArchimateElement(e,v.CommunicationPath);break;case v.Device:r.parseArchimateElement(e,v.Device);break;case v.InfrastructureFunction:r.parseArchimateElement(e,v.InfrastructureFunction);break;case v.InfrastructureInterface:r.parseArchimateElement(e,v.InfrastructureInterface);break;case v.InfrastructureService:r.parseArchimateElement(e,v.InfrastructureService);break;case v.Network:r.parseArchimateElement(e,v.Network);break;case v.Node:r.parseArchimateElement(e,v.Node);break;case v.Path:r.parseArchimateElement(e,v.Path);break;case v.SystemSoftware:r.parseArchimateElement(e,v.SystemSoftware);break;case v.TechnologyCollaboration:r.parseArchimateElement(e,v.TechnologyCollaboration);break;case v.TechnologyEvent:r.parseArchimateElement(e,v.TechnologyEvent);break;case v.TechnologyFunction:r.parseArchimateElement(e,v.TechnologyFunction);break;case v.TechnologyInteraction:r.parseArchimateElement(e,v.TechnologyInteraction);break;case v.TechnologyInterface:r.parseArchimateElement(e,v.TechnologyInterface);break;case v.TechnologyObject:r.parseArchimateElement(e,v.TechnologyObject);break;case v.TechnologyProcess:r.parseArchimateElement(e,v.TechnologyProcess);break;case v.TechnologyService:r.parseArchimateElement(e,v.TechnologyService);break;case v.DistributionNetwork:r.parseArchimateElement(e,v.DistributionNetwork);break;case v.Equipment:r.parseArchimateElement(e,v.Equipment);break;case v.Facility:r.parseArchimateElement(e,v.Facility);break;case v.Material:r.parseArchimateElement(e,v.Material);break;case v.Assessment:r.parseArchimateElement(e,v.Assessment);break;case v.Constraint:r.parseArchimateElement(e,v.Constraint);break;case v.Driver:r.parseArchimateElement(e,v.Driver);break;case v.Goal:r.parseArchimateElement(e,v.Goal);break;case v.Meaning:r.parseArchimateElement(e,v.Meaning);break;case v.Outcome:r.parseArchimateElement(e,v.Outcome);break;case v.Principle:r.parseArchimateElement(e,v.Principle);break;case v.Requirement:r.parseArchimateElement(e,v.Requirement);break;case v.Stakeholder:r.parseArchimateElement(e,v.Stakeholder);break;case v.Value:r.parseArchimateElement(e,v.Value);break;case v.Deliverable:r.parseArchimateElement(e,v.Deliverable);break;case v.Gap:r.parseArchimateElement(e,v.Gap);break;case v.ImplementationEvent:r.parseArchimateElement(e,v.ImplementationEvent);break;case v.Plateau:r.parseArchimateElement(e,v.Plateau);break;case v.WorkPackage:r.parseArchimateElement(e,v.WorkPackage);break;case v.AndJunction:case v.Junction:case v.OrJunction:var a=e.attributes.getNamedItem("type");a&&"or"===a.value?r.parseArchimateElement(e,v.OrJunction):r.parseArchimateElement(e,v.Junction);break;case v.Capability:r.parseArchimateElement(e,v.Capability);break;case v.CourseOfAction:r.parseArchimateElement(e,v.CourseOfAction);break;case v.Resource:r.parseArchimateElement(e,v.Resource);break;case v.Grouping:r.parseArchimateElement(e,v.Grouping);break;case w.Composition:r.parseArchimateRelationship(e,w.Composition);break;case w.Aggregation:r.parseArchimateRelationship(e,w.Aggregation);break;case w.Assignment:r.parseArchimateRelationship(e,w.Assignment);break;case w.Realization:case w.Realisation:r.parseArchimateRelationship(e,w.Realization);break;case w.Serving:case w.UsedBy:r.parseArchimateRelationship(e,w.Serving);break;case w.Access:r.parseArchimateRelationship(e,w.Access);break;case w.Influence:r.parseArchimateRelationship(e,w.Influence);break;case w.Triggering:r.parseArchimateRelationship(e,w.Triggering);break;case w.Flow:r.parseArchimateRelationship(e,w.Flow);break;case w.Specialization:case w.Specialisation:r.parseArchimateRelationship(e,w.Specialization);break;case w.Association:r.parseArchimateRelationship(e,w.Association);break;case w.Junction:r.parseArchimateRelationship(e,w.Junction);break;case w.AndJunction:r.parseArchimateRelationship(e,w.AndJunction);break;case w.OrJunction:r.parseArchimateRelationship(e,w.OrJunction);break;case i.ArchimateDiagramModel:r.parseArchimateDiagram(e,i.ArchimateDiagramModel);break;case i.SketchModel:r.parseArchimateDiagram(e,i.SketchModel);break;default:throw new Error("Unexpected Element Type ".concat(n))}},this.model=t,this.doc=n,this.diagramParser=new Pe(t),this.documentationParser=new ye,this.propertiesParser=new be(t)}return Object(h.a)(e,[{key:"elements",value:function(){var e=this.doc.querySelectorAll("element");null!==e&&e.forEach(this.handleElement)}},{key:"parseArchimateElement",value:function(e,t){var n=new $(this.model,t);n.id=he(e,"id")||"",n.name=he(e,"name")||"",n.documentation=this.documentationParser.value(e),n.properties=this.propertiesParser.properties(e),this.model.elements.push(n)}},{key:"parseArchimateRelationship",value:function(e,t){var n=he(e,"source"),r=he(e,"target");if(void 0===n)throw new H("Expected source to be present");if(void 0===r)throw new H("Expected target to be present");var i=new te(this.model,t,n,r);i.id=he(e,"id")||"",i.name=he(e,"name")||"",i.documentation=this.documentationParser.value(e),i.properties=this.propertiesParser.properties(e),i.strength=he(e,"strength"),i.accessType=this.parseAccessType(e),this.model.relationships.push(i)}},{key:"stringToAccessType",value:function(e){switch(e){case"1":return r.Read;case"2":return r.Write;case"3":return r.ReadWrite;default:return r.Access}}},{key:"parseAccessType",value:function(e){var t=he(e,"accessType");return void 0===t?r.Access:this.stringToAccessType(t)}},{key:"parseArchimateDiagram",value:function(e,t){this.model.diagrams.push(this.diagramParser.diagram(e,t))}}]),e}(),Se=function(){function e(){Object(u.a)(this,e)}return Object(h.a)(e,[{key:"parse",value:function(e){var t=this.parseModel(e);return this.fixBendpoints(t)}},{key:"parseModel",value:function(e){var t=new re,n=e.getElementsByTagNameNS("http://www.archimatetool.com/archimate","model");if(0===n.length)throw new H("Couldn't find a Model in the XMLDocument");var r=n[0];return t.id=he(r,"id")||t.makeUniqueId(),t.name=he(r,"name")||"ArchiMate Model",t.documentation=(new ye).value(r,"purpose")||"",t.organizations=new fe(t).organizations(r),new Ce(t,e).elements(),t}},{key:"fixBendpoints",value:function(e){var t,n=e.diagrams.map((function(e){return e.connections}));return(t=new Array).concat.apply(t,Object(W.a)(n)).forEach((function(e){e.bendpoints.forEach((function(t){t.x+=e.startLocation().x,t.y+=e.startLocation().y}))})),e}}]),e}();n(31);var xe=n(111),Ae=(n(50),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={path:new X(n.props.connection,n.props.autoLayout),sourceEntity:n.props.connection.sourceViewNode(),targetEntity:n.props.connection.targetViewNode()},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return void 0===this.state.sourceEntity||void 0===this.state.targetEntity||this.state.targetEntity.inside(this.state.sourceEntity)?null:o.createElement("g",this.groupAttrs(),o.createElement("path",this.pathAttrs(),o.createElement("title",null,this.props.connection.documentation)),this.selectedHighlight(),this.lineText())}},{key:"componentDidUpdate",value:function(e){this.props.fromX===e.fromX&&this.props.fromY===e.fromY&&this.props.toX===e.toX&&this.props.toY===e.toY&&this.props.autoLayout===e.autoLayout||this.setState({path:new X(this.props.connection,this.props.autoLayout)})}},{key:"selectedHighlight",value:function(){if(this.props.selected){var e=this.pathAttrs();return e.className="archimate-selected-element-highlight",o.createElement("path",e)}}},{key:"groupAttrs",value:function(){var e={id:this.props.connection.id};return this.props.onClicked&&(e.onClick=this.props.onClicked.bind(this,this.props.connection.entityInstance())),e}},{key:"lineText",value:function(){var e=this.props.connection.entityInstance(),t=e?e.name:void 0;if(void 0!==t&&0!==t.length){var n=this.state.path.point(this.text_position());return o.createElement("text",{className:"archimate-relationship-name",x:n.x,y:n.y,textAnchor:"middle",style:this.textStyle()},t)}}},{key:"lineStyle",value:function(){var e=this.props.connection.style;if(void 0===e)return{};var t={};return e.lineColor&&(t.stroke=e.lineColor.toRGBA()),e.lineWidth&&(t.strokeWidth=e.lineWidth),t}},{key:"textStyle",value:function(){var e=this.props.connection.style;if(void 0===e)return{};var t={};return e.fontColor&&(t.fill=e.fontColor.toRGBA(),t.color=e.fontColor.toRGBA()),e.font&&(e.font.name&&(t.fontFamily=e.font.name),e.font.size&&(t.fontSize=e.font.size)),e.textAlignment&&(t.textAlign=e.textAlignment),t}},{key:"text_position",value:function(){return.5}},{key:"pathAttrs",value:function(){return{className:this.pathClass(),d:this.state.path.d(),id:this.id(),style:this.lineStyle()}}},{key:"id",value:function(){var e=this.props.connection.entityInstance();return e?e.id:this.props.connection.id}},{key:"pathClass",value:function(){var e=this.props.connection.entityInstance(),t=e?e.type:"default";return["archimate",this.cssClassify(t)].join("-")+" archimate-relationship"}},{key:"cssClassify",value:function(e){return e.replace(/::/,"/").replace("Relationship","").replace(/([A-Z]+)([A-Z][a-z])/,"$1-$2").replace(/([a-z\d])([A-Z])/,"$1-$2").toLowerCase()}}]),t}(o.PureComponent)),De=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e={fill:"none",stroke:"inherit",strokeLinecap:"butt",strokeLinejoin:"miter",strokeWidth:1},t={fill:"none",stroke:"inherit",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1},n={fill:"none",stroke:"inherent",strokeWidth:.7};return o.createElement("svg",{className:"archimate-svg",version:"1.1",preserveAspectRatio:"none",zoomAndPan:"magnify"},o.createElement("title",null,this.props.diagramName),o.createElement("defs",null,o.createElement("linearGradient",{id:"archimate-highlight-color",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect",x1:"0",y1:"0",x2:"1",y2:"1"},o.createElement("stop",{offset:"0%",stopColor:"black"}),o.createElement("stop",{offset:"100%",stopColor:"white"})),o.createElement("symbol",{id:"archimate-material-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("path",{style:{fill:"none",stroke:"inherit",strokeLinejoin:"miter",strokeWidth:1},d:"M 15.443383,8.5890552 5.0182941,17.265414 -7.7081977,12.575201 -10.0096,-0.7913701 0.41548896,-9.4677289 13.141981,-4.7775163 Z",transform:"matrix(0.59818877,-0.22354387,0.22387513,0.59808805,7.5647066,7.7263348)"}),o.createElement("path",{style:e,d:"M 4.5472185,10.333586 8.1220759,4.0990346"}),o.createElement("path",{style:e,d:"m 12.154515,4.0418369 3.51766,6.2917491"}),o.createElement("path",{style:e,d:"m 6.5491386,14.223031 7.0925174,-0.0572"})),o.createElement("symbol",{id:"archimate-distribution-network-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("path",{style:t,d:"M 5.8847321,2.5480283 1.4964611,6.7745197 5.7431749,10.596562"}),o.createElement("path",{style:e,d:"m 3.5995956,4.8129424 12.6592514,0"}),o.createElement("path",{d:"m 3.5995956,8.6754298 13.2861464,0",style:e}),o.createElement("path",{d:"m 14.314928,2.7502528 4.388271,4.2264914 -4.246714,3.8220418",style:t})),o.createElement("symbol",{id:"archimate-facility-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("path",{style:{fill:"none",stroke:"inherit",strokeLinejoin:"miter",strokeWidth:1},d:"m 2.1449144,17.940882 0,-15.7007732 2.1735133,0 0,10.2383912 4.5472185,-2.7740891 0,2.8598861 4.4900208,-2.888485 0,2.74549 4.51862,-2.6882923 0,8.2078723 z"})),o.createElement("symbol",{id:"archimate-equipment-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("g",{transform:"translate(0,-7)"},o.createElement("circle",{cx:"8",cy:"18.7",r:"2.432014",style:n}),o.createElement("circle",{cx:"13.7",cy:"12.6",r:"2.0318091",style:n}),o.createElement("path",{d:"m 10.419829,13.456928 -1.089422,-0.143227 0.049633,-1.333107 1.038029,-0.147302 0.341694,-0.73592 -0.57155,-0.843058 0.841528,-0.8648267 0.957991,0.4937924 0.912018,-0.3836763 0.17842,-0.962147 1.316037,-0.019985 0.101237,0.9711183 0.869824,0.3547524 0.771707,-0.6499933 0.91403,0.8676982 -0.566748,0.882319 0.356276,0.832942 0.930473,0.02346 0.06356,1.262322 -1.035165,0.180358 -0.419167,0.824685 0.690443,0.793236 -0.972585,0.907704 -0.733596,-0.578471 -0.952142,0.360765 -0.169839,0.993647 -1.356163,-0.0029 -0.122641,-0.947842 -0.848419,-0.378029 -0.857761,0.70726 -0.979897,-0.985107 0.737388,-0.77599 z",style:{fill:"none",stroke:"inherit",strokeLinejoin:"bevel",strokeWidth:.8}}),o.createElement("path",{style:{fill:"none",stroke:"inherit",strokeLinejoin:"bevel",strokeWidth:.8},d:"m 3.5980557,18.939362 -1.3122324,-0.550291 0.5156318,-1.650873 1.3468917,0.16932 0.6772813,-0.804271 -0.4271363,-1.249401 1.3455665,-0.795275 1.0287534,0.944094 1.2699024,-0.169321 0.550291,-1.142912 1.6508729,0.423301 -0.203979,1.2494 0.965921,0.740114 1.185242,-0.550291 0.846601,1.396892 -1.00825,0.91076 0.161649,1.163414 1.154418,0.346312 -0.350147,1.600872 -1.354562,-0.12699 -0.804272,0.888931 0.592621,1.227572 L 9.9052376,23.764991 9.1856262,22.791399 7.8733938,22.918389 7.3231027,24.103632 5.6298996,23.638001 5.7992199,22.410428 4.8679581,21.648487 3.5557257,22.241108 2.666794,20.674895 3.8520362,19.955284 Z"}))),o.createElement("symbol",{id:"archimate-resource-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("rect",{style:{fill:"none",stroke:"inherit",strokeWidth:.7},width:"1.6",height:"3.3",x:"17",y:"5",ry:"0.8",rx:"0.8"}),o.createElement("rect",{style:{fill:"none",stroke:"inherit",strokeWidth:.7},width:"14",height:"9",x:"3",y:"2",ry:"1.2"}),o.createElement("path",{style:{fill:"none",stroke:"inherit",strokeWidth:1},d:"m 6,4 v 4.4 m 3 -4.4 v 4.4 m 3 -4.4 v 4.4"})),o.createElement("symbol",{id:"archimate-outcome-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("circle",{style:{fill:"none",stroke:"inherit",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:.9},cx:"9.0192108",cy:"11.324571",r:"1.718908"}),o.createElement("circle",{style:{fill:"none",stroke:"inherit",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:.9},cx:"9.1405458",cy:"11.304347",r:"3.5591507"}),o.createElement("circle",{style:{fill:"none",stroke:"inherit",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:.9},cx:"9.0798788",cy:"11.324571",r:"5.2982812"}),o.createElement("path",{style:{fill:"inherit",stroke:"inherit",strokeLinecap:"butt",strokeLinejoin:"round",strokeWidth:.6},d:"M 8.7563195,11.547017 9.4236603,8.0485339 12.598584,10.940344 Z"}),o.createElement("path",{style:{fill:"none",stroke:"inherit",strokeLinecap:"round",strokeLinejoin:"miter",strokeWidth:1.4},d:"M 16.097068,4.2264914 10.920121,9.6258847"}),o.createElement("path",{style:{fill:"none",stroke:"inherit",strokeLinecap:"round",strokeLinejoin:"miter",strokeWidth:.9},d:"M 14.742164,2.2244692 13.811931,6.3296259"}),o.createElement("path",{style:{fill:"none",stroke:"inherit",strokeLinecap:"round",strokeLinejoin:"miter",strokeWidth:.9},d:"M 18.200202,5.0151668 13.953489,6.5318504"})),o.createElement("symbol",{id:"archimate-course-of-action-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("circle",{style:{fill:"inherit",stroke:"inherit",strokeWidth:1},cx:"14.5",cy:"6",r:"1"}),o.createElement("circle",{style:{fill:"none",stroke:"inherit",strokeWidth:1},cx:"14.5",cy:"6",r:"2.8"}),o.createElement("circle",{style:{fill:"none",stroke:"inherit",strokeWidth:1},cx:"14.5",cy:"6",r:"4.6"}),o.createElement("path",{style:{fill:"inherit",stroke:"inherit",strokeLinecap:"butt",strokeLinejoin:"miter",strokeWidth:1},d:"M 1.1664063,14.167969 C 2.5664063,12.167969 4.1,10.95 5.6,9.85 L 4.5,9 C 4.3,8.25 4.54,7.9 5.25,7.9 l 4.5,0.6 c -0.5108623,0.013713 1.081001,-0.037861 0.5,1.1 l -3,3.7 c -0.6,0.4 -1,0.25 -1.2,-0.15 L 6.01,11.75 C 4.5,12.5 3.5,14 2.5,15 1.83125,15.09375 1.1875,14.617188 1.1703125,14.171875 Z"})),o.createElement("symbol",{id:"archimate-capability-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("rect",{x:"4",y:"11.5",width:"5",height:"5",style:{fill:"none",stroke:"#423f30"}}),o.createElement("rect",{x:"9",y:"11.5",width:"5",height:"5",style:{fill:"none",stroke:"#423f30"}}),o.createElement("rect",{x:"14",y:"11.5",width:"5",height:"5",style:{fill:"none",stroke:"#423f30"}}),o.createElement("rect",{x:"9",y:"6.5",width:"5",height:"5",style:{fill:"none",stroke:"#423f30"}}),o.createElement("rect",{x:"14",y:"6.5",width:"5",height:"5",style:{fill:"none",stroke:"#423f30"}}),o.createElement("rect",{x:"14",y:"1.5",width:"5",height:"5",style:{fill:"none",stroke:"#423f30"}})),o.createElement("symbol",{id:"archimate-diagram-model-reference-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("rect",{x:"1",y:"0.5",width:"7",height:"7",style:{fill:"none",stroke:"#1c6aa9"}}),o.createElement("rect",{x:"2",y:"1.5",width:"4.5",height:"4.5",style:{fill:"#c2e8fe",stroke:"#c2e8fe"}}),o.createElement("path",{d:"M11 4 h7",style:{fill:"none",stroke:"#c2e8fe"}}),o.createElement("path",{d:"M11 5 h7",style:{fill:"none",stroke:"#1c6aa9"}}),o.createElement("rect",{x:"12",y:"8.5",width:"2",height:"2",style:{fill:"none",stroke:"#1c6aa9"}}),o.createElement("path",{d:"M15 9.5 h3",style:{fill:"none",stroke:"#1c6aa9"}}),o.createElement("rect",{x:"1",y:"11.7",width:"7",height:"7",style:{fill:"none",stroke:"#1c6aa9"}}),o.createElement("rect",{x:"2",y:"12.7",width:"4.5",height:"4.5",style:{fill:"#c2e8fe",stroke:"#c2e8fe"}}),o.createElement("path",{d:"M11 14.7 h7",style:{fill:"none",stroke:"#c2e8fe"}}),o.createElement("path",{d:"M11 15.7 h7",style:{fill:"none",stroke:"#1c6aa9"}})),o.createElement("symbol",{id:"archimate-actor-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("path",{d:"M 11 18 l 4 -5 l 4 5 m -4 -5 v -3 h -4 h 8 h -4 v -3 a 3 3 0 1 0 0 -6 a 3 3 0 1 0 0 6",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-assessment-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m4.5 13 l 5 -5 a 4 4 0 1 0 8 -8 a 4 4 0 1 0 -8 8",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-collaboration-badge",className:"archimate-badge",viewBox:"0 0 20 15",preserveAspectRatio:"xMaxYMin meet"},o.createElement("path",{d:"m7.5 14 a 6.5 6.5 0 0 1 0 -13 a 6.5 6.5 0 0 1 0 13 m 5 0 a 6.5 6.5 0 0 1 0 -13 a 6.5 6.5 0 0 1 0 13",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-communication-path-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m7.5 -1 l -6.5 6.5 l 6.5 6.5 m 5 -13 l 6.5 6.5 l -6.5 6.5 m -7 -6.5 h 2 m 1.5 0 h 2 m 1.5 0 h 2",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-constraint-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m6 -1 h 13 l -5 10 h -13 z m 4 0 l -5 10",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-device-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("rect",{x:"2",y:"1",width:"16",height:"10",rx:"3",ry:"3",style:{fill:"inherit",stroke:"inherit"}}),o.createElement("path",{d:"M6 11 l -4.5 4 h 17 l -4.5 -4",stroke:"black",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-driver-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m17.5 6.5 a 6.5 6.5 0 0 0 -13 0 a 6.5 6.5 0 0 0 13 0 m 2 0 h -17 m 8.5 -8.5 v 17 m -6.01 -2.49 l 12.02 -12.02 m 0 12.02 l -12.02 -12.02",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-event-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("path",{d:"m1 1 a 8 6.5 0 0 1 0 12 h 12 a 6 5.5 0 0 0 0 -12 z",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-function-badge",className:"archimate-badge",viewBox:"0 0 20 20",preserveAspectRatio:"xMaxYMin meet"},o.createElement("path",{d:"m7 15 l 0 -9 l 6 -5 l 6 5 l 0 9 l -6 -6 z",style:{fill:"none",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-gap-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m4.5 5 a 6.5 6.5 0 0 0 13 0 a 6.5 6.5 0 0 0 -13 0 m -2 -1.5 h 17 m -17 3 h 17",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-goal-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("circle",{cx:"12",cy:"6",r:"7",style:{fill:"inherit",stroke:"inherit"}}),o.createElement("circle",{cx:"12",cy:"6",r:"4.7",style:{fill:"inherit",stroke:"inherit"}}),o.createElement("circle",{cx:"12",cy:"6",r:"2",style:{fill:"black",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-interaction-badge",className:"archimate-badge",viewBox:"0 0 20 15",preserveAspectRatio:"xMaxYMin meet"},o.createElement("path",{d:"M11 14 a 5 6 0 0 1 0 -13 z",style:{fill:"inherit",stroke:"inherit"}}),o.createElement("path",{d:"M14 14 a 5 6 0 0 0 0 -13 z",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-interface-badge",className:"archimate-badge",viewBox:"0 0 20 15",preserveAspectRatio:"xMaxYMin meet"},o.createElement("path",{d:"m0.5 6 h 8.5 a 5 5 0 0 1 10 0 a 5 5 0 0 1 -10 0",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-location-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m10 6.5 a 5 5, 0, 1, 1, 8 0 l -4 7 z",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-network-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m9 9.5 a 2.5 2.5 0 0 0 -5 0 a 2.5 2.5 0 0 0 5 0 m -2 -2.5 l 1 -3 m 0.5 0 a 2.5 2.5 0 0 0 0 -5 a 2.5 2.5 0 0 0 0 5 m 2 -2.5 h 3.5 a 2.5 2.5 0 0 0 5 0 a 2.5 2.5 0 0 0 -5 0 m 2 2.5 l -1 3 m -0.5 0 a 2.5 2.5 0 0 0 0 5 a 2.5 2.5 0 0 0 0 -5 m -2 2.5 h -3.5",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-app-component-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("path",{d:"m6 4 v -3 h 12 v 17 h -12 v -3 m 0 -4 v -3",style:{fill:"inherit",stroke:"inherit"}}),o.createElement("rect",{x:"1",y:"4",width:"9",height:"4",style:{fill:"inherit",stroke:"inherit"}}),o.createElement("rect",{x:"1",y:"11",width:"9",height:"4",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-node-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("path",{d:"M1 19 v -15 l 3 -3 h 15 v 15 l -3 3 z M 16 19 v -15 l 3 -3 m -3 3 h -15",style:{fill:"none",stroke:"inherit",strokeLinejoin:"miter"}})),o.createElement("symbol",{id:"archimate-plateau-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m7 0 h 12 m -12 1 h 12 m -14 3 h 12 m -12 1 h 12 m -14 3 h 12 m -12 1 h 12",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-principle-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m8.5 -1 h 8 a 2 2 0 0 0 2 2 v 9 a 2 2 0 0 0 -2 2 h -8 a 2 2 0 0 0 -2 -2 v -9 a 2 2 0 0 0 2 -2 m 4 1 v7 m 1 -7 v7 m -1 1.5 v2 m 1 -2 v2",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-process-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m1 3 h 11 v -4 l 7 6 l -7 6 v -4 h -11 z",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-requirement-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m6 -1 h 13 l -5 10 h -13 z",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-role-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("path",{d:"m15 10.5 h -10 a 4.5 4.5 0 0 1 0 -9 h 10 a 4.5 4.5 0 0 1 0 9 a 4.5 4.5 0 0 1 0 -9",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-service-badge",className:"archimate-badge",viewBox:"0 0 20 20"},o.createElement("rect",{x:"1",y:"1",width:"17",height:"10",rx:"5",ry:"5",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("symbol",{id:"archimate-system-software-badge",className:"archimate-badge",viewBox:"0 0 20 15"},o.createElement("path",{d:"m9.5 1 a 5.5 5.5 0 0 1 0 11 a 5.5 5.5 0 0 1 0 -11    m -2.8 0.7    a 5.5 5.5 0 1 1 7.6 7.6",style:{fill:"inherit",stroke:"inherit"}})),o.createElement("marker",{id:"archimate-dot-marker",viewBox:"0 0 10 10",refX:"4",refY:"4",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"},o.createElement("circle",{cx:"4",cy:"4",r:"3",fill:"black",stroke:"black"})),o.createElement("marker",{id:"archimate-used-by-arrow",viewBox:"0 0 10 10",refX:"9",refY:"5",markerUnits:"strokeWidth",markerWidth:"8",markerHeight:"8",orient:"auto"},o.createElement("path",{d:"M 1 1 L 9 5 L 1 9",fill:"none",stroke:"black",style:{fill:"none",stroke:"black"}})),o.createElement("marker",{id:"archimate-open-arrow",viewBox:"0 0 10 10",refX:"9",refY:"5",markerUnits:"strokeWidth",markerWidth:"8",markerHeight:"8",orient:"auto",stroke:"black",fill:"none"},o.createElement("path",{d:"M 1 1 L 9 5 L 1 9",fill:"none",stroke:"black"})),o.createElement("marker",{id:"archimate-filled-arrow",viewBox:"0 0 10 10",refX:"9",refY:"5",markerUnits:"strokeWidth",markerWidth:"12",markerHeight:"12",orient:"auto"},o.createElement("polygon",{points:"1,1 9,5 1,9",fill:"black",stroke:"black"})),o.createElement("marker",{id:"archimate-hollow-arrow",viewBox:"0 0 10 10",refX:"9",refY:"5",markerUnits:"strokeWidth",markerWidth:"12",markerHeight:"12",orient:"auto"},o.createElement("polygon",{points:"1,1 9,5 1,9",fill:"white",stroke:"black"})),o.createElement("marker",{id:"archimate-filled-diamond",viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:"24",markerHeight:"24",orient:"auto"},o.createElement("polygon",{points:"5,2.5 9,5 5,7.5 1,5",fill:"black",stroke:"black"})),o.createElement("marker",{id:"archimate-hollow-diamond",viewBox:"0 0 25 25",refX:"1",refY:"12",markerUnits:"strokeWidth",markerWidth:"24",markerHeight:"24",orient:"auto"},o.createElement("polygon",{points:"12.5,6.25 22.5,12.5 12.5,18.75 2.5,12.5",fill:"white",stroke:"black"}))),this.props.children)}}]),t}(o.PureComponent),Be=n(9),Ne=n(17),Te=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={lines:n.lines()},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement(o.Fragment,null,this.tspans())}},{key:"lines",value:function(){var e=this.textWidth(this.props.text),t=this.maxLineWidth();if(e<=t)return[{text:this.props.text,maxWidth:t,calcWidth:e}];var n=this.props.text.split(" ");if(1===n.length)return[{text:n[0],maxWidth:t,calcWidth:e}];for(var r=[];n.length>0;){for(var i=n.shift(),a=0;n.length>0&&this.textWidth("".concat(i," ").concat(n[0]))<t;)i="".concat(i," ").concat(n.shift()),a=this.textWidth(i);r.push({calcWidth:a,maxWidth:t,text:i}),i=""}return r}},{key:"textWidth",value:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=t.ownerDocument;if(!n)return 0;var r=n.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("x","0"),r.setAttribute("y","0"),r.insertAdjacentText("afterbegin",e),t.insertAdjacentElement("afterbegin",r);var i=document.querySelector("body");if(i){i.insertAdjacentElement("beforeend",t);var a=r.getBBox();return i.removeChild(t),a.width}return 0}},{key:"maxLineWidth",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.badgeBounds&&this.props.badgeBounds.width>0?this.props.bounds.width-(this.props.badgeBounds.width+2):this.props.bounds.width}},{key:"lineX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(void 0===this.props.bounds)return 0;var t=this.props.bounds;switch(this.props.style.textAnchor){case"start":return t.left;case"end":return e>0?t.right:t.right-this.props.badgeBounds.width;default:return e>0?t.center().x:t.center().x-this.props.badgeBounds.width/2}}},{key:"tspans",value:function(){var e=this,t=0;return this.state.lines.map((function(n){return o.createElement("tspan",{x:e.lineX(t),dy:"1.1em",className:"entity-name",style:e.props.style,key:++t},n.text)}))}}]),t}(o.PureComponent),Ie=function(e){function t(e){var n;Object(u.a)(this,t);var r="middle";switch((n=Object(p.a)(this,Object(m.a)(t).call(this,e))).props.textAlign){case"left":r="start";break;case"right":r="end"}return n.state={lineHeight:12,textAnchor:r},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){if(this.props.label&&0!==this.props.label.length){var e=this.props.textBounds,t="".concat(this.props.child.id,"-clip-path");return o.createElement(o.Fragment,null,o.createElement("clipPath",{id:t},o.createElement("path",{d:this.clipPathD()})),o.createElement("text",{clipPath:"url(#".concat(t,")"),x:this.lineX(),y:e.y,style:this.textStyle()},o.createElement(Te,{text:this.props.label,bounds:this.props.textBounds,badgeBounds:this.props.badgeBounds,style:this.textStyle(this.state.textAnchor)})))}}},{key:"clipPathD",value:function(){var e=this.props.textBounds;if(this.props.badgeBounds&&this.props.badgeBounds.height+2<e.height){var t=this.props.badgeBounds,n=t.height+2;return["M",e.left,e.top,"h",e.width-t.width-2,"v",n,"h",t.width+2,"v",e.height-n,"h",-e.width,"z"].map((function(e){return e.toString()})).join(" ")}return["M",e.left,e.top,"h",e.width,"v",e.height,"h",-e.width,"z"].map((function(e){return e.toString()})).join(" ")}},{key:"lineX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(void 0===this.props.textBounds)return 0;var t=this.props.textBounds;switch(this.state.textAnchor){case"start":return t.left;case"end":return e>0?t.right:t.right-this.props.badgeBounds.width;default:return e>0?t.center().x:t.center().x-this.props.badgeBounds.width/2}}},{key:"textStyle",value:function(e){var t=this.props.child.style;if(void 0===t)return{textAlign:"center",textAnchor:"middle"};var n={};return t.fontColor&&(n.fill=t.fontColor.toRGBA()),t.font&&t.font.name&&(n.fontFamily=t.font.name),t.font&&t.font.size&&(n.fontSize=t.font.size),this.props.textAlign&&(n.textAlign=this.props.textAlign),t.textAlignment&&(n.textAlign=t.textAlignment),n.textAnchor=e||(this.state?this.state.textAnchor:"middle"),n}}]),t}(o.PureComponent),Me=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.bounds;return o.createElement("rect",{className:"archimate-selected-element-highlight",style:{display:"inherit"},x:e.x,y:e.y,width:e.width,height:e.height})}}]),t}(o.PureComponent),Re=function(e){function t(e){var n;Object(u.a)(this,t),n=Object(p.a)(this,Object(m.a)(t).call(this,e));var r=new F(n.props.x||n.props.viewNode.bounds.left,n.props.y||n.props.viewNode.bounds.top,n.props.viewNode.bounds.width,n.props.viewNode.bounds.height);return n.state={backgroundClass:n.defaultBackgroundClass(),badge:void 0,badgeBounds:void 0,bounds:r,entity:n.props.viewNode.entityInstance(),margin:8,textAlign:"center",textBounds:r.reducedBy(2)},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.x===e.x&&this.props.y===e.y||this.setState({badgeBounds:this.badgeBounds(),textBounds:this.textBounds()})}},{key:"render",value:function(){return o.createElement("g",this.groupAttrs(),this.title(),this.desc(),this.entityShape(),this.entityBadge(),this.entityLabel(),this.selectedHighlight())}},{key:"textBounds",value:function(){return new F(this.props.x,this.props.y,this.props.viewNode.bounds.width,this.props.viewNode.bounds.height).reducedBy(2)}},{key:"badgeBounds",value:function(){}},{key:"groupAttrs",value:function(){var e={id:this.props.viewNode.id};return this.props.viewNode.type&&this.props.viewNode.type.length>0&&(e.className="archimate-".concat(this.elementType())),this.props.onClicked&&(e.onClick=this.props.onClicked.bind(this,this.props.viewNode.entityInstance())),e}},{key:"title",value:function(){return this.props.viewNode.name&&this.props.viewNode.name.length>0?o.createElement("title",null,this.props.viewNode.name):void 0}},{key:"desc",value:function(){return this.props.viewNode.documentation?o.createElement("desc",null,this.props.viewNode.documentation):void 0}},{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement("rect",{x:e.x,y:e.y,width:e.width,height:e.height,className:this.state.backgroundClass,style:this.shapeStyle()})}},{key:"shapeStyle",value:function(){var e=this.props.viewNode.style;if(void 0===e)return{};var t={};return e.fillColor&&(t.fill=e.fillColor.toRGBA()),e.lineColor&&(t.stroke=e.lineColor.toRGBA()),e.lineWidth&&(t.strokeWidth=e.lineWidth),t}},{key:"entityBadge",value:function(){if(void 0!==this.state.badge)return o.createElement("use",Object.assign({href:this.state.badge},this.badgeBounds()))}},{key:"entityLabel",value:function(){var e=this.label();if(void 0!==e){var t=e;return o.createElement(Ie,{child:this.props.viewNode,label:t,textBounds:this.state.textBounds||this.props.viewNode.absolutePosition().reducedBy(2),textAlign:this.state.textAlign,badgeBounds:this.state.badgeBounds||_()})}}},{key:"selectedHighlight",value:function(){return this.props.selected?o.createElement(Me,{bounds:this.props.viewNode.absolutePosition()}):void 0}},{key:"label",value:function(){if(this.props.viewNode.content&&this.props.viewNode.content.length>0)return this.props.viewNode.content;if(this.props.viewNode.name&&this.props.viewNode.name.length>0)return this.props.viewNode.name;var e=this.props.viewNode.entityInstance();return void 0!==e?e.name:void 0}},{key:"defaultBackgroundClass",value:function(){switch(this.elementType()){case"BusinessActor":case"BusinessCollaboration":case"BusinessEvent":case"BusinessFunction":case"BusinessInteraction":case"BusinessInterface":case"BusinessObject":case"BusinessProcess":case"BusinessRole":case"BusinessService":case"Contract":case"Location":case"Product":case"Representation":return j(a.Business);case"ApplicationCollaboration":case"ApplicationComponent":case"ApplicationEvent":case"ApplicationFunction":case"ApplicationInteraction":case"ApplicationInterface":case"ApplicationProcess":case"ApplicationService":case"DataObject":return j(a.Application);case"Artifact":case"CommunicationNetwork":case"CommunicationPath":case"Device":case"InfrastructureFunction":case"InfrastructureInterface":case"InfrastructureService":case"Network":case"Node":case"Path":case"SystemSoftware":case"TechnologyCollaboration":case"TechnologyEvent":case"TechnologyFunction":case"TechnologyInteraction":case"TechnologyInterface":case"TechnologyObject":case"TechnologyProcess":case"TechnologyService":return j(a.Technology);case"DistributionNetwork":case"Equipment":case"Facility":case"Material":return j(a.Physical);case"Assessment":case"Constraint":case"Driver":case"Goal":case"Meaning":case"Outcome":case"Principle":case"Requirement":case"Stakeholder":case"Value":return j(a.Motivation);case"Deliverable":case"Gap":case"ImplementationEvent":case"Plateau":case"WorkPackage":return j(a.ImplementationAndMigration);case"AndJunction":case"Junction":case"OrJunction":return j(a.Connectors);case"Capability":case"CourseOfAction":case"Resource":return j(a.Strategy);case"Grouping":case"Group":default:return j(a.Other)}}},{key:"elementType",value:function(){var e=this.props.viewNode.entityInstance();return e?e.type:this.props.viewNode.type}}]),t}(o.PureComponent);function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Le=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badgeBounds:n.badgeBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,null,[{key:"path",value:function(e,t,n){return o.createElement("rect",{x:e.x,y:e.y,width:e.width,height:e.height,className:t,style:n})}}]),Object(h.a)(t,[{key:"badgeBounds",value:function(){return new F(this.props.viewNode.absolutePosition().right-25,this.props.viewNode.absolutePosition().top+5,20,20)}},{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement("rect",{x:e.x,y:e.y,width:e.width,height:e.height,className:this.state.backgroundClass,style:this.shapeStyle()})}}]),t}(Re);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _e=function(e){function t(e){var n;Object(u.a)(this,t);var r="1"===(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).props.viewNode.childType?"#archimate-app-component-badge":void 0;return n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:r,badgeBounds:void 0,textBounds:n.textBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"badgeBounds",value:function(){return"1"===this.props.viewNode.childType?Object(Ne.a)(Object(m.a)(t.prototype),"badgeBounds",this).call(this):void 0}},{key:"textBounds",value:function(){if("1"===this.props.viewNode.childType)return Object(Ne.a)(Object(m.a)(t.prototype),"textBounds",this).call(this);var e=this.props.viewNode.absolutePosition(),n=e.left+10.5;return new F(n+10.5,e.top+1,e.width-22,e.height-2)}},{key:"entityShape",value:function(){if("1"===this.props.viewNode.childType)return Object(Ne.a)(Object(m.a)(t.prototype),"entityShape",this).call(this);var e=this.props.viewNode.absolutePosition(),n=e.left+10.5,r=e.width-10.5;return o.createElement(o.Fragment,null,o.createElement("rect",{x:n,y:e.top,width:r,height:e.height,className:this.state.backgroundClass,style:this.shapeStyle()}),this.componentDecoration(e.left,e.top+10),this.componentDecoration(e.left,e.top+30))}},{key:"componentDecoration",value:function(e,t){return o.createElement(o.Fragment,null,o.createElement("rect",{x:e,y:t,width:"21",height:"13",className:this.state.backgroundClass,style:this.shapeStyle()}),o.createElement("rect",{x:e,y:t,width:"21",height:"13",className:"archimate-decoration"}))}}]),t}(Le);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var qe=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"archimate-artifact-badge"}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition(),t=18;return o.createElement("g",{className:this.state.backgroundClass,style:this.shapeStyle()},o.createElement("path",{d:["M",e.left,e.top,"h",e.width-t,"l",t,t,"v",e.height-t,"h",-e.width,"z"].join(" ")}),o.createElement("path",{d:["M",e.right-t,e.top,"v",t,"h",t,"z"].join(" "),className:"archimate-decoration"}))}}]),t}(Le);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ye=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badgeBounds:n.badgeBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition(),t=10,n=e.width-2*t,r=e.height-2*t;return o.createElement("path",{d:["M",e.left+t,e.top,"h",n,"l",t,t,"v",r,"l",-t,t,"h",-n,"l",-t,-t,"v",-r,"z"].join(" "),className:this.state.backgroundClass,style:this.shapeStyle()})}},{key:"badgeBounds",value:function(){var e=this.props.viewNode.absolutePosition();return new F(e.right-25,e.top+5,20,20)}}]),t}(Re);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ve=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-assessment-badge"}),n}return Object(d.a)(t,e),t}(Ye);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qe=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-actor-badge"}),n}return Object(d.a)(t,e),t}(Le);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ze=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-role-badge"}),n}return Object(d.a)(t,e),t}(Le);function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ke=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-collaboration-badge"}),n}return Object(d.a)(t,e),t}(Le);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var et=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-constraint-badge"}),n}return Object(d.a)(t,e),t}(Ye);function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var nt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{margin:8,textBounds:n.textBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition(),t=this.shapeStyle(),n={stroke:t.stroke,strokeWidth:t.strokeWidth};return o.createElement("g",{className:this.state.backgroundClass},o.createElement("rect",{key:"data-background",x:e.left,y:e.top,width:e.width,height:e.height,className:this.state.backgroundClass,style:t}),o.createElement("rect",{key:"data-decoration",x:e.left,y:e.top,width:e.width,height:this.state.margin,className:"archimate-decoration",style:n}))}},{key:"textBounds",value:function(){var e=Object(Ne.a)(Object(m.a)(t.prototype),"textBounds",this).call(this);return new F(e.left,e.top+8,e.width,e.height-8)}}]),t}(Re);function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var it=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{margin:8}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition(),t=this.state.margin||8;return o.createElement("g",{className:this.state.backgroundClass},o.createElement("rect",{x:e.left,y:e.top,width:e.width,height:e.height,className:this.state.backgroundClass,style:this.shapeStyle()}),o.createElement("rect",{x:e.left,y:e.top,width:e.width,height:t,className:"archimate-decoration"}),o.createElement("rect",{x:e.left,y:e.top+e.height-t,width:e.width,height:t,className:"archimate-decoration"}))}}]),t}(nt);function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ot=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"archimate-artifact-badge"}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement(o.Fragment,null,o.createElement("path",{d:["M",e.left,e.top,"v",e.height-8,"c",.167*e.width,.133*e.height,.336*e.width,.133*e.height,.508*e.width,0,"c",.0161*e.width,-.0778*e.height,.322*e.width,-.0778*e.height,.475*e.width,0,"v",-(e.height-8),"z"].join(" "),className:this.state.backgroundClass,style:this.shapeStyle()}))}}]),t}(Re);function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ct=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badgeBounds:n.badgeBounds(),margin:14,textBounds:n.textBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition(),t=this.state.margin||14,n=e.height-t,r=e.width-t;return o.createElement("g",{className:this.state.backgroundClass,style:this.shapeStyle()},o.createElement("path",{d:["M",e.left,e.bottom,"v",-n,"l",t,-t,"h",r,"v",n,"l",-t,t,"z"].join(" ")}),o.createElement("path",{d:["M",e.left,e.top+t,"l",t,-t,"h",r,"v",n,"l",-t,t,"v",-n,"z","M",e.right,e.top,"l",-t,t].join(" "),className:"archimate-decoration"}),o.createElement("path",{d:["M",e.left,e.top+t,"h",r,"l",t,-t,"M",e.left+r,e.bottom,"v",-n].join(" "),style:{fill:"none",stroke:"inherit"}}))}},{key:"badgeBounds",value:function(){var e=this.props.viewNode.absolutePosition();return new F(e.right-14-25,e.top+14+5,20,20)}},{key:"textBounds",value:function(){var e=this.props.viewNode.absolutePosition(),t=e.height-14,n=e.width-14;return new F(e.left+1,e.top+14+1,n-2,t-2)}}]),t}(Re);function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ht=function(e){function t(e){var n;return Object(u.a)(this,t),"1"===(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).props.viewNode.childType?n.state=ut({},n.state,{badge:"#archimate-device-badge"}):n.state=ut({},n.state,{badge:void 0,badgeBounds:void 0,textBounds:n.props.viewNode.absolutePosition().reducedBy(2)}),n}return Object(d.a)(t,e),Object(h.a)(t,null,[{key:"path",value:function(e,t,n){var r=e,i=10,a=["M",r.left+i,r.bottom-i,"l",-i,i,"h",r.width,"l",-i,-i,"z"].join(" ");return o.createElement(o.Fragment,null,o.createElement("rect",{x:r.left,y:r.top,width:r.width,height:r.height-i,rx:"6",ry:"6",className:t,style:n}),o.createElement("path",{d:a,className:t,style:n}),o.createElement("path",{d:a,className:"archimate-decoration",style:n}))}}]),Object(h.a)(t,[{key:"entityShape",value:function(){return"1"===this.props.viewNode.childType?Object(Ne.a)(Object(m.a)(t.prototype),"entityShape",this).call(this):t.path(this.props.viewNode.absolutePosition(),this.state.backgroundClass,this.shapeStyle())}}]),t}(ct);function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-diagram-model-reference-background",badge:"#archimate-diagram-model-reference-badge"}),n}return Object(d.a)(t,e),t}(Le);function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-distribution-network-badge"}),n}return Object(d.a)(t,e),t}(Le);function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var bt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-driver-badge"}),n}return Object(d.a)(t,e),t}(Ye);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var gt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badgeBounds:n.badgeBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement("rect",{x:e.left,y:e.top,width:e.width,height:e.height,rx:"5",ry:"5",className:this.state.backgroundClass,style:this.shapeStyle()})}},{key:"badgeBounds",value:function(){var e=this.props.viewNode.absolutePosition();return new F(e.right-25,e.top+5,20,20)}}]),t}(Re);function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var jt=function(e){function t(e){var n;Object(u.a)(this,t);var r="1"===(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).props.viewNode.childType?void 0:"#archimate-event-badge";return n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:r,badgeBounds:n.badgeBounds(),textBounds:n.textBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){return"1"===this.props.viewNode.childType?this.eventPath():Object(Ne.a)(Object(m.a)(t.prototype),"entityShape",this).call(this)}},{key:"badgeBounds",value:function(){return"1"===this.props.viewNode.childType?void 0:Object(Ne.a)(Object(m.a)(t.prototype),"badgeBounds",this).call(this)}},{key:"textBounds",value:function(){if("1"===this.props.viewNode.childType){var e=Object(Ne.a)(Object(m.a)(t.prototype),"textBounds",this).call(this);return new F(e.left+14.4,e.top,e.width-18,e.height)}return Object(Ne.a)(Object(m.a)(t.prototype),"textBounds",this).call(this)}},{key:"eventPath",value:function(){var e=this.props.viewNode.absolutePosition(),t=18,n=e.height/2,r=.85*e.width,i=["M",e.left,e.top,"l",t,n,"l",-t,n,"h",r,"a",17,n,0,0,0,0,-e.height,"z"].join(" ");return o.createElement("path",{d:i,className:this.state.backgroundClass,style:this.shapeStyle()})}}]),t}(gt);function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-function-badge"}),n}return Object(d.a)(t,e),t}(gt);function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-implementation2-background",badge:"#archimate-gap-badge",badgeBounds:n.badgeBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"badgeBounds",value:function(){return new F(this.props.viewNode.absolutePosition().right-25,this.props.viewNode.absolutePosition().top+5,20,20)}}]),t}(ot);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var St=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-goal-badge"}),n}return Object(d.a)(t,e),t}(Ye);function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var At=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).groupHeaderHeight=21,n.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-group-background",textAlign:"left",textBounds:n.textBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement(o.Fragment,null,o.createElement("rect",{x:e.left,y:e.top+this.groupHeaderHeight,width:e.width,height:e.height-this.groupHeaderHeight,className:this.state.backgroundClass,style:this.shapeStyle()}),o.createElement("rect",{x:e.left,y:e.top,width:e.width/2,height:this.groupHeaderHeight,className:this.state.backgroundClass,style:this.shapeStyle()}),o.createElement("rect",{x:e.left,y:e.top,width:e.width/2,height:this.groupHeaderHeight,className:"archimate-decoration"}),")")}},{key:"textBounds",value:function(){var e=this.props.viewNode.absolutePosition();return new F(e.left+3,e.top,e.width/2-6,this.groupHeaderHeight)}}]),t}(Re);function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Bt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-grouping-background",textAlign:"left"}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement(o.Fragment,null,o.createElement("rect",{x:e.left,y:e.top+21,width:e.width,height:e.height-21,className:this.state.backgroundClass,style:this.shapeStyle()}),o.createElement("path",{d:["M",e.left,e.top+21-1,"v",-20,"h",e.width/2,"v",20].join(" "),className:this.state.backgroundClass,style:this.shapeStyle()}))}}]),t}(At);function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-interaction-badge"}),n}return Object(d.a)(t,e),t}(gt);function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rt=function(e){function t(e){var n;return Object(u.a)(this,t),"1"===(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).props.viewNode.childType?n.state=Mt({},n.state,{badge:void 0,badgeBounds:void 0}):n.state=Mt({},n.state,{badge:"#archimate-interface-badge"}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){return"1"===this.props.viewNode.childType?this.elipsePath():Object(Ne.a)(Object(m.a)(t.prototype),"entityShape",this).call(this)}},{key:"elipsePath",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement("ellipse",{cx:e.left+e.width/2,cy:e.top+e.height/2,rx:e.width/2,ry:e.height/2,className:this.state.backgroundClass,style:this.shapeStyle()})}}]),t}(Le);function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Lt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-junction-background"}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityLabel",value:function(){}},{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition(),t=e.center(),n=Math.min(e.width,e.height)/2;return o.createElement("circle",{cx:t.x,cy:t.y,r:n,className:this.state.backgroundClass,style:this.shapeStyle()})}}]),t}(Re);function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _t=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-location-background",badge:"#archimate-location-badge"}),n}return Object(d.a)(t,e),t}(Le);function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var qt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition(),t=[new L(e.left+.04*e.width,e.top+.5*e.height),new L(e.left+.5*e.width,e.top+.12*e.height),new L(e.left+.94*e.width,e.top+.55*e.height),new L(e.left+.53*e.width,e.top+.87*e.height)];return o.createElement("path",{d:["M",t[0].x,t[0].y,"C",t[0].x-.15*e.width,t[0].y-.32*e.height,t[1].x-.3*e.width,t[1].y-.15*e.height,t[1].x,t[1].y,"C",t[1].x+.29*e.width,t[1].y-.184*e.height,t[2].x+.204*e.width,t[2].y-.304*e.height,t[2].x,t[2].y,"C",t[2].x+.028*e.width,t[2].y+.295*e.height,t[3].x+.156*e.width,t[3].y+.088*e.height,t[3].x,t[3].y,"C",t[3].x-.279*e.width,t[3].y+.326*e.height,t[0].x-.164*e.width,t[0].y+.314*e.height,t[0].x,t[0].y].join(" "),className:this.state.backgroundClass,style:this.shapeStyle()})}}]),t}(Re);function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Yt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-network-badge"}),n}return Object(d.a)(t,e),t}(Le);function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ht=function(e){function t(e){var n;return Object(u.a)(this,t),"1"===(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).props.viewNode.childType?n.state=Vt({},n.state,{badge:"#archimate-node-badge"}):n.state=Vt({},n.state,{badge:void 0,badgeBounds:void 0}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){return"1"===this.props.viewNode.childType?Le.path(this.props.viewNode.absolutePosition(),this.state.backgroundClass,this.shapeStyle()):Object(Ne.a)(Object(m.a)(t.prototype),"entityShape",this).call(this)}}]),t}(ct);function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ut=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-note-background",textAlign:"left",textBounds:n.props.viewNode.absolutePosition().reducedBy(3)}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement("path",{d:["m",e.left,e.top,"h",e.width,"v",e.height-8,"l",-8,8,"h",-(e.width-8),"z"].join(" "),className:this.state.backgroundClass,style:this.shapeStyle()})}}]),t}(Re);function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Jt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-or-junction-background"}),n}return Object(d.a)(t,e),t}(Lt);function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $t=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-outcome-badge"}),n}return Object(d.a)(t,e),t}(Ye);function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-communication-path-badge"}),n}return Object(d.a)(t,e),t}(Le);function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-implementation2-background",badge:"#archimate-plateau-badge"}),n}return Object(d.a)(t,e),t}(ct);function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var on=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-principle-badge"}),n}return Object(d.a)(t,e),t}(Ye);function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln=function(e){function t(e){var n;return Object(u.a)(this,t),"1"===(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).props.viewNode.childType?n.state=cn({},n.state,{badgeBounds:_(),textBounds:n.textBounds()}):n.state=cn({},n.state,{badge:"#archimate-process-badge"}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){return"1"===this.props.viewNode.childType?this.processPath():Object(Ne.a)(Object(m.a)(t.prototype),"entityShape",this).call(this)}},{key:"textBounds",value:function(){var e=this.props.viewNode.absolutePosition(),t=e.top+.15*e.height,n=e.bottom-.15*e.height,r=e.left,i=new F(r,t,e.width-.25*e.height,n-t);return i.reducedBy(2)}},{key:"processPath",value:function(){var e=this.props.viewNode.absolutePosition(),t=e.top,n=e.top+.15*e.height,r=e.top+.5*e.height,i=e.bottom-.15*e.height,a=e.bottom,s=e.left,c=e.right-.5*e.height,l=e.right;return o.createElement("path",{d:["M",s,n,"L",c,n,"L",c,t,"L",l,r,"L",c,a,"L",c,i,"L",s,i,"z"].join(" "),className:this.state.backgroundClass,style:this.shapeStyle()})}}]),t}(gt);function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var hn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement("g",{className:this.state.backgroundClass},o.createElement("rect",{x:e.left,y:e.top,width:e.width,height:e.height,className:this.state.backgroundClass,style:this.shapeStyle()}),o.createElement("rect",{x:e.left,y:e.top,width:e.width/2,height:"8",className:"archimate-decoration"}))}}]),t}(nt);function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement(o.Fragment,null,o.createElement("path",{d:["M",e.left,e.top,"v",e.height-8,"c",.167*e.width,.133*e.height,.336*e.width,.133*e.height,.508*e.width,0,"c",.0161*e.width,-.0778*e.height,.322*e.width,-.0778*e.height,.475*e.width,0,"v",-(e.height-8),"z"].join(" "),className:this.state.backgroundClass,style:this.shapeStyle()}),o.createElement("rect",{key:"data-decoration",x:e.left,y:e.top,width:e.width,height:this.state.margin,className:"archimate-decoration"}))}}]),t}(nt);function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-requirement-badge"}),n}return Object(d.a)(t,e),t}(Ye);function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var bn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-resource-badge"}),n}return Object(d.a)(t,e),t}(Le);function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var On=function(e){function t(e){var n;return Object(u.a)(this,t),"1"===(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).props.viewNode.childType?n.state=gn({},n.state,{badgeBounds:_(),textBounds:n.textBounds()}):n.state=gn({},n.state,{badge:"#archimate-service-badge"}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){return"1"===this.props.viewNode.childType?this.servicePath():Object(Ne.a)(Object(m.a)(t.prototype),"entityShape",this).call(this)}},{key:"textBounds",value:function(){var e=this.props.viewNode.absolutePosition();return new F(e.left+7,e.top+5,e.width-14,e.height-10)}},{key:"servicePath",value:function(){var e=this.props.viewNode.absolutePosition();return o.createElement("rect",{x:e.left,y:e.top,width:e.width,height:e.height,rx:e.height/2,ry:e.height/2,className:this.state.backgroundClass,style:this.shapeStyle()})}}]),t}(gt);function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var kn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-role-badge"}),n}return Object(d.a)(t,e),t}(Ye);function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var En=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{backgroundClass:"archimate-sticky-background"}),n}return Object(d.a)(t,e),t}(Re);function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Cn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:"#archimate-system-software-badge"}),n}return Object(d.a)(t,e),t}(Le);function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{textBounds:n.textBounds()}),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"entityShape",value:function(){var e=this.props.viewNode.absolutePosition(),t=e.left+e.width/2,n=e.width/2-1,r=e.top+e.height/2,i=e.height/2-1;return o.createElement("ellipse",{cx:t,cy:r,rx:n,ry:i,className:this.state.backgroundClass,style:this.shapeStyle()})}},{key:"textBounds",value:function(){var e=Object(Ne.a)(Object(m.a)(t.prototype),"textBounds",this).call(this);return new F(e.left+10,e.top+10,e.width-20,e.height-20)}}]),t}(Re);function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Dn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(n,!0).forEach((function(t){Object(Be.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state,{badge:void 0,badgeBounds:void 0}),n}return Object(d.a)(t,e),t}(gt);var Bn,Nn=n(34),Tn=30,In=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).forceLink=void 0,n.simulation=void 0,n.prevNodes=void 0,n.prevConnections=void 0,n.adjustLinkDistance=function(e){var t=e.entityInstance(),n=function(e){return Tn*e/100};switch(t?t.type:""){case"Influence":return n(200);case"Access":return n(150);case"Serving":return n(120);case"Realization":return n(100);case"Assignment":return n(80);case"Aggregation":return n(60);case"Composition":return n(50);default:return n(100)}},n.ticked=function(){n.simulation&&(n.simulation.force("center",Nn.a(n.props.centerX,n.props.centerY)),n.props.onForceLayoutTick&&n.props.onForceLayoutTick())},n.prevNodes=Object(A.Set)(),n.prevConnections=Object(A.Set)(),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.props.children}},{key:"componentDidMount",value:function(){this.props.autoLayout&&(this.forceLink=Nn.c(this.props.connections).id((function(e,t,n){return e.id})).distance(this.adjustLinkDistance),this.simulation=Nn.e(this.props.nodes).force("center",Nn.a(this.props.centerX,this.props.centerY)).force("collide",Nn.b(120)).force("link",this.forceLink).force("charge",Nn.d()).on("tick",this.ticked))}},{key:"componentDidUpdate",value:function(e){if(this.props.autoLayout){var t=A.Set.of.apply(A.Set,Object(W.a)(this.props.connections.map((function(e){return e.id})))),n=A.Set.of.apply(A.Set,Object(W.a)(this.props.nodes.map((function(e){return e.id}))));Object(A.is)(this.prevConnections,t)&&Object(A.is)(this.prevNodes,n)||(this.prevNodes=n,this.prevConnections=t,this.simulation&&(this.simulation.nodes(this.props.nodes),this.forceLink&&this.forceLink.links(this.props.connections),this.simulation.alpha(1),this.simulation.restart()))}else this.simulation&&this.simulation.stop()}},{key:"componentWillUnmount",value:function(){this.simulation&&this.simulation.stop()}}]),t}(o.PureComponent),Mn=n(79);!function(e){e[e.OneToOne=0]="OneToOne",e[e.FitToWindow=1]="FitToWindow",e[e.FitToWindowWidth=2]="FitToWindowWidth",e[e.UserZoom=3]="UserZoom"}(Bn||(Bn={}));var Rn,zn=24,Ln=.065,Fn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).minZoom=0,n.maxZoom=Number.POSITIVE_INFINITY,n.storedCTMResult=void 0,n.mouseX=0,n.mouseY=0,n.calculateTransform=function(){var e=n.props.maxX-n.props.minX,t=n.props.maxY-n.props.minY,r=n.state.clientWidth/(e+zn),i=n.state.clientHeight/(t+zn),a=n.state.scale,o=n.state.tx,s=n.state.ty;switch(n.props.zoomMode){case Bn.FitToWindow:a=Math.min(r,i),o=(n.state.clientWidth-a*e)/2-n.props.minX,s=(n.state.clientHeight-a*t)/2-n.props.minY;break;case Bn.FitToWindowWidth:a=r,o=(n.state.clientWidth-a*e)/2-n.props.minX,s=t*a+zn>n.state.clientHeight?zn/2-n.props.minY:(n.state.clientHeight-a*t)/2-n.props.minY;break;case Bn.OneToOne:a=1,o=e+zn>n.state.clientWidth?zn/2-n.props.minX:(n.state.clientWidth-a*e)/2-n.props.minX,s=t*a+zn>n.state.clientHeight?zn/2-n.props.minY:(n.state.clientHeight-a*t)/2-n.props.minY;break;case Bn.UserZoom:}Wn(n.state.scale,a)&&(n.setState({scale:a}),n.props.onZoom(a)),Wn(n.state.tx,o)&&n.setState({tx:o}),Wn(n.state.ty,s)&&n.setState({ty:s})},n.onMouseDown=function(e){if(1===e.button&&null!==window.event||0===e.button){var t=n.getOffsetXY(e),r=n.transformToScreen(t.x,t.y);return n.mouseX=r.x,n.mouseY=r.y,document.addEventListener("mousemove",n.onMouseMove),document.addEventListener("mouseup",n.onMouseUp),!1}},n.onMouseMove=function(e){var t=n.getOffsetXY(e),r=n.transformToScreen(t.x,t.y),i=r.x-n.mouseX,a=r.y-n.mouseY;n.mouseX=r.x,n.mouseY=r.y,n.internalMoveBy(i,a)},n.onMouseUp=function(){n.releaseDocumentMouse()},n.releaseDocumentMouse=function(){document.removeEventListener("mousemove",n.onMouseMove),document.removeEventListener("mouseup",n.onMouseUp)},n.onWheel=function(e){var t=qn(e.deltaY);if(1!==t){var r=n.getOffsetXY(e);n.publicZoomTo(r.x,r.y,t),e.preventDefault()}},n.onKeyDown=function(e){var t=0,r=0,i=0;if(38===e.keyCode?r=1:40===e.keyCode?r=-1:37===e.keyCode?t=1:39===e.keyCode?t=-1:189===e.keyCode||109===e.keyCode?i=1:187!==e.keyCode&&107!==e.keyCode||(i=-1),t||r){e.preventDefault(),e.stopPropagation();var a=n.owner().getBoundingClientRect(),o=Math.min(a.width,a.height),s=.05*o*t,c=.05*o*r;n.internalMoveBy(s,c)}if(i){var l=qn(i),u=n.owner().getBoundingClientRect();n.publicZoomTo(u.width/2,u.height/2,l)}},n.onSvgResize=function(){n.svgSize()},n.svgSize=function(){if(n.props.svgPanZoomRef&&n.props.svgPanZoomRef.current&&n.props.svgPanZoomRef.current.ownerSVGElement){var e=n.props.svgPanZoomRef.current.ownerSVGElement.getClientRects()[0],t=e.height,r=e.width;(Wn(t,n.state.clientHeight)||Wn(r,n.state.clientWidth))&&n.setState({clientHeight:t,clientWidth:r})}},n.state={clientHeight:0,clientWidth:0,scale:e.scale,tx:0,ty:0},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement("g",{onKeyDown:this.onKeyDown,ref:this.props.svgPanZoomRef,transform:"matrix(".concat(this.state.scale,", 0, 0, ").concat(this.state.scale,", ").concat(this.state.tx,", ").concat(this.state.ty,")")},this.props.children)}},{key:"componentDidMount",value:function(){if(window.addEventListener("resize",this.onSvgResize),this.svgSize(),this.props.svgPanZoomRef.current&&this.props.svgPanZoomRef.current.ownerSVGElement){var e=this.props.svgPanZoomRef.current.ownerSVGElement;e.addEventListener("mousedown",this.onMouseDown),Mn.addWheelListener(e,this.onWheel,!0)}}},{key:"componentDidUpdate",value:function(e){e.scale!==this.props.scale&&Wn(this.props.scale,this.state.scale)&&this.setState({scale:this.props.scale}),this.calculateTransform()}},{key:"componentWillUnmount",value:function(){if(window.removeEventListener("resize",this.onSvgResize),this.props.svgPanZoomRef.current&&this.props.svgPanZoomRef.current.ownerSVGElement){var e=this.props.svgPanZoomRef.current.ownerSVGElement;e.removeEventListener("mousedown",this.onMouseDown),Mn.removeWheelListener(e,this.onWheel)}}},{key:"moveTo",value:function(e,t){this.setState({tx:e,ty:t}),this.keepTransformInsideBounds()}},{key:"moveBy",value:function(e,t){this.moveTo(this.state.tx+e,this.state.ty+t)}},{key:"internalMoveBy",value:function(e,t,n){return this.moveBy(e,t)}},{key:"publicZoomTo",value:function(e,t,n){return this.zoomByRatio(e,t,n)}},{key:"zoomByRatio",value:function(e,t,n){if(isNaN(e)||isNaN(t)||isNaN(n))throw new Error("zoom requires valid numbers");var r=this.state.scale*n;if(r<this.minZoom){if(this.state.scale===this.minZoom)return;n=this.minZoom/this.state.scale}if(r>this.maxZoom){if(this.state.scale===this.maxZoom)return;n=this.maxZoom/this.state.scale}var i=this.transformToScreen(e,t);this.setState({tx:i.x-n*(i.x-this.state.tx),ty:i.y-n*(i.y-this.state.ty)}),this.keepTransformInsideBounds();var a=this.state.scale*n;Wn(this.state.scale,a)&&this.setState({scale:a}),this.props.onZoom(a)}},{key:"keepTransformInsideBounds",value:function(){var e=this.getBoundingBox(),t=!1,n=this.getClientRect(),r=e.left-n.right;return r>0&&(this.setState({tx:this.state.tx+r}),t=!0),(r=e.right-n.left)<0&&(this.setState({tx:this.state.tx+r}),t=!0),(r=e.top-n.bottom)>0&&(this.setState({ty:this.state.ty+r}),t=!0),(r=e.bottom-n.top)<0&&(this.setState({ty:this.state.ty+r}),t=!0),t}},{key:"getClientRect",value:function(){var e=this.owner().getBBox(),t=this.client(e.x,e.y);return{bottom:e.height*this.state.scale+t.y,left:t.x,right:e.width*this.state.scale+t.x,top:t.y}}},{key:"client",value:function(e,t){return{x:e*this.state.scale+this.state.tx,y:t*this.state.scale+this.state.ty}}},{key:"getBoundingBox",value:function(){var e=this.owner().getBoundingClientRect(),t=e.width,n=e.height;return{bottom:.95*n,left:.05*t,right:.95*t,top:.05*n}}},{key:"transformToScreen",value:function(e,t){var n=this.owner().getScreenCTM();if(n){var r=n.a,i=n.d,a=n.e,o=n.f;this.storedCTMResult=new L(e*r-a,t*i-o)}else this.storedCTMResult=new L(e,t);return this.storedCTMResult}},{key:"getOffsetXY",value:function(e){var t,n,r=this.owner().getBoundingClientRect();return t=e.clientX-r.left,n=e.clientY-r.top,new L(t,n)}},{key:"owner",value:function(){if(this.props.svgPanZoomRef.current&&this.props.svgPanZoomRef.current.ownerSVGElement)return this.props.svgPanZoomRef.current.ownerSVGElement;throw new Q("Shouldn't have called owner when this element isn't mounted")}}]),t}(o.PureComponent),_n=.001;function Wn(e,t){return Math.abs(e-t)>_n}function qn(e){var t=1;return e>0?t=1-Ln:e<0&&(t=1+Ln),t}!function(e){e[e.OneToOne=0]="OneToOne",e[e.FitToWindow=1]="FitToWindow",e[e.FitToWindowWidth=2]="FitToWindowWidth",e[e.UserZoom=3]="UserZoom"}(Rn||(Rn={}));var Xn=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).svgTopGroup=void 0,n.onFitToWindow=function(){n.setState({zoomMode:Rn.FitToWindow})},n.onFitToWidth=function(){n.setState({zoomMode:Rn.FitToWindowWidth})},n.onOneHundredPercent=function(){n.setState({zoomMode:Rn.OneToOne})},n.onZoomIn=function(){var e;n.setState({scale:(e=n.state.scale,e*(1+Ln)),zoomMode:Rn.UserZoom})},n.onZoomOut=function(){var e;n.setState({scale:(e=n.state.scale,e*(1-Ln)),zoomMode:Rn.UserZoom})},n.onForceLayoutTick=function(){n.onFitToWindow()},n.onZoom=function(e){n.state.scale===e&&n.state.zoomMode===Rn.UserZoom||n.setState({scale:e,zoomMode:Rn.UserZoom})};var r=t.diagramExtents(n.props.selectedDiagram);return n.state={maxX:r.maxX,maxY:r.maxY,minX:r.minX,minY:r.minY,scale:1,zoomMode:Rn.FitToWindow},n.svgTopGroup=o.createRef(),n}return Object(d.a)(t,e),Object(h.a)(t,null,[{key:"diagramExtents",value:function(e){return e?e.calculateMaxExtents():{maxX:0,maxY:0,minX:0,minY:0}}}]),Object(h.a)(t,[{key:"render",value:function(){var e=this;return this.props.selectedDiagram?o.createElement(o.Fragment,null,o.createElement("div",{className:"archimate-zoombar",style:{position:"absolute",top:0,right:0}},o.createElement(f.a,{onClick:this.onOneHundredPercent},o.createElement("small",null,"1:1")),o.createElement(f.a,{onClick:this.onFitToWindow},o.createElement("a",{class:"icon-resize-full"})),o.createElement(f.a,{onClick:this.onFitToWidth},o.createElement("a",{class:"icon-resize-horizontal"})),o.createElement(f.a,{onClick:this.onZoomIn},o.createElement("a",{class:"icon-zoom-in"})),o.createElement(f.a,{onClick:this.onZoomOut},o.createElement("a",{class:"icon-zoom-out"})),o.createElement("small",null,"  ",(100*this.state.scale).toFixed(0),"%")),o.createElement(De,{key:this.props.selectedDiagram.id,diagramName:this.props.selectedDiagram?this.props.selectedDiagram.name:"",viewBox:this.viewBox()},o.createElement(In,{centerX:(this.state.maxX-this.state.minX)/2,centerY:(this.state.maxY-this.state.minY)/2,connections:this.props.connections,autoLayout:this.isAutoLayout(),nodes:this.props.nodes,onForceLayoutTick:this.onForceLayoutTick},o.createElement(Fn,{maxX:this.state.maxX,maxY:this.state.maxY,minX:this.state.minX,minY:this.state.minY,onZoom:this.onZoom,svgPanZoomRef:this.svgTopGroup,scale:this.state.scale,zoomMode:this.state.zoomMode},this.props.nodes.map((function(t){return o.createElement(function(e){var t=function(e){var t=e.entityInstance();return t?t.type:e.type}(e);switch(t){case"AndJunction":case"Junction":return Lt;case"OrJunction":return Jt;case"ApplicationCollaboration":case"BusinessCollaboration":case"TechnologyCollaboration":return Ke;case"ApplicationComponent":return _e;case"ApplicationEvent":case"BusinessEvent":case"TechnologyEvent":return jt;case"ApplicationFunction":case"BusinessFunction":case"TechnologyFunction":return wt;case"ApplicationInteraction":case"BusinessInteraction":case"TechnologyInteraction":return Tt;case"ApplicationInterface":case"BusinessInterface":case"TechnologyInterface":return Rt;case"ApplicationProcess":case"BusinessProcess":case"TechnologyProcess":return ln;case"ApplicationService":case"BusinessService":case"TechnologyService":return On;case"BusinessActor":return Qe;case"Artifact":return qe;case"Assessment":return Ve;case"Driver":return bt;case"Constraint":return et;case"Goal":return St;case"Outcome":return $t;case"Principle":return on;case"Requirement":return yn;case"Stakeholder":return kn;case"BusinessObject":case"DataObject":return nt;case"BusinessRole":return Ze;case"Contract":return it;case"Deliverable":return ot;case"Gap":return Pt;case"DiagramModelReference":case"ArchimateDiagramModel":case"DiagramModel":return mt;case"Device":return ht;case"Plateau":return rn;case"Node":return Ht;case"DistributionNetwork":return yt;case"Group":return At;case"Grouping":return Bt;case"Location":return _t;case"Meaning":return qt;case"CommunicationNetwork":case"Network":return Yt;case"Path":return tn;case"Resource":return bn;case"SystemSoftware":return Cn;case"DiagramObject":case"Note":return Ut;case"Product":return hn;case"Representation":return mn;case"SketchModelSticky":return En;case"Value":return xn;case"WorkPackage":return Dn;default:throw new Q("Unexpected view node type ".concat(t))}}(t),{key:t.id,onClicked:e.props.entityClicked,selected:e.nodeIsSelected(t),viewNode:t,x:t.x||t.bounds.left,y:t.y||t.bounds.top})})),this.props.connections.map((function(t){return o.createElement(Ae,{autoLayout:e.isAutoLayout(),key:t.id,connection:t,onClicked:e.props.entityClicked,selected:e.nodeIsSelected(t),fromX:t.sourceBounds().left,fromY:t.sourceBounds().top,toX:t.targetBounds().left,toY:t.targetBounds().top})})))))):o.createElement("div",{className:"jumbotron",style:{paddingLeft:"2em",paddingRight:"2em"}},o.createElement("h1",null,"ArchiMate Viewer"),o.createElement("p",null,o.createElement(xe.a,{glyph:"arrow-left"}),"\xa0 Select a diagram to view and explore."))}},{key:"componentDidUpdate",value:function(){var e=t.diagramExtents(this.props.selectedDiagram);(Wn(this.state.maxX,e.maxX)||Wn(this.state.maxY,e.maxY)||Wn(this.state.minX,e.minX)||Wn(this.state.minY,e.minY))&&this.setState({maxX:e.maxX,maxY:e.maxY,minX:e.minX,minY:e.minY})}},{key:"isAutoLayout",value:function(){return this.props.selectedDiagram&&this.props.selectedDiagram.type===i.ModelQuery||!1}},{key:"nodeIsSelected",value:function(e){if(void 0===this.props.selectedEntity)return!1;var t=e.entityInstance();return void 0!==t&&this.props.selectedEntity.id===t.id}},{key:"viewBox",value:function(){return new DOMRect(this.state.minX,this.state.minY,this.state.maxY-this.state.minY,this.state.maxX-this.state.minX)}}]),t}(o.PureComponent),Yn=n(287),Gn=n(288),Vn=(n(95),n(56)),Hn=n.n(Vn),Qn=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleCollapseExpand=function(){n.setState({collapse:!n.state.collapse})},n.state={collapse:void 0!==n.props.initiallyCollapsed&&n.props.initiallyCollapsed},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state.collapse?"panel-body collapse":"panel-body collapse in";return o.createElement("div",{className:"panel panel-default"},this.header(),o.createElement("div",{id:"archimate-view-props",className:e},this.props.children))}},{key:"componentDidUpdate",value:function(e){this.props.initiallyCollapsed!==e.initiallyCollapsed&&this.setState({collapse:!!this.props.initiallyCollapsed})}},{key:"header",value:function(){if(this.props.header){var e=this.state.collapse?"icon-chevron-down":"icon-chevron-up";return o.createElement("div",{className:"panel-heading"},o.createElement("h3",{className:"panel-title"},this.props.header,o.createElement("button",{className:"btn btn-primary btn-xs pull-right",type:"button","aria-expanded":!this.state.collapse,onClick:this.handleCollapseExpand},o.createElement("span",{className:e,"aria-hidden":"true"}))))}return null}}]),t}(o.PureComponent),Un=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.str&&this.props.str.trim().length>0,t=this.props.header||"Documentation",n=e?t:o.createElement(o.Fragment,null,t," ",o.createElement("span",{className:"small"},"(none)"));return o.createElement(Qn,{header:n,initiallyCollapsed:!e},o.createElement(Hn.a,{className:"markdown-body",source:this.props.str||"No Documentation"}))}}]),t}(o.PureComponent),Zn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).entityClicked=function(){return n.props.entityClicked(n.props.entity)},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.text?this.props.text:this.props.entity.name;return this.props.entity?o.createElement("a",{href:this.props.entity.href,onClick:this.entityClicked},this.props.children,o.createElement("span",{className:this.props.textClass},e)):void 0}}]),t}(o.PureComponent),Jn=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=[o.createElement("tr",{key:"no-elements"},o.createElement("td",{colSpan:4},o.createElement("p",{className:"text-info"},"No elements")))];this.props.elements.length>0&&(t=this.props.elements.sort(Kn).map((function(t){return o.createElement("tr",{key:t.id},o.createElement("td",null,o.createElement(Zn,{entity:t,entityClicked:e.props.elementClicked})),o.createElement("td",null,t.type))})));var n=0===this.props.elements.length,r=n?o.createElement(o.Fragment,null,"Elements ",o.createElement("span",{className:"small"},"(none)")):"Elements";return o.createElement(Qn,{header:r,initiallyCollapsed:n},o.createElement("table",{className:"table archimate-elements-table"},o.createElement("thead",null,o.createElement("tr",{key:"elements-header"},o.createElement("th",null,"Element"),o.createElement("th",null,"Type"))),o.createElement("tbody",null,t)))}}]),t}(o.PureComponent);function Kn(e,t){return e===t?0:e.type!==t.type?e.type.localeCompare(t.type):e.name.localeCompare(t.name)}var $n=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.entity,t=e?e.name:o.createElement("span",{className:"text-muted"},"Nothing Selected");return o.createElement(Qn,null,o.createElement("table",{className:"table"},o.createElement("tbody",null,o.createElement("tr",{key:"entity-name"},o.createElement("th",null,"Name"),o.createElement("td",null,t)),this.entityContent())))}},{key:"entityContent",value:function(){var e=this.props.entity;return e instanceof ne?this.diagramContent():e instanceof te?this.relationshipContent():e instanceof $?this.elementContent():[]}},{key:"diagramContent",value:function(){var e=this.props.entity;return o.createElement("tr",{key:"entity-type"},o.createElement("th",null,"Diagram Viewpoint"),o.createElement("td",null,e.viewpointDescription()))}},{key:"relationshipRefLink",value:function(e){if(void 0===e)return"";var t=e;return o.createElement(Zn,{entity:t,entityClicked:this.props.entityClicked,text:"".concat(t.name," (").concat(t.type,")")})}},{key:"relationshipContent",value:function(){var e=this.props.entity;return o.createElement(o.Fragment,null,o.createElement("tr",{key:"relationship-type"},o.createElement("th",null,"Relationship"),o.createElement("td",null,e.type)),o.createElement("tr",{key:"relationship-source"},o.createElement("th",null,"Source"),o.createElement("td",null,this.relationshipRefLink(e.sourceElement()))),o.createElement("tr",{key:"relationship-target"},o.createElement("th",null,"Target"),o.createElement("td",null,this.relationshipRefLink(e.targetElement()))))}},{key:"elementContent",value:function(){var e=this.props.entity;return o.createElement("tr",{key:"entity-type"},o.createElement("th",null,"Element"),o.createElement("td",null,e.type))}}]),t}(o.PureComponent),er=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.views?this.props.views:[],n=null;n=0===t.length?[o.createElement("tr",{key:"views-table-no-views"},o.createElement("td",{colSpan:2},"No Views"))]:t.sort(tr).map((function(t){return o.createElement("tr",{key:t.path},o.createElement("td",null,o.createElement(Zn,{entity:t,entityClicked:e.props.entityClicked})),o.createElement("td",null,t.viewpoint))}));var r=0===this.props.views.length,i=r?o.createElement(o.Fragment,null,"Views ",o.createElement("span",{className:"small"},"(none)")):"Views";return o.createElement(Qn,{header:i,initiallyCollapsed:r},o.createElement("table",{className:"table archimate-views-table"},o.createElement("thead",null,o.createElement("tr",{key:"views-table-header"},o.createElement("th",null,"View"),o.createElement("th",null,"Viewpoint"))),o.createElement("tbody",null,n)))}}]),t}(o.PureComponent);function tr(e,t){return e===t?0:nr(e.name,t.name)}function nr(e,t){return e===t?0:void 0===e?void 0===t?0:-1:void 0===t?1:e.localeCompare(t)}var rr=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.properties?this.props.properties:[],n=null;n=0===t.length?[o.createElement("tr",{key:"no-properties"},o.createElement("td",{colSpan:2},"No Properties"))]:t.sort(ir).map((function(t){return o.createElement("tr",{key:t.key},o.createElement("td",null,t.key),o.createElement("td",null,e.value(t.value)))}));var r=0===this.props.properties.length,i=r?o.createElement(o.Fragment,null,"Properties ",o.createElement("span",{className:"small"},"(none)")):"Properties";return o.createElement(Qn,{header:i,initiallyCollapsed:r},o.createElement("table",{className:"table"},o.createElement("thead",null,o.createElement("tr",{key:"properties-header"},o.createElement("th",null,"Property"),o.createElement("th",null,"Value"))),o.createElement("tbody",{id:"element-properties"},n)))}},{key:"value",value:function(e){return e?o.createElement(Hn.a,{className:"markdown-body",source:e}):o.createElement("i",null,"undefined")}}]),t}(o.PureComponent);function ir(e,t){return e===t?0:e.key!==t.key?e.key.localeCompare(t.key):nr(e.value,t.value)}var ar=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.relationships?this.props.relationships:[],n=null;n=0===t.length?[o.createElement("tr",{key:"no-relationships"},o.createElement("td",{colSpan:3},"No Relationships"))]:t.filter((function(e){return void 0!==e})).filter((function(e){return e instanceof te})).sort(or).map((function(t){return o.createElement("tr",{key:t.id},o.createElement("td",null,o.createElement(Zn,{entity:t,entityClicked:e.props.entityClicked,text:e.relationshipName(t)})),o.createElement("td",null,e.relationshipRefLink(t.sourceElement())),o.createElement("td",null,e.relationshipRefLink(t.targetElement())))}));var r=0===this.props.relationships.length,i=r?o.createElement(o.Fragment,null,"Relationships ",o.createElement("span",{className:"small"},"(none)")):"Relationships";return o.createElement(Qn,{header:i,initiallyCollapsed:r},o.createElement("table",{className:"table"},o.createElement("thead",null,o.createElement("tr",{key:"relationships-header"},o.createElement("th",null,"Relationship Type"),o.createElement("th",null,"Source"),o.createElement("th",null,"Target"))),o.createElement("tbody",{id:"element-relationships"},n)))}},{key:"relationshipRefLink",value:function(e){if(void 0===e)return"";var t=e;return o.createElement(Zn,{entity:t,entityClicked:this.props.entityClicked,text:"".concat(t.name," (").concat(t.type,")")})}},{key:"relationshipName",value:function(e){return e.name&&e.name.length>0?"".concat(e.name," (").concat(e.type,")"):e.type}}]),t}(o.PureComponent);function or(e,t){return e===t?0:e.type.localeCompare(t.type)}var sr=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement(o.Fragment,null,o.createElement($n,{entity:this.props.entity,entityClicked:this.props.entityClicked}),o.createElement(Un,{str:this.props.entity?this.props.entity.documentation:void 0}),this.properties(),this.elements(),this.relationships(),this.views())}},{key:"elements",value:function(){if(this.props.entity instanceof ne){var e=this.props.entity;return o.createElement(Jn,{elements:e.elements(),elementClicked:this.props.entityClicked})}}},{key:"relationships",value:function(){return this.props.entity instanceof ne||this.props.entity instanceof $?o.createElement(ar,{relationships:this.props.entity.relationships(),entityClicked:this.props.entityClicked}):void 0}},{key:"views",value:function(){if(this.props.entity instanceof ne||this.props.entity instanceof $||this.props.entity instanceof te){var e=this.props.entity;return o.createElement(er,{views:e.diagrams(),entityClicked:this.props.entityClicked})}}},{key:"properties",value:function(){if(void 0!==this.props.entity)return o.createElement(rr,{properties:this.props.entity.properties||[]})}}]),t}(o.PureComponent),cr=n(272),lr=n(273),ur=n(274),hr=n(275),pr=n(285),mr=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement(cr.a,{horizontal:!0},o.createElement(lr.a,null,o.createElement(ur.a,{componentClass:hr.a,sm:2},o.createElement("small",{className:"text-muted"},"Model")),o.createElement(ur.a,{sm:10},o.createElement(pr.a.Static,null,o.createElement("strong",null,this.props.modelName)))),this.diagramRow())}},{key:"diagramRow",value:function(){return this.props.diagramName?o.createElement(lr.a,null,o.createElement(ur.a,{componentClass:hr.a,sm:2},o.createElement("small",{className:"text-muted"},"Diagram")),o.createElement(ur.a,{sm:10},o.createElement(pr.a.Static,null,o.createElement("strong",null,this.props.diagramName)," ",o.createElement("small",null,"<",this.props.diagramViewpoint,"\xa0Viewpoint>")))):null}}]),t}(o.Component),dr=n(283),yr=n(286),fr=n(276),br=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).onQuerySelected=function(e){var t=e.target.value,r=n.props.queries.find((function(e){return!!e&&e.id===t}));n.props.onQuerySelected(r)},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement(dr.a,{defaultExpanded:!1},o.createElement(dr.a.Heading,null,o.createElement(dr.a.Title,{componentClass:"h3",toggle:!0},"Queries")),o.createElement(dr.a.Collapse,null,o.createElement(dr.a.Body,null,o.createElement(cr.a,null,o.createElement(lr.a,{controlId:"queryDiagramSelector"},o.createElement(yr.a,null,o.createElement(pr.a,{componentClass:"select",placeholder:"Select Query",defaultValue:this.props.selectedQuery.name,onChange:this.onQuerySelected},this.props.queries.map((function(e){return e?o.createElement("option",{key:e.id,value:e.id},e.name):void 0}))),o.createElement(pr.a.Feedback,null),o.createElement(yr.a.Button,{onClick:this.props.onNewQuery},o.createElement(f.a,null,"New"))),o.createElement(fr.a,null,"Select an existing query, or create a new one."))))))}}]),t}(o.PureComponent),vr=n(46),gr=n.n(vr),Or=n(278),jr=n(279),kr=n(280),wr=n(81),Er=n(277),Pr=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).onToggle=function(e,t){var r=n.props.query.elementTypes.includes(e)?n.props.query.elementTypes.delete(e):n.props.query.elementTypes.add(e);n.props.onQueryChanged(n.props.query.updateQuery({elementTypes:r,viewpointType:N(r)}))},n.onFilterCollapse=function(){n.setState({filterCollapsed:!n.state.filterCollapsed})},n.state={filterCollapsed:!0},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement(lr.a,null,o.createElement(hr.a,null,"Element Type Filter","  ",o.createElement(xe.a,{glyph:this.state.filterCollapsed?"collapse-up":"collapse-down",onClick:this.onFilterCollapse})),this.state.filterCollapsed?null:o.createElement("table",{style:{fontSize:"75%"}},o.createElement("thead",null,o.createElement("tr",null,o.createElement("td",null),o.createElement("th",null,"Passive Structure"),o.createElement("th",null,"Behavior"),o.createElement("th",null,"Active Structure"),o.createElement("th",null,"Motivation"))),o.createElement("tbody",null,o.createElement("tr",{style:{background:"#fffead"}},o.createElement("th",null,"Strategy"),o.createElement("td",null,this.checkboxes(v.Resource)),o.createElement("td",null,this.checkboxes(v.Capability,v.CourseOfAction)),o.createElement("td",null),o.createElement("td",{rowSpan:6,style:{background:"#f2f2fe"}},this.checkboxes(v.Stakeholder,v.Driver,v.Assessment,v.Goal,v.Outcome,v.Principle,v.Requirement,v.Constraint,v.Meaning,v.Value))),o.createElement("tr",{style:{background:"#fffed0"}},o.createElement("th",null,"Business"),o.createElement("td",null,this.checkboxes(v.BusinessActor,v.BusinessRole,v.BusinessCollaboration,v.BusinessInterface)),o.createElement("td",null,this.checkboxes(v.BusinessProcess,v.BusinessFunction,v.BusinessInteraction,v.BusinessEvent,v.BusinessService)),o.createElement("td",null,this.checkboxes(v.BusinessObject,v.Contract,v.Representation))),o.createElement("tr",{style:{background:"#c5f1fe"}},o.createElement("th",null,"Application"),o.createElement("td",null,this.checkboxes(v.ApplicationComponent,v.ApplicationCollaboration,v.ApplicationInterface)),o.createElement("td",null,this.checkboxes(v.ApplicationFunction,v.ApplicationInteraction,v.ApplicationProcess,v.ApplicationEvent,v.ApplicationService)),o.createElement("td",null,this.checkboxes(v.DataObject))),o.createElement("tr",{style:{background:"#ccfecc"}},o.createElement("th",null,"Technology"),o.createElement("td",null,this.checkboxes(v.Node,v.Device,v.SystemSoftware,v.TechnologyCollaboration,v.TechnologyInterface,v.Path,v.CommunicationNetwork)),o.createElement("td",null,this.checkboxes(v.TechnologyFunction,v.TechnologyProcess,v.TechnologyInteraction,v.TechnologyEvent,v.TechnologyService)),o.createElement("td",null,this.checkboxes(v.TechnologyObject,v.Artifact))),o.createElement("tr",{style:{background:"#9cfd9d"}},o.createElement("th",null,"Physical"),o.createElement("td",null,this.checkboxes(v.Equipment,v.Facility,v.DistributionNetwork)),o.createElement("td",null),o.createElement("td",null,this.checkboxes(v.Material))),o.createElement("tr",{style:{background:"#fee1e1"}},o.createElement("th",null,"Implementation",o.createElement("br",null),"&",o.createElement("br",null),"Migration"),o.createElement("td",{colSpan:3},this.checkboxes(v.WorkPackage,v.Deliverable,v.ImplementationEvent,v.Plateau,v.Gap))))))}},{key:"checkboxes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map((function(t){return o.createElement(Er.a,{key:t,checked:e.props.query.elementTypes.includes(t),onChange:e.onToggle.bind(e,t)},t)}))}}]),t}(o.PureComponent),Cr=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).onChange=function(e){n.props.onChange(n.props.layer,!n.props.checked)},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement(Er.a,{checked:this.props.checked,onClick:this.onChange},this.props.layer)}}]),t}(o.PureComponent),Sr=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).fuseOptions={distance:100,keys:["name","type"],location:0,maxPatternLength:32,shouldSort:!0,threshold:.6},n.onQueryNameChanged=function(e){n.props.onQueryChanged(n.props.query.updateQuery({name:e.target.value}))},n.onViewpointChanged=function(e){var t=e.target.value;n.props.onQueryChanged(n.props.query.updateQuery({elementTypes:Object(A.Set)(T(t,n.props.query.elementTypes)),viewpointType:t}))},n.onPathDepthChanged=function(e){n.props.onQueryChanged(n.props.query.updateQuery({pathDepth:Number.parseInt(e.target.value,10)}))},n.onLayerFilterChanged=function(e,t){var r;r=t?n.props.query.layerFilter.add(e):n.props.query.layerFilter.remove(e),n.props.onQueryChanged(n.props.query.updateQuery({layerFilter:r}))},n.onAddClick=function(e,t){n.props.onQueryChanged(n.props.query.updateQuery({elements:n.props.query.elements.add(e)}))},n.onRemoveClick=function(e,t){n.props.onQueryChanged(n.props.query.updateQuery({elements:n.props.query.elements.remove(e)}))},n.onSearchChanged=function(e){n.setState({search:e.target.value}),n.calculateResults()},n.allElements=function(){return Object(A.List)(n.props.query.model.elements)},n.onLayerFilterCollapse=function(){n.setState({layerFilterCollapsed:!n.state.layerFilterCollapsed})},n.state={elementTypeFilter:"All",elementTypeFilterCollapsed:!0,layerFilterCollapsed:!0,results:Object(A.List)(),search:""},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return o.createElement(dr.a,{defaultExpanded:!0},o.createElement(dr.a.Heading,null,o.createElement(dr.a.Title,{componentClass:"h3",toggle:!0},"Query Wizard")),o.createElement(dr.a.Collapse,null,o.createElement(dr.a.Body,null,o.createElement(cr.a,null,o.createElement(lr.a,{controlId:"queryName"},o.createElement(hr.a,null,"Name"),o.createElement(pr.a,{type:"text",value:this.props.query.name,placeholder:"Query Name",onChange:this.onQueryNameChanged})),o.createElement(lr.a,{controlId:"viewpointType"},o.createElement(hr.a,null,"Viewpoint"),o.createElement(pr.a,{componentClass:"select",onChange:this.onViewpointChanged,value:this.props.query.viewpointType},D.map((function(e){return e})).sort().map((function(e){return o.createElement("option",{key:e,value:e},e)})))),o.createElement(lr.a,{controlId:"layerFilter"},o.createElement(hr.a,null,"Layer Filter","  ",o.createElement(xe.a,{glyph:this.state.layerFilterCollapsed?"collapse-up":"collapse-down",onClick:this.onLayerFilterCollapse})),this.state.layerFilterCollapsed?null:o.createElement(Or.a,{bsSize:"small"},o.createElement("div",{style:{columns:2}},O.map((function(t){return o.createElement(Cr,{layer:t,checked:e.layerChecked(t),onChange:e.onLayerFilterChanged})}))))),o.createElement(Pr,{query:this.props.query,onQueryChanged:this.props.onQueryChanged}),o.createElement(lr.a,null,o.createElement(hr.a,null,"Max Path Depth"),o.createElement(pr.a,{type:"number",min:"0",max:"100",step:"1",value:this.props.query.pathDepth,onChange:this.onPathDepthChanged}),o.createElement(fr.a,null,"Maximum number of connections to include")),o.createElement(lr.a,{controlId:"search"},o.createElement(hr.a,null,"Search"),o.createElement("input",{type:"text",value:this.state.search,className:"form-control",id:"search",placeholder:"search",onChange:this.onSearchChanged})),o.createElement(lr.a,{controlId:"results"},o.createElement(hr.a,null,"Results ",o.createElement(jr.a,null,this.state.results.size)),o.createElement(kr.a,null,this.state.results.slice(0,Math.min(20,this.state.results.size)).map((function(t){return t?o.createElement(wr.a,{key:t.id},o.createElement("div",{className:"pull-right"},e.addRemoveElement(t)),o.createElement("span",{className:"text-info"},t.type),": ",o.createElement("span",{className:"text-primary"},t.name)||o.createElement("span",{className:"text-muted"},"unnamed")):void 0}))))))))}},{key:"layerChecked",value:function(e){return this.props.query.layerFilter.includes(e)}},{key:"addRemoveElement",value:function(e){var t=this.props.query.elements.some((function(t){return!!t&&t.id===e.id})),n=t?"remove":"plus",r=t?this.onRemoveClick.bind(this,e):this.onAddClick.bind(this,e),i=t?"danger":"primary";return o.createElement(f.a,{bsSize:"xsmall",bsStyle:i,onClick:r},o.createElement(xe.a,{glyph:n}))}},{key:"calculateResults",value:function(){if(void 0===this.state.fuse){var e=this.props.query.elementTypes,t=Object(A.Set)(this.allElements().filter((function(t){return!!t&&e.some((function(e){return e===t.type}))})));this.setState({fuseElementTypes:e,fuseFilteredElements:t});var n=new gr.a(t.toJS(),this.fuseOptions);this.setState({fuse:n})}var r=this.state.search.length>0?Object(A.List)(this.state.fuse.search(this.state.search)):Object(A.List)();this.setState({results:r})}}]),t}(o.PureComponent),xr=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).onQuerySelected=function(e){var t=e.target.value;n.setState({selectedQuery:t})},n.onNewQuery=function(){var e=new ue(n.props.model);n.setState({queries:n.state.queries.push(e),selectedQuery:e})},n.onQueryChanged=function(e){var t=e.run();n.setState({selectedQuery:e}),n.props.onDiagramUpdated(t)};var r=new ue(n.props.model);return n.state={autoLayout:!0,queries:Object(A.List)([r]),selectedQuery:r},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e,t){if(e.model!==this.props.model){var n=new ue(this.props.model);this.setState({queries:Object(A.List)([n]),selectedQuery:n})}}},{key:"render",value:function(){return o.createElement(o.Fragment,null,o.createElement(br,{onNewQuery:this.onNewQuery,onQuerySelected:this.onQuerySelected,queries:this.state.queries,selectedQuery:this.state.selectedQuery}),o.createElement(Sr,{model:this.props.model,selectedDiagram:this.props.selectedDiagram,query:this.state.selectedQuery,onQueryChanged:this.onQueryChanged}))}}]),t}(o.PureComponent),Ar=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement("li",null,o.createElement(Zn,{entity:this.props.entity,entityClicked:this.props.resultClicked,text:"".concat(this.props.entity.name," (").concat(this.entityType(),")")}))}},{key:"entityType",value:function(){var e=this.props.entity,t=e.type;return e instanceof $?t=e.type||t:e instanceof te?t=e.type||t:e instanceof ne&&(t=e.viewpoint||"Total"),t}}]),t}(o.PureComponent),Dr=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).fuseOptions={distance:100,keys:["name","type","documentation","properties"],location:0,maxPatternLength:32,shouldSort:!0,threshold:.6},n.handleClick=function(e){e.preventDefault(),n.state.search.length>0&&n.setState({results:n.state.fuse.search(n.state.search)})},n.handleChange=function(e){n.setState({search:e.currentTarget.value}),n.state.search.length>0&&n.setState({results:n.state.fuse.search(n.state.search)})},n.state={fuse:new gr.a(n.props.model.entities(),n.fuseOptions),results:[],search:n.props.searchText||""},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.model!==e.model&&this.setState({fuse:new gr.a(e.model.entities(),this.fuseOptions)})}},{key:"render",value:function(){var e=this,t=this.state.results.length>100?100:this.state.results.length,n={},r="Search";null===this.state.fuse&&(n.disabled="disabled",r="Loading");var i=this.state.results.slice(0,t).map((function(t){return s.a.createElement(Ar,{key:t.id,entity:t,resultClicked:e.props.resultClicked})}));return s.a.createElement(dr.a,null,s.a.createElement(dr.a.Body,null,s.a.createElement(cr.a,null,s.a.createElement(lr.a,null,s.a.createElement(yr.a,null,s.a.createElement(pr.a,{type:"text",placeholder:"Search",defaultValue:this.state.search,onChange:this.handleChange}),s.a.createElement(yr.a.Button,null,s.a.createElement(f.a,Object.assign({onClick:this.handleClick},n),r)))),s.a.createElement("ol",null,i))))}}]),t}(s.a.PureComponent),Br=n(282),Nr=n(113),Tr=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement("li",{key:this.props.entity.id,className:this.selectedItemClass(this.props.entity)},o.createElement(Zn,{entity:this.props.entity,entityClicked:this.props.entityClicked,textClass:this.selectedItemClass(this.props.entity)},o.createElement("i",{className:"icon-img",style:this.selectedItemIconStyle(this.props.entity)}),"\xa0"))}},{key:"selectedItemIconStyle",value:function(e){return this.props.selectedEntity&&this.props.selectedEntity.id===e.id?{color:"white"}:{}}},{key:"selectedItemClass",value:function(e){return this.props.selectedEntity&&this.props.selectedEntity.id===e.id?"bg-primary":""}}]),t}(o.PureComponent),Ir=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){e.preventDefault(),n.setState({collapse:!n.state.collapse})},n.state={collapse:!0},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e="".concat(this.props.organizationId),t="#".concat(e);return o.createElement("li",{key:this.props.organizationId,id:this.props.organizationId},o.createElement("a",{className:"archimate-folder text-muted",role:"button","data-toggle":"collapse",href:t,onClick:this.handleClick},o.createElement("span",{className:this.state.collapse?"glyphicon glyphicon-folder-close":"glyphicon glyphicon-folder-open"}),"\xa0",this.props.organizationName),o.createElement("ul",{id:e,className:this.state.collapse?"archimate-organization-list collapse":"archimate-organization-list"},o.createElement(Mr,{organizations:this.props.organizations,items:this.props.items,entityClicked:this.props.entityClicked,selectedEntity:this.props.selectedEntity})))}}]),t}(o.PureComponent),Mr=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).sortedOrganizations=Object(Nr.a)((function(e){return e.sort(Rr)})),n.state={itemEntities:[]},n}return Object(d.a)(t,e),Object(h.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.items.map((function(e){return e.id}));return t&&Object(Br.a)(n,t.itemEntities)?null:{itemEntities:n}}}]),Object(h.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.organizations!==e.organizations||this.props.items!==e.items||this.props.selectedEntity!==e.selectedEntity||(this.state.itemEntities.length!==t.itemEntities.length||!Object(Br.a)(this.state.itemEntities,t.itemEntities))}},{key:"render",value:function(){var e=this;return o.createElement("ul",{className:"archimate-organization-list"},this.sortedOrganizations(this.props.organizations).map((function(t){return o.createElement(Ir,{key:t.id,organizationName:t.name,organizationId:t.id,organizations:t.organizations,items:t.itemEntities(),entityClicked:e.props.entityClicked,selectedEntity:e.props.selectedEntity})})),this.props.items.sort(Rr).map((function(t){return o.createElement(Tr,{key:t.id,entity:t,entityClicked:e.props.entityClicked,selectedEntity:e.props.selectedEntity})})))}}]),t}(o.Component);function Rr(e,t){if(void 0===e.name&&void 0===t.name)return 0;if(void 0===e.name)return-1;if(void 0===t.name)return 1;var n=e.name,r=t.name;return n<r?-1:n>r?1:0}var zr,Lr,Fr=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement(dr.a,null,o.createElement(dr.a.Body,null,this.props.organizations?o.createElement(Mr,{organizations:this.props.organizations,items:this.props.items,entityClicked:this.props.entityClicked,selectedEntity:this.props.selectedEntity}):void 0))}}]),t}(o.PureComponent);!function(e){e[e.DiagramTreeTab=1]="DiagramTreeTab",e[e.InfoTab=2]="InfoTab",e[e.SearchTab=3]="SearchTab",e[e.GraphTab=4]="GraphTab"}(zr||(zr={})),function(e){e[e.Normal=360]="Normal",e[e.Collapsed=4]="Collapsed",e[e.Wide=520]="Wide"}(Lr||(Lr={}));var _r=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={sidebarCollapsed:!1,sidebarWidth:Lr.Normal},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement("div",{className:"archimate-view-nav",style:{flexBasis:"".concat(this.state.sidebarWidth,"px")}},o.createElement("div",{className:"nav-control"},o.createElement("i",null,o.createElement(f.a,{className:"btn-default btn-sm",onClick:this.onSizeButtonClick.bind(this,Lr.Collapsed),bsStyle:this.widthStyle(Lr.Collapsed)},o.createElement("a",{class:"icon-to-left"})),o.createElement(f.a,{className:"btn-default btn-sm",onClick:this.onSizeButtonClick.bind(this,Lr.Normal),bsStyle:this.widthStyle(Lr.Normal)},o.createElement("a",{class:"icon-menu"})),o.createElement(f.a,{className:"btn-default btn-sm",onClick:this.onSizeButtonClick.bind(this,Lr.Wide),bsStyle:this.widthStyle(Lr.Wide)},o.createElement("a",{class:"icon-to-right"}))),o.createElement("a",{href:"https://gigamaster.github.io/codemo/",className:"codemo",title:"Codemo"},o.createElement("span",{className:"icon-logo"})," Codemo")),o.createElement("div",{className:"nav-model"},o.createElement(mr,{modelName:this.props.model.name,diagramName:this.props.selectedDiagram?this.props.selectedDiagram.name:void 0,diagramViewpoint:this.props.selectedDiagram?this.props.selectedDiagram.viewpointDescription():void 0}),o.createElement(Yn.a,{id:"archimate-sidebar-tabs",animation:!1,defaultActiveKey:zr.DiagramTreeTab,activeKey:this.props.sidebarTabKey,onSelect:this.props.onTabSelected},o.createElement(Gn.a,{eventKey:zr.DiagramTreeTab,title:"Views"},o.createElement(Fr,{organizations:this.props.model.viewOrganization().organizations,items:this.props.model.viewOrganization().itemEntities(),selectedEntity:this.props.selectedDiagram,entityClicked:this.props.diagramLinkClicked})),o.createElement(Gn.a,{eventKey:zr.InfoTab,title:"Info"},o.createElement(sr,{entity:this.props.selectedEntity,entityClicked:this.props.entityClicked})),o.createElement(Gn.a,{eventKey:zr.SearchTab,title:"Search"},o.createElement(Dr,{model:this.props.model,resultClicked:this.props.entityClicked})),o.createElement(Gn.a,{eventKey:zr.GraphTab,title:"Query"},o.createElement(xr,{model:this.props.model,selectedDiagram:this.props.selectedDiagram,onDiagramUpdated:this.props.onDiagramUpdated})))))}},{key:"widthStyle",value:function(e){return this.state.sidebarWidth===e?"primary":null}},{key:"onSizeButtonClick",value:function(e){this.state.sidebarWidth!==e&&this.setState({sidebarWidth:e})}}]),t}(o.Component),Wr=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).onCloseException=function(){n.setState({error:void 0})},n.onWorkingViewHide=function(){n.setState({working:void 0})},n.onDiagramLinkClick=function(e,t){if(!e)throw n.setState({selectedDiagram:void 0}),new Q("diagram wasn't passed");var r=e;n.setState({selectedDiagram:r,selectedEntity:r}),r&&r.id&&r.id.length>0&&(window.location.hash="#".concat(r.id))},n.onEntityClick=function(e,t){e?(n.setState({selectedEntity:e,sidebarTabKey:zr.InfoTab}),e instanceof ne&&n.onDiagramLinkClick(e)):n.setState({selectedEntity:void 0})},n.onSidebarTabSelected=function(e){n.setState({sidebarTabKey:e})};var r=new re,i=e.selectedDiagramId||window.location.hash.replace(/^#/,""),a=r.lookupDiagram(i),o=r.lookup(e.selectedEntityId)||a;return n.state={model:r,selectedDiagram:a,selectedEntity:o,sidebarTabKey:zr.DiagramTreeTab,sidebarWidth:385},n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.createElement(o.Fragment,null,this.exceptionView(),this.workingView(),o.createElement("div",{className:"archimate-row"},o.createElement(_r,{diagramLinkClicked:this.onDiagramLinkClick,entityClicked:this.onEntityClick,model:this.state.model,onDiagramUpdated:this.onDiagramLinkClick,onTabSelected:this.onSidebarTabSelected,selectedDiagram:this.state.selectedDiagram,selectedEntity:this.state.selectedEntity,sidebarTabKey:this.state.sidebarTabKey}),o.createElement("div",{className:"archimate-diagram-view"},o.createElement("div",{className:"archimate-svg-container"},o.createElement(Xn,{key:this.state.selectedDiagram?this.state.selectedDiagram.id:"archimate-no-diagram",selectedEntity:this.state.selectedEntity,selectedDiagram:this.state.selectedDiagram,nodes:this.state.selectedDiagram?this.state.selectedDiagram.nodes:[],connections:this.state.selectedDiagram?this.state.selectedDiagram.connections.filter((function(e){return e.targetViewNode()instanceof J})):[],entityClicked:this.onEntityClick,diagramClicked:this.onDiagramLinkClick})))))}},{key:"componentDidMount",value:function(){var e=this,t=new DOMParser;this.setState({loadStart:Date.now(),loadTime:void 0,parseDone:void 0,parseStart:void 0,parseTime:void 0,working:"Loading ArchiMate Model"}),fetch(this.props.modelUrl).then((function(e){return e.text()})).then((function(n){e.setState({loadTime:(Date.now()-e.state.loadStart)/1e3,parseStart:Date.now(),working:"Parsing ArchiMate Model"});var r,i=t.parseFromString(n,"application/xml");try{i.children[0].ownerDocument?r=function(e){var t,n=e.children[0].attributes.getNamedItem("xmlns"),r=n?n.value:void 0;switch(r){case"http://www.opengroup.org/xsd/archimate/3.0/":case"http://www.opengroup.org/xsd/archimate":throw new U("Format not supported",r);default:t=(new Se).parse(e)}return t}(i.children[0].ownerDocument):e.setState({error:"ArchiMate Model Document was null"})}catch(c){e.setState({error:c})}e.setState({parseDone:Date.now(),parseTime:(Date.now()-e.state.parseStart)/1e3,working:void 0});var a=r||e.state.model,o=a.lookupDiagram(e.props.selectedDiagramId||window.location.hash.replace(/^#/,"")),s=a.lookup(e.props.selectedEntityId)||o||a;e.setState({model:r||e.state.model,selectedDiagram:o,selectedEntity:s})}),(function(t){e.setState({error:t,working:void 0})}))}},{key:"exceptionView",value:function(){if(void 0!==this.state.error){if(this.state.error instanceof String)return this.state.error;var e=this.state.error,t="".concat(e.name,": ").concat(e.message);return o.createElement(y.a,{bsStyle:"danger",onDismiss:this.onCloseException},o.createElement("h4",null,"An Exception Occurred"),o.createElement("p",null," ",t," "),o.createElement("p",null,o.createElement(f.a,{onClick:this.onCloseException},"Close")))}}},{key:"workingView",value:function(){return o.createElement(b.a,{show:!!this.state.working,onHide:this.onWorkingViewHide},o.createElement(b.a.Header,null,o.createElement(b.a.Title,null,"Loading...")),o.createElement(b.a.Body,null,o.createElement("div",{className:"progress"},o.createElement("div",{className:"progress-bar progress-bar-striped active",role:"progressbar","aria-valuenow":100,"aria-valuemin":0,"aria-valuemax":100},this.state.working)),o.createElement("p",null,this.state.working)))}}]),t}(o.Component);n(268),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(Wr,{modelUrl:"./archimate/ArchiSurance_V3.archimate"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},31:function(e,t,n){},50:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.fa5da65d.chunk.js.map